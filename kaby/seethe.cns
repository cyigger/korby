



;-------------------------------------------------------------------------------
; Spam Deny
[Statedef 702]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 702
sprpriority = 5

[State 200, End]
type = Destroyself
trigger1 = time = 200
;--------------------
;-------------------------------------------------------------------------------
; Spam Deny
[Statedef 6678]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 999
sprpriority = 5

[State 200, End]
type = Destroyself
trigger1 = time = 120
;-------------------------------------------------------------------------------
; Spam Deny 2
[Statedef 6823]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 999
sprpriority = 5

[State 200, End]
type = Destroyself
trigger1 = time = 50
;===========================================================================
;---------------------------------------------------------------------------

;No Copy Ability
[Statedef 901]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 0
ctrl = 0
velset = 0,0
anim = 500
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
triggerall = time = 0
trigger1 = AnimElem = 1
value = S200,19+(random<500)*1
volumescale = 150
channel = 0

[State 0, SuperPause]
type = SuperPause
trigger1 = AnimElem = 1
time = 30
sound = S0,12
pos = 0,-20
movetime = 16
darken = 1
p2defmul = 1
poweradd = 0

[State 0, VarSet]
type = VarSet
trigger1 = var(19) != 7
v = 10
value = 0

[State 0, VarSet]
type = MapSet
trigger1 = var(19) = 7 || var(19) = 9
map = "Has6C"
value = 1

[State 0, VarSet]
type = MapSet
trigger1 = var(19) = 10
map = "Has4C"
value = 1

[State 0, VarSet]
type = MapSet
trigger1 = var(19) != 7 && var(19) != 9
map = "Has6C"
value = 0

[State 0, VarSet]
type = MapSet
trigger1 = var(19) != 10
map = "Has4C"
value = 0

;---------------------------------------------------------------------------
; PS
[State 2121,]
type = VarSet
trigger1 = p2name = "kaby"
var(19) = 0

[State 2121,]
type = VarSet
trigger1 = p2name = "Glitch"
var(19) = 1

; Glitch
[State 2121,]
type = VarSet
trigger1 = p2name = "Aege"
var(19) = 2

; Aege
[State 2121,]
type = VarSet
trigger1 = p2name = "Fly"
var(19) = 3

; Fly
[State 2121,]
type = VarSet
trigger1 = p2name = "Max"
var(19) = 4

; Max
[State 2121,]
type = VarSet
trigger1 = p2name = "Noll"
var(19) = 5

; Noll
[State 2121,]
type = VarSet
trigger1 = p2name = "Saito"
var(19) = 6

; Saito
[State 2121,]
type = VarSet
trigger1 = p2name = "Jodie"
var(19) = 7

 ; Jodie
[State 2121,]
type = VarSet
trigger1 = p2name = "Yoru"
var(19) = 8

 ; Yoru
[State 2121,]
type = VarSet
trigger1 = p2name = "Violet"
var(19) = 9
;Bill
[State 2121,]
type = VarSet
trigger1 = p2name = "Bill"
var(19) = 10
;Jay
[State 2121,]
type = VarSet
trigger1 = p2name = "Jay"
var(19) = 11

;Clutch
[State 2121,]
type = VarSet
trigger1 = p2name = "Clutch"
var(19) = 12
;---------------------------------------------------------------------------

[State 200, Neutral Reset]
type = ChangeState
Triggerall = time >= 30 && enemy, life >= 1
trigger1 = p2movetype !=H 
value = ifelse(pos y < 0, 50, 501)
ctrl = 1

[State 200, Is he dead?]
type = ChangeState
Trigger1 = time >= 30 && enemy, life <= 0
value = ifelse(pos y < 0, 50, 501)
ctrl = 1


;========================
;Down + C
;========================
[Statedef 450]
type    = S
movetype= I
physics = S

; Glitch
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 1
value = 472
ctrl = 1

; Aege
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 2
value = 478
ctrl = 1
; Fly
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 3
value = 651
ctrl = 1
;Max
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 4
triggerall = numhelper(662) = 0 
triggerall = numhelper(497) = 0 
triggerall = numhelper(496) = 0 
triggerall = numhelper(498) = 0 
value = 495
ctrl = 1
;noll
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 5
triggerall = numhelper(506) > 0
triggerall = helper(506),stateno != 684 && helper(506),prevstateno != 684 ; Disables use after switching
value = 509
ctrl = 1
;Saito
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 6
value = 513
ctrl = 1
;Jodie
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 0
value = 708
ctrl = 1
;Jodie 2
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 1
value = 709
ctrl = 1
;Yoru
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 8
Triggerall = power >= 300
value = 636
ctrl = 1
;Violet
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 9
value = 541
ctrl = 1
;bill
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 10
triggerall = var(21) > 0
value = 627
ctrl = 1
;bill 2
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 10
triggerall = var(21) = 0
value = 632
ctrl = 1
;jay
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 11
value = 670
ctrl = 1
;Clutch
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 12
Triggerall = Var(17) < 3 
value = ifelse(numhelper(6823) = 0, 690, 10)
ctrl = 1

;nothing found, check forward
[State 1000, 6]
type = ChangeState
trigger1 = command = "holdfwd"
value = 420
ctrl = 1

;nothing found, check forward
[State 1000, 6]
type = ChangeState
trigger1 = command = "holdback"
value = 440
ctrl = 1

;nothing found, check neutral next
[State 1000, 6]
type = ChangeState
trigger1 = 1
value = 400
ctrl = 1



;========================
;Forward + C
;========================
[Statedef 420]
type    = S
movetype= I
physics = S

;Jodie
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 0
triggerall = numhelper(6678) = 0
value = 526
ctrl = 1

;Violet
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 9
Triggerall = var(47) > 0
value = 540
ctrl = 1

;nothing found, check neutral next
[State 1000, 6]
type = ChangeState
trigger1 = 1
value = 400
ctrl = 1

;========================
;Forward + C Air
;========================
[Statedef 430]
type    = A
movetype= I
physics = A

;Jodie
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 0
triggerall = numhelper(6823) = 0
value = 5322
ctrl = 1

;nothing found, check neutral next
[State 1000, 6]
type = ChangeState
trigger1 = 1
value = 620
ctrl = 1


;========================
;Back + C
;========================
[Statedef 440]
type    = S
movetype= I
physics = S

[State 1000, 6]
type = ChangeState
trigger1 = time = 2
value = 6952
ctrl = 1

;Bill
[State 1000, 6]
type = ChangeState
triggerall = numhelper(686) <= 2
trigger1 = var(19) = 10
value = 685
ctrl = 1

;========================
;Back + C Air
;========================
[Statedef 4400]
type    = A
movetype= I
physics = A

;nothing found, check neutral next
[State 1000, 6]
type = ChangeState
trigger1 = 1
value = 620
ctrl = 1


;========================
;Down + C Air
;========================
[Statedef 460]
type    = A
movetype= I
physics = A

[State 1000, 6]
type = ChangeState
trigger1 = time = 2
value = 6952
ctrl = 1

; Glitch
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 1
triggerall = numhelper(6678) = 0
value = 633
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 1
triggerall = numhelper(6678) >= 1
value = 687
ctrl = 1
; Aege
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 2
value = 478
ctrl = 1
; Fly
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 3
value = 654
ctrl = 1
;Max
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 4
triggerall = numhelper(662) = 0 
triggerall = numhelper(497) = 0 
triggerall = numhelper(496) = 0 
triggerall = numhelper(498) = 0 
value = 661
ctrl = 1
;Noll
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 5
triggerall = power >= 250
triggerall = numhelper(80056) = 0
triggerall = numhelper(80057) = 0
value = 80055
ctrl = 1
;Saito
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 6
value = 518
ctrl = 1
;Jodie
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 0
value = 525
ctrl = 1
;Yoru
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 8
Triggerall = power >= 200
value = 642
ctrl = 1
;Violet
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 9
Triggerall = var(47) > 0
value = 649
ctrl = 1
;bill
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 10
value = 635
ctrl = 1

;nothing found, check forward
[State 1000, 6]
type = ChangeState
trigger1 = command = "holdfwd"
value = 430
ctrl = 1

;nothing found, check forward
[State 1000, 6]
type = ChangeState
trigger1 = command = "holdback"
value = 4400
ctrl = 1

;nothing found, check neutral next
[State 1000, 6]
type = ChangeState
trigger1 = 1
value = 620
ctrl = 1


;========================
;Aerial
;========================
[Statedef 620]
type    = A
movetype= I
physics = A
[State 1000, 6]
type = ChangeState
trigger1 = time = 2
value = 6952
ctrl = 1

; Kaby
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 0
value = 401
ctrl = 1

; Glitch
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 1
value = 687
ctrl = 1

; Aege
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 2
value = 473
ctrl = 1
; Fly
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 3
value = 484
ctrl = 1
;Max
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 4
triggerall = numhelper(491) = 0 
triggerall = numhelper(493) = 0 
triggerall = numhelper(487) = 0 
triggerall = numhelper(484) = 0 
triggerall = numhelper(490) = 0 
value = 494
ctrl = 1
;Noll
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 5
value = 505
ctrl = 1
;Saito
[State 1000, 6]
type = ChangeState
triggerall = numhelper(6678) = 0
trigger1 = var(19) = 6
value = 511
ctrl = 1
;Jodie
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 0
value = 525
ctrl = 1
;sword jodie
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 1
value = 2830
ctrl = 1
;Yoru
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 8
Triggerall = power >= 200
value = 531
ctrl = 1
;Violet
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 9
value = 538
Triggerall = var(47) > 0
 Triggerall = power >= 50  
ctrl = 1
;Bill
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 10
triggerall = numhelper(629) < 2
value = 628
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 11
Triggerall = power >= 200
value = 677
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 12
Triggerall = power >= 200
value = 705
ctrl = 1


;========================
;Grounded
;========================
[Statedef 400]
type    = S
movetype= I
physics = S

[State 0, VelSet if coming from wavedash]
type = VelAdd
trigger1 = prevstateno = 30 && time = 0
x = 3

[State 1000, 6]
type = ChangeState
trigger1 = time = 2
value = 6954
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 0 && prevstateno = 30
value = 409
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 0
value = 401
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 1
Triggerall = power >= 200
value = 470
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 2
value = 477
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 3
value = 483
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 4
triggerall = numhelper(491) = 0 
triggerall = numhelper(493) = 0 
triggerall = numhelper(487) = 0 
triggerall = numhelper(484) = 0 
triggerall = numhelper(490) = 0 
value = 493
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 5
Triggerall = power >= 200
triggerall = numhelper(502) = 0
value = 499
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 6
Triggerall = power >= 200
value = 510
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 0
Triggerall = power >= 200
value = 522
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 1
Triggerall = power >= 200
value = 2620
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 8
Triggerall = power >= 200
value = 530
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 9
value = 534
Triggerall = var(47) > 0
 Triggerall = power >= 50  
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 10
value = 631
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = numhelper(675) < 1
trigger1 = var(19) = 11
value = 674
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 12
value = 692
ctrl = 1

;========================
;Wavedash + C
;========================
[Statedef 80000]
type    = S
movetype= I
physics = S
ctrl = 0

[State 0, VelSet if coming from wavedash]
type = VelAdd
triggerall = vel x < 6
trigger1 = prevstateno = 30 && time = 0
x = 5

[State 1000, 6]
type = ChangeState
trigger1 = time = 2
value = 6954
ctrl = 1

;Korby
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 0 && prevstateno = 30
value = 409
ctrl = 1

;Glitch
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 1
Triggerall = power >= 100
value = 80010

;Aege
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 2
value = 80020

;Fly
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 3
Triggerall = power >= 300
value = 80030

;Max
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 4
triggerall = numhelper(662) = 0 
triggerall = numhelper(497) = 0 
triggerall = numhelper(496) = 0 
triggerall = numhelper(498) = 0 
value = 80040

;Noll
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 5
triggerall = numhelper(80051) = 0
Triggerall = power >= 250
value = 80050
ctrl = 1

;Saito
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 6
triggerall = power >= 100
value = 80060

;Jodie
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 0
Triggerall = power >= 200
value = 80070
ctrl = 1
;Jodie Sword
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 7 && var(10) = 1
Triggerall = power >= 200
value = 2620
ctrl = 1

;Yoru
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 8
Triggerall = power >= 200
value = 80080
ctrl = 1

;Violet
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 9
Triggerall = var(47) > 0
Triggerall = power >= 50 
value = 80090 
ctrl = 1

;bill
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 10
triggerall = power >= 200
value = 80100
ctrl = 1

;jay
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 11
value = 80110
ctrl = 1

;Clutch
[State 1000, 6]
type = ChangeState
trigger1 = var(19) = 12
Triggerall = Var(17) < 3 
value = ifelse(numhelper(6823) = 0, 80120, 10)
ctrl = 1

;---------------------------------------------------------------------------

;========================
;inhale
;========================
[Statedef 401]
type    = S
movetype= A
physics = S
poweradd = 0
ctrl = 0
anim = 400
sprpriority = 2

[State 214, y]
type = removeexplod
trigger1 = command != "hold_c" && time > 35
trigger2 = movecontact
trigger3 = stateno != 401
id = 143

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 2
value = S200,21
volumescale = 150
channel = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = S2,8
volumescale = 150
channel = 0

[State 0, VelAdd]
type = VelSet
triggerall = time = 0
trigger1 = pos y < -1 || vel y < 0
x = vel x * 0.25
y = -2

[State 0, VelAdd]
type = VelAdd
trigger1 = pos y < -1 || vel y < 0
y = 0.44

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y < -1 || vel y < 0
statetype = A
physics = N

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= -1 && vel y >= 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= -1 && vel y >= 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y >= -1 && vel y >= 0
statetype = S
physics = S



[State 1200, 6]
type = explod
Trigger1 = AnimElem = 4
anim = 407
id = 143
pos = 10,-20
facing = 0
postype = p1
sprpriority = 3
removetime = 90
bindtime = -1
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, VarSet]
type = MapSet
trigger1 = time >= 18
map = "hitOverride"
value = 1

[State 441, HitOverride]
type = HitOverride
trigger1 =  time >= 18 ; this doesnt work with 236C for whatever reason, the star just misses
attr = SCA,NP,SP,HP ;You were missing HP for "Hyper Projectile". The star is likely categorized as this.
stateno = 20010

[State 210, 2]
type = HitDef
triggerall = !movecontact
triggerall = ((enemy,prevstateno = 40 || enemy,prevstateno = 60 || enemy,stateno = 105) && enemy,time >= 5)
trigger1 = enemy,anim != 40
attr = S, NT
animtype  = Hard
damage    = 0
hitflag = MAFD
pausetime = 0,0
numhits = 0
sparkno = -1
sparkxy = -2,-30
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
guard.velocity = 4
airguard.velocity = 4,-.5
p2facing = 1
p2stateno = 902
p1stateno = 402
p2getp1state = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p2facing = 1

[State 210, 2]
type = HitDef
triggerall = !movecontact
triggerall = !((enemy,prevstateno = 40 || enemy,prevstateno = 60 || enemy,stateno = 105) && enemy,time >= 5)
trigger1 = enemy,anim != 40
attr = S, NT
animtype  = Hard
damage    = 0
hitflag = MFD
pausetime = 0,0
numhits = 0
sparkno = -1
sparkxy = -2,-30
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
guard.velocity = 4
airguard.velocity = 4,-.5
p2facing = 1
p2stateno = 902
p1stateno = 402
p2getp1state = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p2facing = 1

[State 0, VarSet]
type = MapSet
trigger1 = movecontact
trigger2 = stateno != 401
map = "hitOverride"
value = 0

[State 210, 5]
type = ChangeState
trigger1 = command != "hold_c" && time > 35
value = 403
ctrl = 1

[State 210, 5]
type = ChangeState
trigger1 = Time > 100
value = 403
ctrl = 1

;========================
; fast inhale 
;========================
[Statedef 409]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
ctrl = 0
anim = 409
sprpriority = 2

[State 214, y]
type = removeexplod
trigger1 = command != "hold_c" && time > 35
trigger2 = movecontact
trigger3 = stateno != 409
id = 143

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 2
value = S200,21
volumescale = 150
channel = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 =  AnimElem = 3
value = S2,8
volumescale = 150
channel = 0

[State 441, HitOverride]
type = HitOverride
trigger1 =  time >= 18
trigger1 = prevstateno = 409
attr = SCA,NP,SP,HP ; since it is slower now
stateno = 20010





[State 1200, 6]
type = explod
Trigger1 = AnimElem = 4
anim = 407
id = 143
pos = 10,-20
facing = 0
postype = p1
sprpriority = 3
removetime = 90
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 210, 2]
type = HitDef
triggerall = !movecontact
triggerall = ((enemy,prevstateno = 40 || enemy,prevstateno = 60 || enemy,stateno = 105) && enemy,time >= 5)
trigger1 = enemy,anim != 40
attr = S, NT
animtype  = Hard
damage    = 0
hitflag = MAFD
pausetime = 0,0
numhits = 0
sparkno = -1
sparkxy = -2,-30
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
guard.velocity = 4
airguard.velocity = 4,-.5
p2facing = 1
p2stateno = 902
p1stateno = 402
p2getp1state = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p2facing = 1

[State 210, 2]
type = HitDef
triggerall = !movecontact
triggerall = !((enemy,prevstateno = 40 || enemy,prevstateno = 60 || enemy,stateno = 105) && enemy,time >= 5)
trigger1 = enemy,anim != 40
attr = S, NT
animtype  = Hard
damage    = 0
hitflag = MFD
pausetime = 0,0
numhits = 0
sparkno = -1
sparkxy = -2,-30
guardsound = S6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
guard.velocity = 4
airguard.velocity = 4,-.5
p2facing = 1
p2stateno = 902
p1stateno = 402
p2getp1state = 1
ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0
kill = 0
p2facing = 1


[State 210, 5]
type = ChangeState
trigger1 = command != "hold_c" && time > 35
trigger1 = power >= 200
value = 403
ctrl = 1

[State 210, 5]
type = ChangeState
trigger1 = Time > 100
value = 403
ctrl = 1

;--------------------------------------------
; enemy
;-------------------------------------------
[Statedef 902]
type    = A
movetype= H
physics = N
ctrl = 0
anim = 5001
sprpriority = -1
velset = 0,0

[State 0, Turn]
type = Turn
trigger1 = p2dist x < 0

[State 0, VelAdd]
type = VelAdd
trigger1 = p2dist y < 0
y = -.4

[State 0, VelAdd]
type = VelAdd
trigger1 = p2dist y > 0
y = .4

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
x = .5

[State 0, VelSet]
type = VelSet
trigger1 =  p2dist x <= 10
x = 0
y = 0

[State 2125, ]
type = AssertSpecial
trigger1 = p2dist x <= 10
flag = invisible

[state 591, AssertSpecial]
type = AssertSpecial
trigger1 = p2dist x <= 10
flag = noshadow

[State 2125,]
type = PlayerPush
trigger1 = 1
value = 0

[State 2125, ]
type = ChangeState
trigger1 = Time = 200
value = 0
ctrl = 0

;========================
;inhale p2
;========================
[Statedef 402]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
ctrl = 0
anim = 401
sprpriority = 2

[State 214, y]
type = removeexplod
trigger1 = p2dist x <= 10
id = 143

[State 210, 1]
type = stopSnd
trigger1 = animelem = 6
channel = 4

[State 0, StopSnd]
type = StopSnd
trigger1 =  Time = 0
channel = 0

[State 0, TargetBind]
type = TargetBind
trigger1 = time = 22
time = 1
pos = 0,0

[State 0, VelAdd]
type = VelAdd
triggerall = time >= 22
trigger1 = pos y < -1 || vel y < 0
y = 0.44

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = time >= 22
trigger1 = pos y < -1 || vel y < 0
statetype = A
physics = N

[State 0, VelSet]
type = VelSet
;triggerall = time >= 22
trigger1 = pos y >= -1 && vel y >= 0
y = 0

[State 0, PosSet]
type = PosSet
;triggerall = time >= 22
trigger1 = pos y >= -1 && vel y >= 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
;triggerall = time >= 22
trigger1 = pos y >= -1 && vel y >= 0
statetype = S
physics = S

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 =  p2dist x <=! 10 && animelem = 5
value = 401
elem = 5

[State 200,p]
type = ChangeState
triggerall = p2dist x <= 10
Trigger1 = command = "holddown" 
value = 404
ctrl = 1

[State 200,p]
type = ChangeState
triggerall = p2dist x <= 10
Trigger1 = command = "a"
trigger2 = time = 100
value = 408
ctrl = 1

;========================
;Spit
;========================
[Statedef 408]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
ctrl = 0
velset = 0,0
anim = 408
sprpriority = 2

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, HA
animtype  = Light
damage    = 110
hitflag = MAFD
guardflag = MA
pausetime = 0,0
sparkno = 00
guard.sparkno = 00
sparkxy = -8,-25
hitsound   = S97,1
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = 10,-2
air.velocity = 10 -2
guard.velocity = 5
Fall = 1
p2stateno = 1025
p2facing = 1
fall.recover =  0
Envshake.time = 10

[State 200,p]
type = ChangeState
Trigger1 = AnimTime = 0
value = ifelse(pos y < 0, 50, 501)
ctrl = 1

;========================
;Consume
;========================
[Statedef 404]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
ctrl = 0
velset = 0,0
anim = 404
sprpriority = 2

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = A, HA
animtype  = Light
damage    = 0,0
hitflag = MAFD
guardflag = MA
pausetime = 0,0
sparkno = 00
guard.sparkno = 00
sparkxy = -8,-25
hitsound   = S97,1
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = 3,-7
air.velocity = 3,-5
guard.velocity = 5
Fall = 1
p2facing = 1
fall.recover =  0
Envshake.time = 10

[State 200,p]
type = ChangeState
Trigger1 = AnimTime = 0
value = 901
ctrl = 1
;---------------------------------------------------------------------------
;========================
;inhale miss
;========================
[Statedef 403]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd = 0
ctrl = 0
velset = 0,0
anim = 402
sprpriority = 2
[State 0, StopSnd]
type = StopSnd
trigger1 =  Time = 0
channel = 0


[State 210, 5]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===========================================================================
; Glitch
;===============================================================================
; Glitch - C:
;-------------------------------------------------------------------------------
[Statedef 470]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 470
poweradd = -200
velset = -2.5,0
sprpriority = 1
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,8+(random<500)*1
volumescale = 300
channel = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 9
x = -6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S1,3
volumescale = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S0,6
volumescale = 100

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10

[State 0, Charge Complete]
type = ChangeState
triggerall = time > 33
trigger1 = animelem = 6
value = 471

[State 0, Charge]
type = changeAnim2
triggerall = time < 40
triggerall = animElem = 6
trigger1 = command = "hold_c"
trigger2 = time >= 20 
value = 470
elem = 5

[State 0 , Charge sound]
type = PlaySnd
triggerall = time > 15
trigger1 = animElem = 5
value = F10,1
volumescale = 300
persistent = 0

[State 0, Explod]
type = Explod
triggerall = time > 15
trigger1 = animElem = 5
anim = F580
ID = 580
pos = -10,-20
postype = P1  ;P2, Front, Back, Left, Right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 9999
scale = .3,.3
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
persistent = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 7
helpertype = normal ;player
name = "Glitch Bomb"
ID = 448
stateno = 448
pos = 0,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
inheritJuggle = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 7
value = S0,6
volumescale = 100

[State 1000, 6]
type = ChangeState
triggerall = prevstateno = 5605
trigger1 = AnimTime = 0
value = 5610
ctrl = 1

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; C - Charged
[Statedef 471]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 471
sprpriority = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "Charged Glitch Bomb"
ID = 452
stateno = 452
scale = 2,2
pos = 0,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
inheritJuggle = 1

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; C - Start
[Statedef 448]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 448
sprpriority = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 


[State 0, Damage Proration]
type = ParentVarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State 0 , VelSet]
type = Velset
trigger1 = 1
x = 17

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 400, 4]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
trigger1 = !movecontact && !movereversed
animtype  = Heavy
attr = S, NP
damage = ifelse(enemy,movetype = A,80,40)*map(AbilityMultiplier),20*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MA
ground.hittime = ifelse(enemy,movetype = A,22,11)
pausetime = 0,ifelse(enemy,movetype = A,12,6)
sparkno = 2
sparkxy = 0, 0
hitsound = S ifelse(enemy,movetype = A,5,3), 1
guard.sparkno = 13000
guardsound = 6,11
ground.type = High
ground.slidetime = 15
ground.velocity = -8
airguard.velocity = -3.5,-2.75
air.velocity = -2.5,-5.5
air.fall = 1
Getpower = 0,0
Fall.recovertime = ifelse(enemy,movetype = A,60,30)

[State 200, End]
type = Changestate
trigger1 = frontedgebodydist < -100
trigger2 = time = 250
trigger3 = movecontact || movereversed
value = 449

;-------------------------------------------------------------------------------
; C - End
[Statedef 449]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 449
sprpriority = 1

[State 411, Velset]
type = velSet
trigger1 = 1
x = 0
y = 0

[State 411, End]
type = Destroyself
trigger1 = AnimTime = 0

;-------------------------------------------------------------------------------
; C Charged- Start
[Statedef 452]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 452
sprpriority = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 


[State 0, Damage Proration]
type = ParentVarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0 , VelSet]
type = Velset
trigger1 = 1
x = 13

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 400, 4]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
trigger1 = !movecontact && !movereversed
animtype  = Heavy
attr = S, NP
damage = ifelse(enemy,movetype = A,80,40)*map(AbilityMultiplier),40*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MA
ground.hittime = ifelse(enemy,movetype = A,44,22)
pausetime = 0,5
sparkno = 2
sparkxy = 0, 0
hitsound = S ifelse(enemy,movetype = A,5,3), 1
guard.sparkno = 13000
guardsound = 6,11
ground.type = High
ground.slidetime = 25
ground.velocity = 5
airguard.velocity = 1.5,1.75
air.velocity = 1.5,1.5
air.fall = 1
Getpower = 0,0
Fall.recovertime = ifelse(enemy,movetype = A,120,60)

[State 200, End]
type = Changestate
trigger1 = frontedgebodydist < -30
trigger2 = time = 250
trigger3 = movecontact || movereversed
value = 451

;-------------------------------------------------------------------------------
; C Charged- End
[Statedef 451]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 449
sprpriority = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 411, Velset]
type = velSet
trigger1 = 1
x = 0
y = 0

[State 400, 4]
type = HitDef
trigger1 = animelem = 3
animtype  = Heavy
attr = S, NP
damage = 40*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MA
ground.hittime = ifelse(enemy,movetype = A,44,22)
pausetime = 0,ifelse(enemy,movetype = A,24,12)
sparkno = 2
sparkxy = 0, 0
hitsound = S ifelse(enemy,movetype = A,5,3), 1
guard.sparkno = 13000
guardsound = 6,11
ground.type = High
ground.slidetime = 25
ground.velocity = -4,-8
airguard.velocity = -2.5,-3.75
air.velocity = -2.5,-3.5 
fall = 1
Getpower = 0,0
Fall.recover = 0

[State 411, End]
type = Destroyself
trigger1 = AnimTime = 0

;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
; Glitch - C - Aire
[Statedef 687]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 687
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = random < 600
trigger1 = AnimElem = 1
value = S200,10+(random<500)*1
volumescale = 200
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno=900 && time = 0
y = 0
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5



[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 100

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = ifelse(enemy,movetype = A,60,30) * map(AbilityMultiplier)
hitflag = MAF
guardflag = HAF
pausetime = ifelse(enemy,movetype = A,24,12),ifelse(enemy,movetype = A,24,12)
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-7
air.velocity = -2,-7
Fall = 1
Envshake.time = 20
Fall.recovertime = ifelse(enemy,movetype = A,80,40)
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup" && movecontact && var(3) = 0 
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && movecontact && var(3) = 0 
value = 688
ctrl = 1

[State 200, End]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0 && var(3) = 0
trigger1 = command = "holddown"
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 450
ctrl = 1

;----------------------------------------------------------------------------------
;===============================================================================
; Glitch - Down C:
;-------------------------------------------------------------------------------
[Statedef 472]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 472
poweradd = -200
velset = 0,0
sprpriority = 2

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 450, NotHitBy]
type = notHitBy
trigger1 = time = 0
value = A
time = 9


[State 0, VarSet]
type = VarSet
triggerall = AnimElem = 1
trigger1 = pos Y <= 0 
v = 3    ;fv = 10
value = 1

[State 0, VelSet]
type = VelSet
triggerall = AnimElem = 3
trigger1 = movecontact
x = -2
y = -5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S5,2
volumescale = 100

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 451
ID = 451
pos = 0,-10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 0
y = -7

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 4
statetype = A       ;S,A,C,L
movetype = A        ;I,A,H
physics = A         ;A,C,S,N

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = ifelse(enemy,movetype = A,120,60)*map(AbilityMultiplier),15*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAFD
guardflag = MAF
pausetime = 14,18
guard.pausetime= 14,15

sparkno = 0
guard.sparkno = s7000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,3)
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-7
air.velocity = -2,-5
Fall = ifelse(enemy,movetype = A, 1,0)
Envshake.time = 15
Fall.recovertime = ifelse(enemy,movetype = A,80,40)

guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
;ground.cornerpush.veloff = -10
;air.cornerpush.veloff = -10

[State 200, End]
type = ChangeState
triggerall = movecontact
triggerall = time > 14
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 471
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = movehit
value = 50
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;===============================================================================
; Glitch - Down C - Air:
;-------------------------------------------------------------------------------
[Statedef 633]
type    = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 633
poweradd = 0
velset = 0,-.5
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = time = 10
value = -200

[State 0, CtrlSet]
type = CtrlSet
triggerall = time > 5
trigger1 = !movecontact
value = 1
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = time >= 10 && time <= 24
Value = A,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S5,2
volumescale = 100

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "Spam Deny"
ID = 6678
stateno = 6678
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 461
ID = 461
pos = 0,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Launch fwd if prevstate was NOT j2B]
type = VelSet
trigger1 = AnimElem = 2
x = 11
y = -4
y = -3
[State 0, unique velocity on hit if prevstate was NOT j2B]
type = VelSet
trigger1 = movehit
x = 2
y = -8

[State 0, unique velocity on BLOCK if prevstate was NOT j2B]
type = VelSet
trigger1 = moveguarded
x = -1.5
y = -.5

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 1
v = 20     ;fv = 
value = 1


[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = ifelse(enemy,movetype = A,80,40)*map(AbilityMultiplier),5*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAFD
guardflag = MA
pausetime = ifelse(enemy,movetype = A,28,14),ifelse(enemy,movetype = A,36,18)
guard.pausetime = 14,10
sparkno = 1
guard.sparkno = s7000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,3)
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-5
air.velocity = -2,-7.5
Fall = ifelse(enemy,movetype = A,1, 0)
Envshake.time = 15
Fall.recovertime = ifelse(enemy,movetype = A, 80,40)
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4

[State 200, End]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 689
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = movehit
value = 50
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;===============================================================================
; Glitch - Down C - Air Finisher:
;-------------------------------------------------------------------------------
[Statedef 689]
type    = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 689
poweradd = -200
velset = 0,0
sprpriority = 2

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 15

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 4
y = -4

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -4
y = -4

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 40*map(AbilityMultiplier),5*map(AbilityMultiplier)
guard.kill = 0
guardflag = HA
pausetime = 18,24
sparkno = 2
guard.sparkno = s7000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,7
air.velocity = -2,7
Fall = 1
Envshake.time = 15
Fall.recover = 0
guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -15
p2stateno = 1000
p2getp1state = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-----------------------------------------
; Glitch Custom Jump Cancel
[Statedef 688]
type    = A
physics = A
juggle  = 0
ctrl = 0
anim = 196
poweradd = 0
velset = 0,0
sprpriority = 2

[State 0, VarSet]
type = VarSet
trigger1 = time = 0 
v = 3    ;fv = 10
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 4
y = -8.4

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 688
ID = 688
pos = -5,-25
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,2
volumescale = 100

[State 200, Jumping A]
type = ChangeState
Triggerall = Time > 4
trigger1 = command = "a"
value = 600



[State 200, Jumping B]
type = ChangeState
Triggerall = Time > 4
trigger1 = command = "b"
value = 610

[State 200, Jumping Down C]
type = ChangeState
Triggerall = Time > 4
triggerall = power >= 200
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 450

[State 200, Jumping C]
type = ChangeState
Triggerall = Time > 4
trigger1 = command = "c"
value = 620

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
;Aege
;-------------------------------------------------------------------------------
; Aege - C - Aire
[Statedef 473]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 473
poweradd = 0
sprpriority = 2

[State 0, VOICE - Heheh]
type = PlaySnd
triggerall = var(2)  >=40
triggerall = var(2)  <=70
trigger1 = Time = 5
value = S420,0
volumescale = 500
[State 0, VOICE - Grunt 2]
type = PlaySnd
triggerall = var(2)  >=75
triggerall = var(2)  <=100
trigger1 = Time = 0
value = S200,1
volumescale = 500

[State 0, VelSet]
type = VelSet
triggerall = prevstateno = 66
trigger1 = AnimElem = 1
x = -2
y = -4

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 2
y = -3


[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,0
volumescale = 50

[State 0, tIME BUBBLE]
type = PlaySnd
trigger1 = Animelem = 2
value = s620,0
volumescale = 100
[State 0, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "C Air: 2"
ID = 625
stateno = 625
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
inheritJuggle = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Aege - C - Aire: Helper
[Statedef 625]
type    = A
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 625
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = RootMapAdd
triggerall = movehit && enemy,gethitvar(fall)
trigger1 = AnimElem = 1
trigger2 = AnimElem = 6
trigger3 = AnimElem = 12
map = "juggle"
value = 5

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State -2, Counterhit Proration Scale - Helper] ;Whenever the player counterhits, give them negative proration, only works for first hit in combo
type = Helper
Triggerall = numhelper(1020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit Proration Scale"
ID = 1020
stateno = 1020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State -2, Counterhit Bass Drop Sound - Helper]
type = Helper
Triggerall = numhelper(1021) = 0 && stateno != 700
trigger1 = movecountered
helpertype = normal 
name = "Counterhit Sound"
ID = 1021
stateno = 1021
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1

[State 0, Counterhit Text Display]
type = LifebarAction
trigger1 = MoveCountered = 1 && root, map(_kbbsys_actionMoveCounteredFlag) = 0
spr = Const(MsgCounterHit), 0
snd = 25,0
persistent = 0

[State 0, Counterhit Map Modify]
type = RootMapSet
trigger1 = (MoveCountered = 1 && root,MoveCountered = 1) && root, map(_kbbsys_actionMoveCounteredFlag) = 0
map = "_kbbsys_actionMoveCounteredFlag"
value = 1

[State 0, Counterhit Map Reset]
type = RootMapSet
trigger1 = (MoveCountered = 0 && root,MoveCountered = 0) && root, map(_kbbsys_actionMoveCounteredFlag) = 1
map = "_kbbsys_actionMoveCounteredFlag"
value = 0


[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
trigger1 = movehit = 1
v = 23   ;fv = 
value = 1

[State 0, VelSet]	;Helper Attacks
type = VelSet
trigger1 = Animelem = 1||Animelem = 6||Animelem = 11
x = 6
[State 0, PosAdd]	;Helper Attack posAdd
type = PosAdd
trigger1 = Animelem = 1||Animelem = 6||Animelem = 11
x = 5
[State 0, VelSet]
type = VelSet	;Helper Recover Slows
trigger1 = Animelem = 3||Animelem = 7||Animelem = 12
x = 2.5

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 200, Hit]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
trigger1 = AnimElem = 1
attr = A, NP
animtype  = Heavy 
damage    = 10*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
getpower = 25
pausetime = 4,2
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-35
hitsound   = 5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -3,-3
air.velocity = -3,-3.25
Fall = 0
Envshake.time = 5
[State 200, Launch]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
trigger1 = AnimElem = 6
attr = A, NP
animtype  = Heavy 
damage    = 10*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
getpower = 25
pausetime = 4,2
sparkno = 1
guard.sparkno = 13000
guard.pausetime = 4,0
sparkxy = -8,-35
hitsound   = 5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-1
air.velocity = -2,-.5
Fall = 0
Envshake.time = 5
[State 200, Hard knockdown]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
trigger1 = AnimElem = 12
attr = S, NP
animtype  = Heavy 
damage    = 20*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
pausetime = 4,2
sparkno = 1
guard.sparkno = 13000
guard.pausetime = 10,2
sparkxy = -8,-35
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -5,-3
air.velocity = -5,4
Fall = 1
Envshake.time = 10
fall.recover = 0



[State 200, End]
type = Changestate
trigger1 = AnimTime = 0
value = 626

;-------------------------------------------------------------------------------
; Aege - C - Aire: Fin
[Statedef 626]
type    = A
movetype= I
physics = A
juggle  = 0
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = -1

[State 200, End]
type = Destroyself
trigger1 = time = 0

;===============================================================================
;  Aege - C: Starter
;-------------------------------------------------------------------------------
[Statedef 477]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 477
poweradd = -200
velset = -2,0
sprpriority = 1

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 400, PlayerPush]
type = PlayerPush
trigger1 = animelem = 2
value = 0

[State 0, Turn]
type = Turn
triggerall = p2dist x < 0
trigger1 = prevstateno = 320 && time = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 5
x = 50
y = 0

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10
Trans = Add

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,10
volumescale = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,11
volumescale = 100

[State 0, VelSet]
type = VelSet
trigger1 = time = 8
x = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 5400
ID = 5400
pos = -75,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -3,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 9999
scale = map(AbilityMultiplier),map(AbilityMultiplier)
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = ifelse(enemy,movetype = A, 20,10)*map(AbilityMultiplier)
guardflag = MAF
pausetime = ifelse(enemy,movetype = A,20,10),ifelse(enemy,movetype = A, 40,10)
guard.pausetime = 10,7
guard.hittime  = 10
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-35
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -2.5,-2
Envshake.time = 5

guard.cornerpush.veloff = -18
airguard.cornerpush.veloff = -17
;ground.cornerpush.veloff = -15
;air.cornerpush.veloff = -15

[State 200, 2C]
type = ChangeState
Triggerall = Power >= 333
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger1 = command = "holddown"
value = 478

[State 200, End]
type = ChangeState
triggerall = prevstateno != 477
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "a"
value = 474

[State 200, End]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "b"
value = 475

[State 200, End]
type = ChangeState
Triggerall = Power >= 300
Triggerall = movecontact
triggerall = numhelper(3500) = 0
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
value = 476

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;  Aege - C - A: Finisher
;-------------------------------------------------------------------------------
[Statedef 474]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 474
poweradd = 0
velset = 3,0
sprpriority = 2

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0, VOICE - Grunt 3]
type = PlaySnd
trigger1 = Time = 5
value = S200,3
volumescale = 500

[State 0, Turn]
type = Turn
trigger1 = p2dist x < 0 && time = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S1,2
volumescale = 50

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 2
x = 5

[State 200, 1]
type = HitDef
getpower = 0
getpower = 0
triggerall = !movecontact
triggerall = root,map(juggle) < 100
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = 20*map(AbilityMultiplier)
guardflag = MAF
pausetime = 12,12
guard.pausetime = 12,12
guard.hittime = 1
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 20 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -5,-3
air.velocity = -5,-3
Fall = 1
Envshake.time = 20
Fall.recovertime = 10

[State 200, Dash cancel Forward]
type = ChangeState
Triggerall = command = "FF"
trigger1 = movecontact
value = 100
ctrl = 1

[State 200, Dash cancel Back]
type = ChangeState
Triggerall = command = "BB"
trigger1 = movecontact
value = 105



[State 200, 2C]
type = ChangeState
Triggerall = Power >= 333
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger1 = command = "holddown"
value = 478

[State 200, End]
type = ChangeState
Triggerall = Power >= 300
Triggerall = movecontact
triggerall = numhelper(3500) = 0
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 477

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Aege - C - B: Air Starter
;-------------------------------------------------------------------------------
[Statedef 475]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 475
poweradd = 0
velset = 3,0
sprpriority = 2

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5


[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Turn]
type = Turn
trigger1 = p2dist x < 0 && time = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S1,2
volumescale = 50

[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 3
x = 4
[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 2
x = 6

[State 200, 1]
type = HitDef
getpower = 0
getpower = 0
triggerall = !movecontact
triggerall = root,map(juggle) < 100
trigger1 = 1
attr = S, NA
animtype  = Up
damage    = 30*map(AbilityMultiplier)
guardflag = MAF
pausetime = 12,12
guard.pausetime = 12,10
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -1,-7
air.velocity = -1,-7
Fall = 1
Envshake.time = 20
Fall.recovertime = 15 + ifelse(enemy,movetype = A, 7,0)

guard.cornerpush.veloff = -15
airguard.cornerpush.veloff = -14
;ground.cornerpush.veloff = -18
;air.cornerpush.veloff = -18

[State 200, Jump cancel]
type = ChangeState
Triggerall = movehit
trigger1 = command = "holdup"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && movecontact && var(3) = 0 
value = 40



[State 200, 2C]
type = ChangeState
Triggerall = Power >= 333
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger1 = command = "holddown"
value = 478

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

; Aege - C - C: WallBouncer
;-------------------------------------------------------------------------------
 [Statedef 476]
type    = S
movetype= A
physics = S
juggle  = 4
ctrl = 0
anim = 476
poweradd = -100
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 20
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State 0, Wallbounce prevent]
type = VarAdd
trigger1 = movehit = 1 && movecountered = 0 
v = 43
value = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
triggerall = var(43) != 1
trigger1 = p2dist x < 0 && time = 0

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 3
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 3
x = 8 

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S1,2
volumescale = 50




[State 200, 1]
type = HitDef
getpower = 0
triggerall = var(43) != 1
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
triggerall = root,map(juggle) < 100
trigger1 = 1
attr = S, NP
animtype  = Heavy 
damage    = ifelse(enemy,movetype = A,100,50)*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
pausetime = ifelse(enemy,movetype = A,30,4),ifelse(enemy,movetype = A,30,6)
guard.pausetime = 4,8
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-35
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 18,5
guard.hittime  = 21
guard.slidetime = 25
guard.velocity = 20
air.velocity = 18,5
airguard.velocity = -18,-5
Fall = 1
Envshake.time = 30
p2stateno = 1025   ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1
guard.cornerpush.veloff = -32
airguard.cornerpush.veloff = -32
;ground.cornerpush.veloff = -25
;air.cornerpush.veloff = -25

[State 200, 1]
type = HitDef
getpower = 0
trigger3 = var(43) = 1
triggerall = !movecontact
trigger1 = enemy,map(hitOverride) = 1
attr = S, NP
animtype  = Heavy 
damage    = 50*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
pausetime = 4,2
guard.pausetime = 4,8
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-35
hitsound   = 5,4
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 18,5
guard.hittime  = 21
guard.slidetime = 25
guard.velocity = -20
air.velocity = -18,-5
Fall = 1
Envshake.time = 30
guard.cornerpush.veloff = -32
airguard.cornerpush.veloff = -32

[State 200, 2C]
type = ChangeState
Triggerall = Power >= 333
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger1 = command = "holddown"
value = 478


[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
; Aege - Down + C
;-------------------------------------------------------------------------------
[Statedef 478]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 478
poweradd = -333
velset = -2,0
sprpriority = 1

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Turn]
type = Turn
trigger1 = p2dist x < 0 && time <=7
[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5
[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10
Trans = Add

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 3 
statetype = A
movetype = A
physics = A

[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelem = 3
value = 0
ignorehitpause = 1
[State 0, PlayerPush]
type = PlayerPush
trigger1 = animelem = 4
value = 1
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = time = 7
x = 90
y = -70
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = time = 9
physics = A
[State 0, VelSet]
type = VelSet
trigger1 = time = 9
x = 2
y = -6

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,10
volumescale = 100
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,11
volumescale = 100

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 479
ID = 479
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 1.5,-1.5
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 9999
scale = map(AbilityMultiplier),map(AbilityMultiplier)
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 200, 1]
type = HitDef
getpower = 0
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = ifelse(enemy,movetype = A,50,25)*map(AbilityMultiplier)
guardflag = MAF
pausetime = ifelse(enemy,movetype = A,26,13),ifelse(enemy,movetype = A,30,15)
guard.pausetime = 10,7
guard.hittime  = 10
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-35
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,10
ground.type = High
ground.slidetime = 23
ground.hittime  = 40
air.hittime  = ifelse(enemy,movetype = A,80,40)
ground.velocity = -4,-6.5
air.velocity = -3.5,-5.5
Envshake.time = 12
envshake.ampl = 15
p2facing = 1
guard.cornerpush.veloff = -18
airguard.cornerpush.veloff = -17
;ground.cornerpush.veloff = -15
;air.cornerpush.veloff = -15

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup" && movehit && var(3) = 0 
value = 45
ctrl = 1

[State 200, 2c2c]
type = ChangeState
triggerall = time >= 13
trigger1= power >= 200
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 480
[State 200, j5C]
type = ChangeState
triggerall = time >= 13
triggerall = numhelper(625) = 0
trigger1 = command = "c"
value = 620
;-------------------------------------------------------------------------------
;2CC
[Statedef 480]
type    = S
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 480
poweradd = -200
sprpriority = -1

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 15

[State 0, Turn]
type = Turn
trigger1 = p2bodydist x <= -0.5 && time = 11
ignorehitpause = 1
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 2
y = 25
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
y = 15

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 482
ID = 482
pos = -5,-65
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,-1.5
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 9999
scale = map(AbilityMultiplier),map(AbilityMultiplier)
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0

[State 200, Hard knockdown]
type = HitDef
getpower = 0
trigger1 = !movecontact
attr = A, NA
animtype  = Heavy 
damage    = ifelse(enemy,movetype = A,60,30)*map(AbilityMultiplier)
Hitflag = MAF
guardflag = HAF
pausetime = ifelse(enemy,movetype = A,24,12),ifelse(enemy,movetype = A,24,6)
guard.pausetime = 4,2
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-35
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,11
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = 0
air.velocity = -1,8
fall = 1
Envshake.time = 25
envshake.ampl = 15
fall.recover = 0
p2facing = 1

[State 200, Fall]
type = ChangeState
triggerall = time >= 10
trigger1 = pos y >= -20
value = 481
ctrl = 0
;-------------------------------------------------------------------------------
;2CC LAND
[Statedef 481]
type    = S
movetype= I
physics = S
ctrl = 0
anim = 481
sprpriority = 0
velset = 2,0
[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0
ignorehitpause = 1
[State 200, IDLE]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;Fly
;===============================================================================
; Fly C - 1:
;-------------------------------------------------------------------------------
[Statedef 483]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 483
poweradd = -300
sprpriority = 1




[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 5.5
[State 0, Velset]
type = Velset
trigger1 = AnimElem = 4
x = 3

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10
trans = add

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 0,71,158,3

[State 0, C - Start]
type = Helper
trigger1 = animelem = 5
helpertype = normal
name = "C - Start"
ID = 485
stateno = 485
pos = 0,-15
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 0, C - Start]
type = Helper
trigger1 = animelem = 7
trigger1 = var(15) = 1
helpertype = normal
name = "C - Start"
ID = 485
stateno = 485
pos = 0,-15
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[State 0, LifeAdd]	; Fly hurts himself each time he uses shurikens in lore.
type = LifeAdd
triggerall = var(16) = 0
trigger1 = AnimElem = 4
value = -10
kill = 0

[State 0, LifeAdd]	; Fly hurts himself each time he uses shurikens in lore. But we did some tomfoolery post quizzing Redye. Thanks man
type = LifeAdd
triggerall = var(16) = 1
trigger1 = AnimElem = 4
value = -5
kill = 0
;-------------------------------------------------------------------------------
; Fly C - Start
[Statedef 485]
type    = S
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 485
sprpriority = 3

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 486
ID = 486
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 40
pausemovetime = 0
scale = 0.95,0.95
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
ignorehitpause = 0

[state 450]
type = velset
trigger1 = time = 0
x = 15
[state 450]
type = velset
trigger1 = time = [7,10]
x = 15
y = -5
[state 450]
type = velset
trigger1 = time = [10,13]
x = 15
y = -10

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 20
trans = add


[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !moveguarded
triggerall = hitcount < 4
trigger1 = 1
attr = S, NP
animtype  = Heavy 
damage    = 17*map(AbilityMultiplier), 5*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAF
guardflag = MAF
pausetime = 4,4
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S5,0
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 10 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-5
ground.hittime  = 20
air.hittime  = 25 + ifelse(enemy,movetype = A, 7,0)
air.velocity = -2,-5
Fall = 1
Envshake.time = 5
Getpower = 0,0

[State 200, End]
type = Changestate
trigger1 = frontedgebodydist < -100
trigger2 = time = 200
value = 65045
;-----------------------------------------------------------------------------
; Fly C - Air
[Statedef 484]
type    = A
movetype= A
physics = A		;Physics is now Air
juggle  = 2
ctrl = 0
anim = 484
poweradd = 0
sprpriority = 1

[State 620, Powercost]
type = poweradd
trigger1 = AnimElem = 3
value = -300
persistent = 0

[State 0, Shock]
type = PlaySnd
trigger1 = time = 0
value = S400,3
volumescale = 100
[State 0, Swing]
type = PlaySnd
trigger1 = animelem = 2
value = S400,0
volumescale = 999
[State 0, Swing2]
type = PlaySnd
trigger1 = animelem = 2
value = S400,1
volumescale = 100
[State 0, Shuriken]
type = PlaySnd
trigger1 = animelem = 3
value = S400,2
volumescale = 200


[State 0, Stop any y axis motion.]		;Y axis changes. X is untouched.
type = Velset
trigger1 = AnimElem = 1
y = 0
[State 0, Stop velocity for hop]		
type = VelSet
trigger1 = Animelem = 3
y = 0
[State 0, Hop]
type = VelAdd
trigger1 = Animelem = 3
y = -4


[State 0, Snap upwards 5 pixels for Hop]
type = PosAdd
trigger1 = Animelem = 3
y = -5


[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 2
time = 10
trans = add

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 0,71,158,3


[State 0, C - Start]
type = Helper
trigger1 = animelem = 3
helpertype = normal
name = "C - Air: Start"
ID = 487
stateno = 487
pos = 5,-15
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 0, C - Start]
type = Helper
trigger1 = animelem = 5
trigger1 = var(15) = 1
helpertype = normal
name = "C - Air: Start"
ID = 630
stateno = 630
pos = 5,-15
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 0, LifeAdd]	; Fly hurts himself each time he uses shurikens in lore.
type = LifeAdd
triggerall = var(16) = 0
trigger1 = AnimElem = 4
value = -10
kill = 0

[State 0, LifeAdd]	; Fly hurts himself each time he uses shurikens in lore. But we did some tomfoolery post quizzing Redye. Thanks man
type = LifeAdd
triggerall = var(16) = 1
trigger1 = AnimElem = 4
value = -5
kill = 0
;-------------------------------------------------------------------------------
; Fly C - Start
[Statedef 487]
type    = A
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 487
sprpriority = 3

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 488
ID = 488
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 40
pausemovetime = 0
scale = 0.4,0.4
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
ignorehitpause = 0

[state 630]
type = velset
trigger1 = pos y = 0 && time >= 0
trigger2 = pos y = 0 && time >= 5
trigger3 = pos y = 0 && time >= 8
y = 0
[state 630]
type = velset
trigger1 = time = 0
x = 15
y = 10
[state 630]
type = velset
trigger1 = time = 5
x = 15
y = 5
[state 630]
type = velset
trigger1 = time >= 8 || Pos Y >= -30 ;; Goes straight ahead after hitting the ground or after 8 frames
x = 15
y = 0

[state 630,PosSet] ; Prevents the projectile from going under the ground
type = PosSet
trigger1 = Pos Y >= -30
y = -30

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 20
trans = add

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = parent, var(15) = 1
Triggerall = !moveguarded
triggerall = hitcount < 8
trigger1 = 1
attr = A, NP
animtype  = Heavy 
damage    = 17*map(AbilityMultiplier), 5*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S5,0
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-1.35
air.hittime  = 25 + ifelse(enemy,movetype = A, 7,0)
air.velocity = -2,-4
Fall = 1
Envshake.time = 5
Getpower = 0,0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = parent, var(15) = 0
Triggerall = !moveguarded
triggerall = hitcount < 4
trigger1 = 1
attr = A, NP
animtype  = Heavy 
damage    = 17*map(AbilityMultiplier), 5*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S5,0
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-1.35
air.hittime  = 25 + ifelse(enemy,movetype = A, 7,0)
air.velocity = -2,-4
Fall = 1
Envshake.time = 5
Getpower = 0,0

[State 200, End]
type = Changestate
trigger1 = frontedgebodydist < -100
trigger2 = time = 200
value = 65045
;-------------------------------------------------------------------------------
; Fly C -  Fin
[Statedef 65045]
type    = A
movetype= I
physics = S
juggle  = 2
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = -1

[State 200, End]
type = Destroyself
trigger1 = time = 0

;===============================================================================
; Fly - C - DOWN DODGE
;-------------------------------------------------------------------------------
[Statedef 651]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 651
poweradd = -500
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S165,0
volumescale = 120

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10
trans = add

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 0,71,158,3

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, ReversalDef]
type = ReversalDef
trigger1 = animelem = 2||animelem = 3
reversal.attr = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
pausetime = 0,0
;sparkxy = 0,0 ;offset
p1stateno = 655


[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; BLOCK BREAK BACKWARD - Flip 1
;-------------------------------------------------------------------------------
[Statedef 652]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 652
sprpriority = 1

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, EnvShake]	;Camera shake
type = EnvShake
trigger1 = time = 0
time = 5
freq = 60
ampl = 3
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S165,1
volumescale = 200

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10
trans = add
[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 0,71,158,3

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 60
pos = 0,1000000000000
movetime = 60
darken = 1
unhittable = 1
endcmdbuftime = 7


[State 0, StateTypeSet]	;Flip 1 Code
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
movetype = I
physics = A
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 3
x = -8
y = -5
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = -3.5
y = -4
[State 410, Gravity]
type = VelAdd
trigger1 = AnimElem = 5
y = .5

[State 200, End]	
type = ChangeState
trigger1 = time = 28
value = 653
ctrl = 0
;-------------------------------------------------------------------------------
; BLOCK BREAK BACKWARD - Flip 2
;-------------------------------------------------------------------------------
[Statedef 653]
type    = S
movetype= I
physics = N
ctrl = 0
anim = 653
sprpriority = 1

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, PosSet]		;Puts them on the ground
type = PosSet
trigger1 = Animelem = 1
y = 0
[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 1
x = -5
[State 0, VelSet]		;Stops all velocity.
type = VelSet
trigger1 = Animelem = 1
x = 0
y = 0

[State 0, PosAdd]		;Lifts them off the ground.
type = PosAdd
trigger1 = AnimElem = 3
x = -8
y = -5
[State 0, StateTypeSet]	;Flip 2 Code
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
movetype = I
physics = A
[State 0, VelSet]		;Adds Velocity.
type = VelSet
trigger1 = AnimElem = 3
x = -2
y = -3.25

[State 200, Throw out of dodge]
type = ChangeState
triggerall = time > 5
trigger1 = command = "y"
trigger2 = command = "c"
value = 320

[State 200, End]	
type = ChangeState
trigger1 = animtime = 0
value = 51
ctrl = 0



;-------------------------------------------------------------------------------
; BLOCK BREAK FORWARD - TURN CODE
;-------------------------------------------------------------------------------
[Statedef 655]
type    = A
movetype= I
physics = N
ctrl = 0
sprpriority = 1

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 1
value = 652
ctrl = 0

;-------------------------------------------------------------------------------
; BLOCK BREAK - END TURN CODE
;-------------------------------------------------------------------------------
[Statedef 656]
type    = A
movetype= I
physics = N
ctrl = 0
sprpriority = 1

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = facing = enemy,facing
trigger1 = time = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 1
value = 51
ctrl = 0

;===============================================================================
; Fly - C - DOWN DODGE AIR
;-------------------------------------------------------------------------------
[Statedef 654]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 651
poweradd = -500
velset = 0,-3.5
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S165,0
volumescale = 999

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10
trans = add

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 0,71,158,3

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, ReversalDef]
type = ReversalDef
trigger1 = animelem = 2||animelem = 3
reversal.attr = SCA,NA,SA,HA,NP,SP,HP
pausetime = 0,0
;sparkxy = 0,0 ;offset
p1stateno = 658

[State 200, Fall]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; AIR BLOCK BREAK BACKWARD - Flip
;-------------------------------------------------------------------------------
[Statedef 657]
type    = A
movetype= I
physics = N
ctrl = 0
anim = 654
sprpriority = 1

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, EnvShake]	;Camera shake
type = EnvShake
trigger1 = time = 0
time = 5
freq = 60
ampl = 3
phase = 90

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S165,1
volumescale = 999

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10
trans = add
[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 0,71,158,3

[State 0, SuperPause]
type = SuperPause
trigger1 = time = 0
time = 53
pos = 0,1000000000000
movetime = 53
darken = 1
unhittable = 1
endcmdbuftime = 7


[State 0, StateTypeSet]	;Flip 1 Code
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A
movetype = I
physics = A
[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = -8
y = -5
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -1.5
y = -8

[State 5200, Turn]
type = Turn
trigger1 = facing = enemy,facing
trigger1 = time = 45

[State 200, j.5b out of dodge]
type = ChangeState
triggerall = time > 25
trigger1 = command = "b"
trigger2 = command = "c"
value = 659

[State 200, End]	
type = ChangeState
trigger1 = time = 46
value = 51
ctrl = 0
;-------------------------------------------------------------------------------
; AIR BLOCK BREAK FORWARD - TURN CODE
;-------------------------------------------------------------------------------
[Statedef 658]
type    = A
movetype= I
physics = N
ctrl = 0
sprpriority = 1

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
trigger1 = time = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = time = 1
value = 657
ctrl = 0

;-------------------------------------------------------------------------------
; Fly - j.2c air
[Statedef 659]
type    = A
movetype= A
physics = A
juggle  = ifelse (prevstateno = 495,5,2)
ctrl = 0
anim = 659
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 25
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 50

[State 0, VelSet] ; Occurs if used out of j.2c
type = VelSet
trigger1 = AnimElem = 1
x = 6
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,2
volumescale = 100

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 100

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype = A
attr = A, NA
animtype  = Up
damage    = 30*map(AbilityMultiplier)
hitflag = MAF
guardflag = HAF
pausetime = 40,40
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 8,0
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,5.5
air.velocity = -2,5.5
Fall = 1
fall.recover = 0
down.bounce = 1
Envshake.time = 32
envshake.ampl = -6
guard.cornerpush.veloff = -10
airguard.cornerpush.veloff = -10
;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype != A
attr = A, NA
animtype  = Up
damage    = 30*map(AbilityMultiplier)
hitflag = MAF
guardflag = HAF
pausetime = 20,20
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = s0,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,5.5
air.velocity = -2,5.5
Fall = 1
fall.recover = 0
Envshake.time = 25
guard.cornerpush.veloff = -10
airguard.cornerpush.veloff = -10
;;ground.cornerpush.veloff = 0
air.cornerpush.veloff = 0


[State 200, j.4A]
type = ChangeState
Triggerall = movecontact
triggerall = command = "a"
trigger1 = command = "holdback"
trigger2 = command = "back"
value = 612

[State 200, End]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
triggerall = power >= 300
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 620

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;--------------------------------------------------------------
;--------------------------------
;Max 
;--------------------------------
;===============================================================================
; Max C: Cannon Spawn
;-------------------------------------------------------------------------------
[Statedef 493]
type    = S
movetype= A
physics = S
ctrl = 0
juggle = 2
anim = 493
poweradd = -200
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4,0

[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 2
x = -8
[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 2
x = -4

[State 0, Helper Summon]
Type = Helper
trigger1 = AnimElem = 2
name = "C CANNON"
ID = 491
stateno = 491
pos = 30,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;C: Cannon Life
;------------------------------------------------------------------
[Statedef 491]
movetype= A
physics = S
anim = 491
velset = 2.8,0
sprpriority = 1
[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 1
y = 0
[State 0, VelAdd]		;Kickback from firing.
type = VelAdd
trigger1 = Animelem = 6
x = -4

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, Appear]
type = PlaySnd
trigger1 = time = 0
value = S4,0
volumescale = 60
[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 5
value = S4,7
volumescale = 80

[State 0, Helper Summon]
Type = Helper
trigger1 = AnimElem = 6
name = "C CANNONBALL"
ID = 492
stateno = 492
pos = 15,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 2

[State 0, Helper Die]
type = DestroySelf
trigger1 = animtime = 0

;C: Cannonball
;------------------------------------------------------------------------------
[Statedef 492]
movetype= A
physics = N
anim = 492
sprpriority = 2
velset = 10, 0
juggle = 2

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 0, Damage Proration]
type = RootVarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NP
givepower = 0
getpower = 0
animtype  = Heavy
damage    = 90*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 10,25
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S4,8
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -4,-4.5
air.velocity = -4,-4
Fall = 1
Envshake.time = 35
fall.recover = 0

[State 0, Helper Die]
type = DestroySelf
trigger1 = animtime = 0

;-------------------------------------------------------------------------------
;C - Air
;Max CANNON SPAWN
[Statedef 494]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 489
poweradd = -200
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,0
volumescale = 50

[State 0, VelSet]		;Stops all momentum
type = VelSet
trigger1 = AnimElem = 2
x = 0
y = 0

[State 0, VelSet]		;Shorthop
type = VelSet
trigger1 = AnimElem = 2
x = .8
y = -4

[State 0, Helper Summon]
Type = Helper
trigger1 = AnimElem = 2
name = "C CANNON AIR"
ID = 491
stateno = 62200
pos = 15,-30
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 2


[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;C: Cannon Air
;------------------------------------------------------------------------------
[Statedef 62200]
movetype= A
physics = N
anim = 622
sprpriority = 1
juggle = 2

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 20

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = root,movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, VelAdd]
type = VelAdd
trigger1 = Animelem = 1
x = 2.5
y = -4

[State 622, VelAdd] ; Mimics normal falling rate
type = VelAdd
trigger1 = time > 1
y = .44

[State 0, Appear]
type = PlaySnd
trigger1 = time = 0
value = S4,0
volumescale = 60

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = pos y < 0
value = 1

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 200, 1]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = A, NP
givepower = 0
getpower = 0
damage    = 13*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 10,16
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,15
air.velocity = -2,15
Fall = 1
Envshake.time = 20
fall.recover = 0
down.bounce = 1

[State 262200, End]	;If uninterupted, it then goes to the idle state
type = ChangeState
trigger1 = vel y > 0 && pos y >= -15	; Dies in contact with the floor
value = 62400

; C: Cannon Life Ground
;------------------------------------------------------------------------------
[Statedef 62400]
movetype= I
physics = S
anim = 624
velset = 3,0
sprpriority = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S5,1
volumescale = 70

[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 1
y = 0

[State 0, VelAdd]
type = VelAdd
trigger1 = Animelem = 6
x = -4
[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 1
time = 10
freq = 100
ampl = 3
[State 200, 1]
type = HitDef
triggerall = !movecontact
trigger1 = 1
attr = S, NA
givepower = 0
getpower = 0
damage    = 7*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 5,5
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,15
air.velocity = -2,15
Fall = 1
Envshake.time = 20
fall.recover = 0
down.bounce = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Animelem = 3
value = S4,7
volumescale = 80
[State 0, Helper Summon]
Type = Helper
trigger1 = AnimElem = 6
name = "CannonBall"
ID = 492
stateno = 492
pos = 30,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 0, Helper Die]
type = DestroySelf
trigger1 = animtime = 0

;===============================================================================
; Max DOWN + C: Max tossing Grenade
;-------------------------------------------------------------------------------
[Statedef 495]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 495
poweradd = -200
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4,0

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 2
x = 3

[State 0, Swing]
type = PlaySnd
trigger1 = time = 0
value = S1,4
volumescale = 100

[State 0, Helper Summon]
Type = Helper
trigger1 = AnimElem = 2
name = "Down+C GRENADE"
ID = 496
stateno = 496
pos = 25,0
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Down + C: Grenade
;------------------------------------------------------------------------------
[Statedef 496]
movetype= A
physics = S
anim = 496
sprpriority = 2

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,HA,NP,SP,HP
p1stateno = 660

[State 634, StateTypeSet]
type = StateTypeSet
trigger1 =  pos y >= -10  && prevstateno = 662
statetype = S       ;S,A,C,L
movetype = I        ;I,A,H
physics = S         ;A,C,S,N
[State 634, PosSet]
type = PosSet
trigger1 =  pos y >= 0  && prevstateno = 662
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1 && prevstateno != 662
x = 15

[State 1005, HitDef Code] 
type = HitDef
trigger1 = !movecontact
attr = S, NP
damage = 5*map(AbilityMultiplier)
hitflag = MAFD 
guardflag = MA
pausetime = 1,5
guard.pausetime= 0,3
sparkxy = 10,-15
sparkno = s6051
hitsound   = 5,1
guardsound = 2,0
ground.slidetime = 2
ground.hittime  = 5
ground.velocity = -3
air.velocity = -2.5,-1 


[State 0, VelSet]		;Halts all momentum
type = VelSet
trigger1 = movecontact && prevstateno != 662
x = 0

[State 0, VelSet]		;Slight slideback
type = VelAdd
trigger1 = movecontact = 1 && prevstateno != 662
x = -1.5

[State 0, VelAdd]
type = VelAdd
trigger1 = 1 && prevstateno = 662
y = .4

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0 && prevstateno = 662
y = 0

[State 635, PosSet]
type = PosSet
trigger1 =  pos y >= 0 && prevstateno = 662
y = 0

[State 0, ScreenBound]	;Don't leave screen pls
type = ScreenBound
trigger1 = Time = [1,100]
value = 1
movecamera = 0,0

[State 200, End]	;If hit the opponent, it goes into the idle state early.
type = ChangeState
trigger1 = movecontact && prevstateno != 662
value = 497
[State 200, End]	;If uninterupted, it then goes to the idle state
type = ChangeState
trigger1 = AnimTime = 0 && prevstateno != 662
value = 497

[State 632, End]
type = ChangeState
trigger1 = pos y >= 0 && prevstateno = 662
value = 497
;Down + C: Grenade Idle
;------------------------------------------------------------------------------
[Statedef 497]
movetype= I
physics = S
anim = 497
sprpriority = 2




[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,HA,NP,SP,HP
p1stateno = 660

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 27||animelem = 30
value = S4,9
volumescale = 80
[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 498

;Max Down + C: Grenade Explode (Time based)
;------------------------------------------------------------------------------
[Statedef 498]
type    = A
movetype= H
physics = N
anim = 498
sprpriority = 2

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded


[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit


[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 635, StateTypeSet]
type = StateTypeSet
trigger1 =  pos y >= 0
statetype = S       ;S,A,C,L
movetype = A        ;I,A,H
physics = S         ;A,C,S,N


[State 635, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,5
volumescale = 80
[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 1
time = 20
freq = 100
ampl = 2
[State 458, HitDef Code] 
type = HitDef
trigger1 = AnimElem = 1		
attr = S, NP
damage = ifelse(enemy,movetype = A,130,65)*map(AbilityMultiplier)
guardflag = MAFD
hitflag = MAFD 
pausetime = ifelse(enemy,movetype = A,20,10),ifelse(enemy,movetype = A,30,15)
guard.pausetime= 0,15
sparkxy = 10,-15
sparkno = s6051
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,11
ground.slidetime = 2
ground.hittime  = 40
ground.velocity = -2, -7
air.hittime  = 40
air.velocity = -2, -6 
fall = 1
fall.recover = ifelse(enemy,movetype = A,0,1)
fall.recovertime = 50
Envshake.time = 15

[State 0, Helper Die]
type = DestroySelf
trigger1 = animtime = 0

;Max Down + C: Grenade Explode (Triggered)
;------------------------------------------------------------------------------
[Statedef 660]
type    = A
movetype= A
physics = N
anim = 498
sprpriority = 2

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded


[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit


[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 635, StateTypeSet]
type = StateTypeSet
trigger1 =  pos y >= 0
statetype = S       ;S,A,C,L
movetype = A        ;I,A,H
physics = S         ;A,C,S,N

[State 635, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S4,5
volumescale = 140
[State 0, EnvShake]
type = EnvShake
trigger1 = animelem = 1
time = 20
freq = 100
ampl = 2
[State 458, HitDef Code] 
type = HitDef
trigger1 = AnimElem = 1		
attr = S, NP
damage = 65*map(AbilityMultiplier)
guardflag = MAFD
hitflag = MAFD 
pausetime = 10,15
guard.pausetime= 0,15
sparkxy = 10,-15
affectteam = B
sparkno = s6051
hitsound   = 5,4
guardsound = 6,11
ground.slidetime = 2
ground.hittime  = 40
ground.velocity = -2, -7
air.hittime  = 40
air.velocity = -2, -6 
fall = 1
fall.recover = 1
fall.recovertime = 40
Envshake.time = 15

[State 0, Helper Die]
type = DestroySelf
trigger1 = animtime = 0

; Max - Down + C - Aire
;-------------------------------------------------------------------------------
[Statedef 661]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 661
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S4,0

[State 0, Swing]
type = PlaySnd
trigger1 = time = 0
value = S1,4
volumescale = 100

[State 0, poweradd]
type = powerAdd
trigger1 = AnimElem = 4
value = -200

[State 0, Helper Summon]
Type = Helper
trigger1 = AnimElem = 4
name = "Down+C GRENADE AIR HELPER"
ID = 662
stateno = 662
pos = 25,-15
postype = p1
facing = 1
keyctrl = 0
ownpal = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;Max - Air Down + C: Grenade
;------------------------------------------------------------------------------
[Statedef 662]
type = A
movetype= A
physics = N
anim = 497
sprpriority = 2

[State 635, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,HA,NP,SP,HP
p1stateno = 660

[State 632, VelSet]
type = VelSet
trigger1 = 1
x = 8
y = 5.5
[State 0, ScreenBound]	;Don't leave screen pls
type = ScreenBound
trigger1 = Time = [1,100]
value = 1
movecamera = 0,0

[State 632, HitDef Code] 
type = HitDef
trigger1 = !movecontact
attr = A, NP
damage = 5*map(AbilityMultiplier)
guardflag = MA
hitflag = MAFD 
pausetime = 1,5
guard.pausetime= 0,3
sparkxy = 10,-15
sparkno = s6051
hitsound   = 5,1
guardsound = 6,10
ground.slidetime = 2
ground.hittime  = 5
ground.velocity = -3
air.velocity = -2.5,2 
forcestand = 1

[State 632, VelSet]
type = VelSet
trigger1 = movecontact
x = 2.5
y = -4

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .4

[State 632, End]
type = ChangeState
trigger1 = movecontact
value = 496

[State 632, End]
type = ChangeState
trigger1 = vel y > 0 && pos y >= -10
value = 496

;------------------------------------------------------------------------------
;Noll 
;This was confusing 
;-------------------------------------------------------------------------------
;Noll C
[Statedef 499]
type    = S
movetype= A
physics = S
juggle  = 1
anim = 499
velset = 0,0
sprpriority = 1
ctrl = 0

[State 0, PowerAdd]
type = PowerAdd
triggerall = prevstateno != 23000
trigger1 = AnimElem = 4
value = -200

[State 0, Spiral]
type = PlaySnd
trigger1 = animelem = 2
value = S450,0
volumescale = 200
[State 0, Helper]
type = Helper
trigger1 = Animelem = 4
helpertype = normal
name = "HELPER"
ID = 502
stateno = 502
pos = 0,-25
postype = p1
facing = -1
sprpriority = 5
inheritJuggle = 1



[State 200, End]
type = ChangeState
Triggerall = helper(502), hitcount >= 1
trigger1 = command = "up" 
trigger2 = time > 45
value = 40

[State 200, End]
type = ChangeState
trigger1 = helper(502), anim = 503
trigger2 = animelem >= 4
trigger2 = numhelper (502) <= 0
value = 504
ctrl = 0

;-----------------------------------------------------------------
;Noll C Helper Spiral
[Statedef 502]
type    = S
movetype= A
physics = N
juggle  = 0
anim = 502
sprpriority = 3

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
[State 0, AURA EFFECT]
type = Explod
trigger1 = Animelem = 1
anim = 520
pos = 0,-8
postype = p1  ;p2,front,back,left,right
scale = 0.35,0.35
sprpriority = 2

[State 0, Remove AURA]
type = RemoveExplod
trigger1 = time = 100

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit


[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = !moveguarded
triggerall = hitcount < 8
trigger1 = movecontact
time = 1
id = -1
pos = 0,0

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
y = 1.95
[State 0, VelAdd]
type = VelAdd
trigger1 = vel y != -.5
y = -0.5



[State 0, Guard Count Reset]
type = MapSet
trigger1 = time = 0
map = "guardCount"
value = 0


[State 0, Guard Count Add]
type = MapAdd
trigger1 = moveguarded = 1
map = "guardCount"
value = 1
;ignorehitpause = 
;persistent =

[State 310, 1]
type = HitDef
getpower = 0
trigger1 = anim = 502 && (map(guardCount) + hitcount) <= 5
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 5*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 5,6
guard.pausetime = 5,6
sparkno = s1002
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S4,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = 5, -4
air.hittime = 35 + ifelse(enemy,movetype = A, 7,0)
air.velocity = -0,-3
fall = 1
fall.recovertime = 30 + ifelse(enemy,movetype = A, 7,0)
Envshake.time = 10
p1sprpriority = 3
givepower = 10,10

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
y = -1.5

[State 200, End]		;Die Hit
type = Changestate
trigger1 = hitcount >= 5
trigger2 = (map(guardCount) + hitcount) >= 5
value = 503
ctrl = 0
[State 200, End]		;Die Wiff
type = Changestate
trigger1 = hitcount >= 5
trigger2 = (map(guardCount) + hitcount) >= 5
trigger3 = pos y <= -45
value = 503
ctrl = 0

;---------------------------------------------------------------
;Noll C Helper Spiral End
[Statedef 503]
type    = S
movetype= A
physics = N
juggle  = 0
anim = 503
sprpriority = 3

[State 0, Swing]
type = PlaySnd
trigger1 = time = 0
value = S300,6
volumescale = 200

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, Explod]	;PARTICLE EFFECTS
type = Explod
trigger1 = Animelem = 1
anim = 521
pos = 0,0
postype = p1
vel = 0,0
scale = 0.8,0.8
sprpriority = 3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 40

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 1
y = 0

[State 0, Explod]	;PARTICLE EFFECTS
type = Explod
trigger1 = Animelem = 1
anim = 521
pos = 0,0
postype = p1
vel = 0,0
scale = 0.8,0.8
sprpriority = 3

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 40

[State 200, 1]
type = HitDef
getpower = 0
triggerall = p2movetype = H
triggerall = AnimElem = 1
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 20*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 10,10
guard.pausetime = 10,4
guard.hittime = 5
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 5, -4
air.hittime = 35
air.velocity = -0,-6.5
fall = 1
fall.recovertime = 30
Envshake.time = 15

[State 0, Helper Die]
type = DestroySelf
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
;Noll C - END
[Statedef 504]
type    = S
movetype= A
physics = S
juggle  = 1
anim = 504
velset = 0,0
ctrl = 0

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1



;-------------------------------------------------------------------------------
;Noll Switch Location
[Statedef 509]
type    = A
movetype = I
physics = S
juggle  = 0
anim = 509
poweradd = -200
velset = 0,0
sprpriority = 1
ctrl = 0

[State 0, Pause]
type = Pause
trigger1 = AnimElem = 3
time = 7
movetime = 7

[State 0, Turn]
type = Turn
trigger1 = p2dist x < 0

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 3
x = 3
y = -3

[State 470, MapSet] ; Saves Noll's X position
type = MapSet
trigger1 = time = 0
map = "switchX"
value = pos x

[State 470, MapSet] ; Saves Noll's Y position
type = MapSet
trigger1 = time = 0
map = "switchY"
value = pos y

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S7,1
volumescale = 999
channel = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S7,1
volumescale = 999
channel = 1

[State 0, Turn]
type = Turn
trigger1 = p2dist x < 0

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 3
x = 3
y = -3

[State 0, PosSet]
type = PosSet
trigger1 = AnimElem = 3
x = helper(506),pos x
y = helper(506),pos y + 35

[State 470, Stance var reset] ; On Switch, resets Noll's blade stance uses
type = VarSet
trigger1 = time = 1
v = 35
value = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 520
pos = 0,-8
postype = p1  ;p2,front,back,left,right
vel = .5, -.2
scale = 0.5,0.5
sprpriority = 2

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;----------------------------------------------------------------
;Noll Down + C-2 Activator
[Statedef 634]
type    = S
movetype= A
physics = S
juggle  = 0
anim = 634
poweradd = 0
velset = 0,0
sprpriority = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0
trigger2 = numhelper(506) = 0

;-------------------------------------------------------------------------------
; Noll C air
[Statedef 505]
type    = S
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 505
velset = 0,0
sprpriority = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = -1

[State 0, ChangeState]		;This changestate activates if you've already spawned the Helper. Noll will now perform a different Statedef.
type = ChangeState
trigger1 = numhelper(506) > 0 && time = 0 ;If there is 1 or more of said helper, Player 1 does this.
trigger2 = numhelper(507) > 0 && time = 0
value = 508
ctrl = 1

[State 0, PowerAdd]
type = PowerAdd
trigger1 = Animelem = 8
value = -300

[State 0, AURA EFFECT]
type = Explod
trigger1 = Animelem = 1
anim = 520
pos = 0,-8
postype = p1  ;p2,front,back,left,right
scale = 0.35,0.35
sprpriority = 2

[State 0, RemoveAURA]
type = RemoveExplod
trigger1 = time = 100

[State 0, Explod]
type = Explod
trigger1 = Animelem = 7
anim = 1000
pos = 0,0
postype = p1  ;p2,front,back,left,right
scale = 0.4,0.4
sprpriority = 2

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 100

[State 0, VelSet]
type = VelSet
triggerall = command != "holdfwd"
triggerall = command != "holdback"
trigger1 = AnimElem = 1
x = 0
y = -6.5

[State 0, VelSet]
type = VelSet
triggerall = command = "holdback"
trigger1 = AnimElem = 1
x = -3
y = -6.5

[State 0, VelSet]
type = VelSet
triggerall = command = "holdfwd"
trigger1 = AnimElem = 1
x = 3
y = -6.5

[State 0, Swing]
type = PlaySnd
trigger1 = Animelem = 5
value = S1,2
volumescale = 80
[State 0, Spawn]
type = PlaySnd
trigger1 = Animelem = 7
value = S300,5
volumescale = 150

[State 620, Direction Held Map - Forward]
type = MapSet
triggerall = command = "holdfwd"
triggerall = command != "holddown" && command != "holdup"
trigger1 = time <= 23
map = "pbladedirectionHeld"
value = 1

[State 620, Direction Held Map - Backward]
type = MapSet
triggerall = command = "holdback"
triggerall = command != "holddown" && command != "holdup"
trigger1 = time <= 23
map = "pbladedirectionHeld"
value = 2

[State 620, Direction Held Map - Downward]
type = MapSet
triggerall = command = "holddown"
triggerall = command != "holdup"
trigger1 = time <= 23
map = "pbladedirectionHeld"
value = 3

[State 620, Direction Held Map - Upward]
type = MapSet
triggerall = command = "holdup"
triggerall = command != "holddown"
trigger1 = time <= 23
map = "pbladedirectionHeld"
value = 4

[State 620, Direction Held Map - None]
type = MapSet
triggerall = command != "holdfwd"
triggerall = command != "holddown" && command != "holdup"
triggerall = command != "holdback"
trigger1 = time <= 23
map = "pbladedirectionHeld"
value = 0


[State 0, Helper]
type = Helper
triggerall = P2BodyDist x <= 200
trigger1 = Animelem = 8
helpertype = normal
name = "HELPER PHANTOM BLADE"
ID = 506
stateno = 506
pos = p2bodydist x + 30, p2bodydist y - 45
postype = p1
facing = 1
pausemovetime = 999
inheritJuggle = 1

[State 0, Helper]
type = Helper
triggerall = P2BodyDist x > 200
trigger1 = Animelem = 8
helpertype = normal
name = "HELPER PHANTOM BLADE"
ID = 506
stateno = 506
pos = 150, 0
postype = p1
facing = 1
pausemovetime = 999
inheritJuggle = 1

[State 200, End]
type = ChangeState
triggerall = command = "holddown"
triggerall = numhelper(3500) = 0
triggerall = helper(506),stateno != 509 && helper(506),prevstateno != 509 ; Disables use after switching
trigger1 = command = "c"
trigger1 = helper(506), movehit
trigger2 = p2dist X > 100 || p2dist Y > 100
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel ** ailevel) * 2
value = 509
ctrl = 1

[State 200, End]
type = ChangeState
triggerall = helper(506), movehit
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = enemy,var(11) < 40
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel ** ailevel) * 2 
value = 508

[State 200, End]
type = ChangeState
triggerall = !(helper(506), movehit) ; Landing recovery does not occur if you hit with j.5c
trigger1 = vel y > 0 && pos y >= -15
value = 405

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0

;--------------------------------------------------------
;Noll Down + C Helper Phantom Blade - SPAWN AND IDLE
[Statedef 506]
type    = S
movetype= A
physics = N
juggle  = 1
anim = 506
sprpriority = 3

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 35

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = time = (1,10) 
map = "helperGuarded"
value = moveguarded


[State 0, Helper Hit]
type = RootMapSet
trigger1 = time = (1,10)
map = "helperHit"
value = movehit


[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 2,1
dest = 2,parent,var(52)

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S305,0
volumescale = 100

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = S       ;S,A,C,L
movetype = I        ;I,A,H
physics = N         ;A,C,S,N

[State 0, Explod]	;PARTICLE EFFECTS
type = Explod
trigger1 = Animelem = 1
anim = 1000
pos = 0,-29
postype = p1
vel = 0,2
scale = 0.5,0.5
sprpriority = 3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S7,3
volumescale = 999
channel = 1

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 40

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
y = -3

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
y = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = p2statetype != A
triggerall = !movecontact
trigger1 = 1
attr = S, NP
animtype  = Light
damage    = 25*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 6,8
guard.pausetime = 1,1
guard.hittime = 1
sparkno = s1002
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S4,1
guardsound = 6,10
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -5,0
fall.recover = 0
down.bounce = 1
air.hittime = 25
air.velocity = -2,10
airguard.velocity = 1,10
fall.recovertime = 20
Envshake.time = 20
givepower = 50,50

[State 200, 1]
type = HitDef
getpower = 0
triggerall = p2statetype = A
triggerall = !movecontact
trigger1 = 1
attr = S, NP
animtype  = Light
damage    = 30*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 2,24
guard.pausetime = 0,0
guard.hittime = 0
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S4,3
guardsound = 6,10
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -5,0
air.hittime = 25
air.velocity = -2,10
airguard.velocity = 1,10
fall = 1
fall.recover = 0
down.bounce = 1
fall.yvelocity = -7
Envshake.time = 30
givepower = 50,50

[State 0, ChangeState]		;This changestate activates if Noll held forward or back during Jumping C.
type = ChangeState
triggerall = root,!InCustomState
triggerall = time > 150 && time < 160
trigger1 = root, map(pbladedirectionheld) = 1
trigger2 = root, map(pbladedirectionheld) = 2
value = 681
ctrl = 1

[State 0, ChangeState]		;This changestate activates if Noll held down during Jumping C.
type = ChangeState
triggerall = root,!InCustomState
triggerall = time > 150 && time < 160
trigger1 = root, map(pbladedirectionheld) = 3
value = 682
ctrl = 1


[State 0, ChangeState]		;This changestate activates if Noll held up during Jumping C.
type = ChangeState
triggerall = root,!InCustomState
triggerall = time > 150 && time < 160
trigger1 = root, map(pbladedirectionheld) = 4
value = 683
ctrl = 1

[State 0, ChangeState]		;This changestate activates if Noll performs statedef 405.
type = ChangeState
trigger1 = numhelper(634) > 0
value = 507
ctrl = 1

[State 0, ChangeState Switch] ; Used when Noll switches
type = ChangeState
trigger1 = root,prevstateno = 509 && root,movetype != H
value = 684

[State 0, Helper Die]
type = DestroySelf
trigger1 = time = 600
trigger2 = numhelper(506) > 1 && time > 2
ignorehitpause = 1

;------------------------------------------------------------------------------
;Noll Down + C-2 Helper Phantom Blade Spiral
[Statedef 507]
type    = S
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 507
sprpriority = 3

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded


[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit


[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S300,7
volumescale = 200

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "Spam Deny"
ID = 455
stateno = 455
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Turn]
type = Turn
trigger1 = p2dist x < 0

[State 0, VelSet]
type = VelSet
trigger2 = movecontact
trigger1 = animelem = 4
x = .6
y = 0

[State 0, If p2's y axis is closer to the floor, the helper moves down on the y axis.]
type = Veladd
trigger1 = p2dist y > -45
y = .05

[State 0, If p2 is higher in the air, the helper moves up on the y axis]
type = Veladd
trigger1 = p2dist y < -45
y = -.05

[State 0, If p2 is higher than -100 y axis, the helper moves faster upwards on the y axis]
type = Veladd
trigger1 = p2dist y < -100
y = -.05

[State 0, If p2 below helper it lowers faster]
type = Veladd
trigger1 = p2dist y > 0
y = .05

[State 0, If helper is -15 y axis they no longer have y velocity.]
type = VelSet
trigger1 = pos y >= -25
y = 0

[State 0, If helper is -15 y axis and p2 is above -45 on the y axis, helper goes up.]
type = VelSet
trigger1 = pos y >= -25&&p2dist y < -35
y = -.5

[State 0, INCREASE X VELOCITY IF ON FLOOR]
type = Veladd
trigger1 = pos y >= -25
x = .005

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT

[State 0, TargetBind]
type = TargetBind
triggerall = hitcount < 6
trigger1 = movehit
time = 1
id = -1
pos = 15,25

[State 0, Guard Count Reset]
type = MapSet
trigger1 = time = 0
map = "guardCount"
value = 0


[State 0, Guard Count Add]
type = MapAdd
trigger1 = moveguarded = 1
map = "guardCount"
value = 1

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 310, 1]
type = HitDef
getpower = 0
trigger1 = anim = 507 && (map(guardCount) + hitcount) <= 6
triggerall = AnimElem = 3 || AnimElem = 4 || AnimElem = 5 || AnimElem = 6 || AnimElem = 7 || AnimElem = 8
trigger1 = 1
attr = S, NP
animtype  = Light
damage    = 5*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 4,5
guard.pausetime = 2,0
guard.hittime = 5
sparkno = s1002
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 5, -4
air.hittime = 35
air.velocity = -1,-4
fall.recovertime = 27
Envshake.time = 10
givepower = 10,10

[State 200, Die on Hit]		;Die Hit
type = Changestate
trigger1 = hitcount >= 6
trigger2 = (map(guardCount) + hitcount) >= 6
value = 503
ctrl = 0
[State 1016, Die on Wiff]
type = ChangeState
trigger1 = time = 100
value = 503
ctrl = 0

[State 0, ChangeState Switch] ; Used when Noll switches
type = ChangeState
trigger1 = root,stateno = 509 && root,animelem = 3
value = 684


[State 0, Helper Die]
type = DestroySelf
trigger1 = time >= 100
trigger3 = numhelper(506) > 1 && time > 2
ignorehitpause = 1



;-------------------------------------------------------------------------------
;-------------------------------------------------------------------------------
;Noll j.5cc CAST
[Statedef 508]
type    = A
movetype= I
physics = A
juggle  = 0
anim = 508
poweradd = -200
sprpriority = 2
ctrl = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 3
x = 2

[State 0, Swing]
type = PlaySnd
trigger1 = Animelem = 2
value = S1,1
volumescale = 80

[State 0, Helper]
type = Helper
trigger1 = Animelem = 1
helpertype = normal 
name = "Counterhit Proration Scale"
ID = 634
stateno = 634

;--------------------------------------------------------
; Noll - Down + C Direction Stab - Horizontal
[Statedef 681]
type    = S
movetype= A
physics = N
juggle  = 2
anim = 681
sprpriority = 3

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 15

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = time = (27,76) 
map = "helperGuarded"
value = moveguarded


[State 0, Helper Hit]
type = RootMapSet
trigger1 = time = (27,76)
map = "helperHit"
value = movehit

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = anim = 506
trigger1 = AnimElem = 2
statetype = S       ;S,A,C,L
movetype = I        ;I,A,H
physics = N         ;A,C,S,N


[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0



[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 407, activation]
type = PlaySnd
trigger1 = time = 1
value = 300,8
volumescale = 150

[State 0, Turn] ; Causes the helper to turn around if Noll held backwards
type = turn
triggerall = root,map(pbladedirectionheld) = 2
trigger1 = time = 0
[State 0, PosAdd]
type = PosAdd
triggerall = anim = 681
trigger1 = time = 3
x = -11

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 3
x = -5
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 4
x = -2
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 5
x = -0.5
y = 0


[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 6
x = 0
y = 0


[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = time = [27,74]
x = 9
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = time = [75,76]
x = 6
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 9
x = 3
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 10
x = 1.5
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 11
x = 1
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 12
x = 0.25
y = 0

[State 0, VelSet]
type = VelSet
triggerall = anim = 681
trigger1 = AnimElem = 13
trigger2 = FrontEdgeBodyDist <= 20 ; Makes sure the Sword doesn't fly off screen
x = 0
y = 0

[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = anim = 681
trigger1 = AnimElem = 14
value = 506
elem = 3

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = anim = 506
trigger1 = AnimElem = 2
statetype = S       ;S,A,C,L
movetype = I        ;I,A,H
physics = N         ;A,C,S,N

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
trigger1 = 1
attr = A, NP
animtype  = Hard
damage    = 50*map(AbilityMultiplier),5*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 21,23
guard.pausetime = 10,10
guard.hittime = 7
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,14
guardsound = 6,10 + (random < 500 * 1)
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -25, -8
air.hittime = 35
air.velocity = -25,-4
fall = 1
fall.recovertime = 50
Envshake.time = 30
Envshake.ampl = -6
p2stateno = 1030
p2getp1state = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 1
trigger1 = 1
attr = A, NP
animtype  = Hard
damage    = 50*map(AbilityMultiplier),5*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 21,23
guard.pausetime = 10,10
guard.hittime = 7
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,14
guardsound = 6,10 + (random < 500 * 1)
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -25, -8
air.hittime = 35
air.velocity = -25,-4
fall = 1
fall.recovertime = 50
Envshake.time = 30
Envshake.ampl = -6

[State 0, ChangeState]		;This changestate activates if Noll performs statedef 405.
type = ChangeState
trigger1 = numhelper(634) > 0
value = 507
ctrl = 1 

[State 0, ChangeState Switch] ; Used when Noll switches
type = ChangeState
trigger1 = root,stateno = 509 && root,animelem = 3
value = 684


[State 0, Helper Die]
type = DestroySelf
trigger1 = time = 700
ignorehitpause = 1

;--------------------------------------------------------
; Noll Down + C Direction Slash - Down
[Statedef 682]
type    = S
movetype= A
physics = N
juggle  = 2
anim = 682
velset = 0,0
sprpriority = 3

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 10

[State 0, Turn]
type = Turn
triggerall = anim = 682
trigger1 = time = 0 

[State 0, Helper Guarded]
type = RootMapSet
triggerall = anim = 679
trigger1 = time > 43 && time < 49
map = "helperGuarded"
value = moveguarded


[State 0, Helper Hit]
type = RootMapSet
triggerall = anim = 682
trigger1 = time > 43 && time < 49
map = "helperHit"
value = movehit

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 2,1
dest = 2,parent,var(52)

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 4010, activation]
type = PlaySnd
trigger1 = time = 1
value = 300,8
volumescale = 150

[State 0, PosAdd]
type = PosAdd
triggerall = anim = 682
trigger1 = time = 3
x = -11


[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 3
x = 0
y = -12

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 4
x = 0
y = -3

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 5
x = 0
y = -0.2

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 6
x = 0
y = 0.12

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 7
x = 0
y = 1

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 8
x = 0
y = 30

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 9
x = 0
y = 10

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 10
x = 0
y = 0.1

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 12
x = 0
y = -4

[State 0, VelSet]
type = VelSet
triggerall = anim = 682
trigger1 = AnimElem = 13
x = 0
y = 0

[State 0, PosSet]
type = PosSet
trigger1 = pos y > -40
y = -10


[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = anim = 682
trigger1 = AnimElem = 15
value = 506
elem = 3

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
trigger1 = 1
attr = A, NP
animtype  = Hard
damage    = 50*map(AbilityMultiplier),5*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 30,36
guard.pausetime = 10,10
guard.hittime = 7
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,14
guardsound = 6,10 + (random < 500 * 1)
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -2, 25
air.hittime = 35
air.velocity = -2,25
fall = 1
down.bounce = 1
fall.recovertime = 50
fall.yvelocity = -12
fall.xvelocity = 0.2
Envshake.time = 50
Envshake.ampl = -6
fall.envshake.time = 13


[State 0, ChangeState]		;This changestate activates if Noll performs statedef 405.
type = ChangeState
trigger1 = numhelper(634) > 0
value = 507
ctrl = 1 

[State 0, ChangeState Switch] ; Used when Noll switches
type = ChangeState
trigger1 = root,stateno = 509 && root,animelem = 3
value = 684

[State 0, Helper Die]
type = DestroySelf
trigger1 = time = 700
ignorehitpause = 1

;--------------------------------------------------------
; Noll - Down + C Direction Slash - Up
[Statedef 683]
type    = S
movetype= A
physics = N
juggle  = 2
anim = 683
velset = 0,0
sprpriority = 3

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 10

[State 0, Helper Guarded]
type = RootMapSet
triggerall = anim = 683
trigger1 = time > 41 && time < 65
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
triggerall = anim = 683
trigger1 = time > 41 && time < 65
map = "helperHit"
value = movehit

[State 0, StateTypeSet]
type = StateTypeSet
triggerall = anim = 506
trigger1 = AnimElem = 2
statetype = S       ;S,A,C,L
movetype = I        ;I,A,H
physics = N         ;A,C,S,N

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 2,1
dest = 2,parent,var(52)

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 411, activation]
type = PlaySnd
trigger1 = time = 1
value = 300,8
volumescale = 150

[State 411, PosAdd]
type = PosAdd
triggerall = anim = 683
trigger1 = time = 3
x = -11
y = 4

[State 0, VelSet]
type = VelSet
triggerall = anim = 683
trigger1 = AnimElem = 2
x = .44
y = 6

[State 0, VelSet]
type = VelSet
triggerall = anim = 683
trigger1 = AnimElem = 3
x = 0.20
y = 0.45

[State 0, VelSet]
type = VelSet
triggerall = anim = 683
trigger1 = AnimElem = 4
x = 0.12
y = 0.88

[State 0, VelSet]
type = VelSet
triggerall = anim = 683
trigger1 = AnimElem = 5
x = -4
y = -30

[State 0, VelSet]
type = VelSet
triggerall = anim = 683
trigger1 = AnimElem = 6
x = -.25
y = -4


[State 0, VelSet]
type = VelSet
triggerall = anim = 683
trigger1 = AnimElem = 7
x = 0
y = -.8

[State 0, VelSet]
type = VelSet
triggerall = anim = 683
trigger1 = AnimElem = 8
x = 0
y = -.4

[State 0, VelSet]
type = VelSet
triggerall = anim = 683
trigger1 = AnimElem = 9
x = 0
y = 0

[State 0, PosSet]
type = PosSet
triggerall = anim = 506
trigger1 = pos y > -40
y = -10


[State 0, ChangeAnim2]
type = ChangeAnim2
triggerall = anim = 683
trigger1 = AnimElem = 15
value = 506
elem = 3

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
trigger1 = 1
attr = A, NP
animtype  = Hard
damage    = 50*map(AbilityMultiplier),5*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 30,36
guard.pausetime = 10,10
guard.hittime = 7
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,14
guardsound = 6,10 + (random < 500 * 1)
ground.type = High
ground.slidetime = 12
ground.hittime  = 20
ground.velocity = -.3, -12
air.hittime = 35
air.velocity = -.3,-12
fall = 1
fall.recovertime = 120
Envshake.time = 50
Envshake.ampl = -6
fall.envshake.time = 13
yaccel = 0.48


[State 0, ChangeState]		;This changestate activates if Noll performs statedef 405.
type = ChangeState
trigger1 = numhelper(634) > 0
value = 507
ctrl = 1 

[State 0, ChangeState Switch] ; Used when Noll switches
type = ChangeState
trigger1 = root,stateno = 509 && root,animelem = 3
value = 684


[State 0, Helper Die]
type = DestroySelf
trigger1 = time = 700
ignorehitpause = 1
;--------------------------------------------------------
;SWITCH Phantom Blade
[Statedef 684]
type    = S
movetype= A
physics = N
juggle  = 2
anim = 506
sprpriority = 3

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, PosSet] ; Moves to where Noll was
type = PosSet
trigger1 = time = 0
x = root,map(switchX)
y = root,map(switchY) - 35

[State 0, Teleport]
type = PlaySnd
trigger1 = time = 0
value = S470,0
volumescale = 200
 
[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 2,1
dest = 2,parent,var(52)

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = S       ;S,A,C,L
movetype = I        ;I,A,H
physics = N         ;A,C,S,N

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "Spam Deny"
ID = 455
stateno = 455
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Explod]	;PARTICLE EFFECTS
type = Explod
trigger1 = Animelem = 1
anim = 1000
pos = 0,-29
postype = p1
vel = 0,2
scale = 0.5,0.5
sprpriority = 3

[State 0, NotHitBy]
type = NotHitBy
trigger1 = 1
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 40

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
y = -3
x = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
y = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = p2statetype != A
triggerall = !movecontact
trigger1 = 1
attr = S, NP
animtype  = Light
damage    = 25*map(AbilityMultiplier)
hitflag = MAFD
guardflag = HA
pausetime = 6,8
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S4,2
guardsound = 6,10
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -5,0
air.hittime = 25
air.velocity = -2,10
fall.recovertime = 20
Envshake.time = 20
givepower = 50,50

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = p2statetype = A
triggerall = !movecontact
trigger1 = 1
attr = S, NP
animtype  = Light
damage    = 25*map(AbilityMultiplier)
hitflag = MAFD
guardflag = HA
pausetime = 12,12
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 18
ground.hittime  = 25
ground.velocity = -5,0
air.hittime = 25
air.velocity = -2,10
fall = 1
fall.recovertime = 30
down.bounce = 1
fall.yvelocity = -8
Envshake.time = 30
givepower = 50,50

[State 0, ChangeState]		;This changestate activates if Noll performs statedef 402.
type = ChangeState
trigger1 = root, stateno = 508 && root, animelem = 3
value = 507
ctrl = 1

[State 0, Helper Die]
type = DestroySelf
trigger1 = time = 600
trigger2 = numhelper(506) > 1 && time > 2
trigger3 = numhelper(507) > 1 && time > 2

;-------------------------------------------------------------------------------
; C Spam Deny
[Statedef 455]
type    = S
movetype= A
physics = S
anim = 9999
poweradd = 0
velset = 0,0
sprpriority = 1
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
triggerall = numhelper(450) = 0
trigger1 = Time = 100
trigger2 = p2movetype !=H

;-------------------------------------------------------------------------------

;--------------------------------------------------------
;Saito C
;--------------------------------------------------------
[Statedef 510]
type    = A
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 510
poweradd = -300
velset = 0,0
sprpriority = 1

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
triggerall = p2dist x < 0
trigger1 = Time = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 8
x = 17
y = -1

[State 0, Swing]
type = PlaySnd
trigger1 = AnimElem = 7 
value = S1,3
volumescale = 100
[State 0, Gust]
type = PlaySnd
trigger1 = AnimElem = 8 
value = S400,0
volumescale = 100


[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 8 
y = 0.5

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 8
anim = 515
pos = -10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -1,0
pausemovetime = 0
scale = 0.8,0.8
sprpriority = 2

[State 0, Velocity if Hit]
type = VelSet
trigger1 = movehit
x = -3
y = -3
[State 0, Velocity if Blocked]
type = VelSet
trigger1 = moveguarded
x = .5
y = -5

[State 200, Fall state]
type = ChangeState
trigger1 = time = 33
value = 51
ctrl = 1

[State 200, Fall state]
type = ChangeState
trigger1 = moveguarded
value = 50
ctrl = 0
[State 200, Fall state]
type = ChangeState
trigger1 = movehit
value = 50
ctrl = 1

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = ifelse(enemy,movetype = A,90,30)*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAFD
pausetime = ifelse(enemy,movetype = A,30,15),ifelse(enemy,movetype = A,30,15)
ground.hittime  = 15
guard.pausetime = 15,15
guard.hittime  = 15
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.velocity = 15,4
guard.velocity = -4
airguard.velocity = -2,0
air.velocity = 15,4
Fall = 1
Envshake.time = 15
p2stateno = 1025
p2facing = 1

[State 200, Fall state]
type = ChangeState
trigger1 = time = 33
value = 51
ctrl = 1

[State 200, Land]
type = ChangeState
trigger1 = vel y > 0 && pos y >= 0
value = 0
ctrl = 0


[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 0


; Saito Down+C:
;-------------------------------------------------------------------------------
[Statedef 513]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 513
poweradd = -300
sprpriority = 1
[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 3
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 13*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 10,10
sparkno = 9999
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 999
air.hittime = 999
ground.velocity = 0,-8
air.velocity = 0,-8
down.velocity = 0, -8
Envshake.time = 5
fall = 1
fall.recover = 1
fall.recovertime = 25

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S450,0
volumescale = 150
[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 516
pos = 0,-15
ontop = 1
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,-1
pausemovetime = 0
scale = 0.6,0.5
sprpriority = 2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 4
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 13*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 4,4
sparkno = 9999
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 999
air.hittime = 999
ground.velocity = 0,-3
air.velocity = 0,-3
Envshake.time = 5
fall = 1
fall.recover = 1
fall.recovertime = 25


[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 5
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 13*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 10,10
sparkno = 9999
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-3
air.velocity = 0,-3
Envshake.time = 5
fall = 1
fall.recover = 1
fall.recovertime = 25 + ifelse(enemy,movetype = A, 7,0)


[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 6
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 20*map(AbilityMultiplier)
air.juggle = 1
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 40 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = 0,-6
air.velocity = 0,-6
Envshake.time = 15
fall = 1
fall.recover = 1
fall.recovertime = 42 + ifelse(enemy,movetype = A, 7,0)

[State 200, Crouch to stand]
type = ChangeState
trigger1 = animtime = 0
value = 12
ctrl = 1

[State 200, Fall???]
type = ChangeState
triggerall = animtime = 0
trigger1 = pos y <=-1
value = 50
ctrl = 1

[State 200, End]
type = ChangeState
Triggerall = movehit
triggerall = time >= 17
trigger1 = command = "up"
trigger2 = command = "holdup"
value = 40

;-------------------------------------------------------------------------------
; C - Aire
[Statedef 511]
type    = A
movetype= I
physics = A
juggle  = 1
ctrl = 0
anim = 511
poweradd = -200
sprpriority = 2



[State 0, VelSet]
type = VelSet
trigger1 = time = (1,20)
y = .3

[State 0, Turn]
type = Turn
triggerall = AnimElem = 1
trigger1 = p2dist x < 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 512
ctrl = 1
;-------------------------------------------------------------------------------
; C - Air GO
[Statedef 512]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 512
poweradd = 0
sprpriority = 2

[State 0, Helper]
type = Helper
trigger1 = time = 1 
helpertype = normal ;player
name = "Spam Deny"
ID = 6678
stateno = 6678
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,3
volumescale = 100
[State 0, Gust]
type = PlaySnd
trigger1 = time = 0 
value = S400,0
volumescale = 100

[State 0, Turn]
type = Turn
triggerall = AnimElem = 1
trigger1 = p2dist x < 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 515
pos = -10,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = -1,0
pausemovetime = 0
scale = 0.8,0.8
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = 4
y = -5

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 517
trigger1 = p2dist y > -5 && p2bodydist x < 20
value = 517

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 512
trigger1 = p2dist y >= -5 && p2dist x > 20 && p2dist x > 40
value = 512

[State 0, ChangeAnim]
type = ChangeAnim
triggerall = Anim != 514
trigger1 = p2dist y < -10
value = 514

[State 0, VelAdd]
type = VelAdd
trigger1 = AnimElem = 1
x = (p2bodydist X/6) + 1
y = p2bodydist Y/7

[State 200, 1]
type = HitDef
getpower = 0
triggerall = p2dist y >= 0
triggerall = !movecontact
triggerall = numhelper(6678) <= 1
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = ifelse(enemy,movetype = A,60,30)*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = ifelse(enemy,movetype = A,48,24),ifelse(enemy,movetype = A,48,24)
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,3)
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 999
air.hittime = 999
fall = 1
fall.recover = ifelse(enemy,movetype = A,0,1)
Fall.recovertime = 40
ground.velocity = -3,-7
air.velocity = -3,-7
p2facing = 1
Envshake.time = 20

[State 200, 1]
type = HitDef
getpower = 0
triggerall = p2dist y < 0
triggerall = !movecontact
triggerall = numhelper(6678) <= 1
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = 20*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 24,24
guard.pausetime = 7,3
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 999
air.hittime = 999
ground.velocity = -3,-3
air.velocity = -3,-3
p2facing = 1
fall = 1
fall.recover = 0
Envshake.time = 20
air.juggle = 1

[State 0, VelSet]
type = VelSet
trigger1 = moveguarded
x = -2
y = -4

[State 200, End]
type = ChangeState
trigger1 = movehit
value = 50
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = moveguarded
value = 5050
ctrl = 0


[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
trigger2 = time >= 3 && p2bodydist X < -40 || (vel y > 0 && p2bodydist y < -10) || (vel y < 0 && p2bodydist y > 10)
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Saito Down + C - Air WHIFF
[Statedef 518]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 518
poweradd = -200
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S1,0
volumescale = 50



[State 0, TargetBind]
type = TargetBind
trigger1 = movecontact
time = 1
id = -1
pos = 20,-20

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 3
y = -3

[State 0, VelSet]
type = VelSet
trigger1 = movecontact
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = movecontact
value = S4,0
volumescale = 999 

[State 0, Busterable]
type = MapSet
trigger1 = 1
map = "busterable"
value = 1

[State 200, 1]
type = HitDef
getpower = 0
triggerall = numhelper(669) = 0
trigger1 = numhelper(669) = 0
attr = A, HA
animtype  = Up
damage    = 30*map(AbilityMultiplier)
hitflag = AFD
guardflag = 
pausetime = 0,70
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S4,0
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,0
air.velocity = 0,0
Fall = 1
p2facing = 1
p2stateno = 5020
Envshake.time = 5
kill = 0

[State 200, End]
type = ChangeState
trigger1 = movecontact
value = 519
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Saito Down + C - Air - SUCC
[Statedef 519]
type    = A
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 519
poweradd = 0
sprpriority = 2

[State 0, Busterable]
type = MapSet
trigger1 = 1
map = "busterable"
value = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "Grab Whiff"
ID = 669
stateno = 669
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Time = 39
statetype = A       ;S,A,C,L
movetype = I        ;I,A,H
physics = A         ;A,C,S,N

[State 0, Turn]
type = Turn
trigger1 = AnimTime = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -3
y = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = -1
y = 1


[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S1,0
volumescale = 50

[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 2
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = 10*map(AbilityMultiplier)
hitflag = AFD
guardflag = 
pausetime = 0,0
sparkno = s99999
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = s1,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -18,5
air.velocity = -18,5
p2stateno = 1025
Fall = 1
Fall.recovertime = 20
Envshake.time = 15
p2facing = -1




[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Saito Grab Whiff Helper
[Statedef 669]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = 2

[State 0, DestroySelf]
type = DestroySelf
trigger1 = enemy, movetype != H


;-------------------------------------------------------------------------------
;Jodie
[Statedef 522]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 522
poweradd = -200

[State 0, Sound]
type = PlaySnd
trigger1 = time = 0
value = S400,0
volumescale = 500

[State 0, If previous state was Run, get a small velocity.]
type = VelSet
trigger1 = prevstateno = 100 && time = 0
x = 4

[State 0, Slight Slideback]
type = VelSet
trigger1 = animelem = 3
x = -2.5

[State 200, Return to Idle]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, Dashback]
type = ChangeState
triggerall = time = [26,36]
trigger1 = command = "back"
trigger2 = command = "holdback"
value = 105
ctrl = 0

[State 200, SPRINT]
type = ChangeState
triggerall = time = [26,36]
trigger1 = command = "fwd"
trigger2 = command = "holdfwd"
value = 100
ctrl = 1

[State 200, AA]
type = ChangeState
triggerall = time = [12,36]
trigger1 = command = "a"
trigger2 = command = "hold_a"
value = 523
ctrl = 0
[State 200, B]
type = ChangeState
triggerall = time = [12,36]
trigger1 = command = "b"
trigger2 = command = "hold_b"
value = 524
ctrl = 0

[State 200, Down+C Stance Into Sword]
type = ChangeState
triggerall = time = [12,36]
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
triggerall = numhelper(23420) = 0
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 708
ctrl = 0

[State 200, C]
type = ChangeState
triggerall = time = [12,36]
triggerall = power >= 200
trigger1 = command = "c"
trigger2 = command = "hold_c"
value = 525
ctrl = 0

; Jodie B - 3
;-------------------------------------------------------------------------------
[Statedef 523]
type    = S
movetype= A

juggle  = 2
ctrl = 0
anim = 523
poweradd = 0
velset = 3,0
sprpriority = 2

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
triggerall = numhelper(55000) = 0
trigger1 = moveguarded = 1
value = 25
[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
triggerall = numhelper(55000) = 0
trigger1 = movehit = 1
value = 125



[State 0, Voice - shred this!!!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,16
volumescale = 200



[State 200, From 5BB/Anything other than 5C Stance]
type = HitDef
getpower = 0
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = 20*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 12,16
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
guard.pausetime = 12,26
guard.hittime  = 25
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.velocity = -1.5,-8
air.velocity = -1,-8
Fall = 1
Fall.recovertime = 30 + ifelse(enemy,movetype = A, 7,0)
Envshake.time = 20


[State 200, End]
type = ChangeState
Triggerall = movehit
trigger1 = command = "up"
value = 40
[State 200, Fwd+C]
type = ChangeState
Triggerall = movecontact
Triggerall = numhelper(420) < 1
triggerall = numhelper(3500) = 0
triggerall = power >= 300
trigger1 = command = "holdfwd"
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
value = 526
[State 200, End]
type = ChangeState
Triggerall = movecontact
triggerall = prevstateno != 522
trigger1 = command = "c"
value = 522

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Jodie C: B
[Statedef 524]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 524
poweradd = 0

[State 0, If linked from j5C, go straight to animelem 3.]
type = ChangeAnim2
trigger1 = prevstateno = 525 && time = 0
value = 524
elem = 5

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, Voice - SLAM!]
type = PlaySnd
triggerall = var(2)  >=0
triggerall = var(2)  <=50
trigger1 = AnimElem = 4
value = S7,29
volumescale = 200
channel = 1
[State 0, Voice - You Alright!?]
type = PlaySnd
triggerall = var(2)  >=60
triggerall = var(2)  <=70
trigger1 = AnimElem = 4
value = S7,33
volumescale = 200
[State 0, Voice - GYEEEEHH!!!]
type = PlaySnd
triggerall = var(2)  >=80
triggerall = var(2)  <=90
trigger1 = AnimElem = 4
value = S7,28
volumescale = 200
[State 0, Voice - shred this!!!]
type = PlaySnd
triggerall = var(2)  >=100
triggerall = var(2)  <=110
trigger1 = AnimElem = 4
value = S7,10
volumescale = 200
[State 0, Voice - Dumbass!]
type = PlaySnd
triggerall = var(2)  >=125
triggerall = var(2)  <=130
trigger1 = AnimElem = 4
value = S7,8
volumescale = 200

[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 2
x = 5
y = -15

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 2
x = .5
y = -4

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 2|| Animelem = 3|| Animelem = 4|| Animelem = 5
statetype = A
movetype = A
physics = A

[State 0, Air invul]
type = NotHitBy
trigger1 = animelem = 1
value = A
time = 6
[State 0, Low and Projectile Invul]
type = NotHitBy
trigger1 = animelem = 2
value = C,NP,SP,HP
time = 20

[State 0, ChangeAnim]
type = ChangeAnim
trigger1 = time = 1 
trigger1 = prevstateno = 525
elem = 6



[State 200, 1]
type = HitDef
getpower = 0
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = ifelse(enemy,movetype = A,50,25)*map(AbilityMultiplier)
hitflag = MAF
guardflag = HAF
pausetime = ifelse(enemy,movetype = A,20,10),ifelse(enemy,movetype = A,50,10)
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4
air.velocity = -2,15
Air.Fall = 1
Fall.Recover = 0
Envshake.time = 20



[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 200, INSTANT AIRDASH]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "s"
value = 66
[State 200, AIRDASH]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "FF"
value = 65

;-------------------------------------------------------------------------------
; Jodie Fwd+C
;-------------------------------------------------------------------------------
[Statedef 526]
type    = A
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 526
poweradd = -200
velset = 0,0
sprpriority = 1

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, Sound]
type = PlaySnd
trigger1 = time = 0
value = S200,14
volumescale = 500

[State 0, Helper]
type = Helper
trigger1 = movecontact
helpertype = normal ;player
name = "Spam Deny"
ID = 6678
stateno = 6678
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0


[State 0, PlayerPush]
type = PlayerPush
trigger1 = AnimElem = 3||AnimElem = 4
value = 0
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 0
y = 0
[State 0, No Physics]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
movetype = A
physics = N
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 10
y = -.05
[State 0, Air state]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
movetype = A
physics = A

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 527
ID = 527
pos = -60,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.8,0.8
sprpriority = 5
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 0
[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = time = 200
id = 405

[State 0, NotHitBy]
type = NotHitBy
trigger1 = Animelem = 3
value = ,NA,SA,NP,SP,NT,ST
time = 1

[State 200, 1]
type = HitDef
getpower = 0
getpower = 0
triggerall = !movecontact 
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = ifelse(enemy,movetype = A,80,40)*map(AbilityMultiplier)
guardflag = MAFD
hitflag = MAFD
pausetime = ifelse(enemy,movetype = A,24,12),ifelse(enemy,movetype = A,32,16)
ground.hittime  = 15
guard.pausetime = 12,12
guard.hittime = 5
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.velocity = -3,-8
air.velocity = -3,-8
Fall = 1
Fall.Recover = ifelse(enemy,movetype = A,0,1)
Envshake.time = 20

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
[State 200, Jump]
type = ChangeState
triggerall = movehit
trigger1 = command = "up"
trigger2 = command = "holdup"
value = 40
ctrl = 0
[State 200, SWORD JODIE J.C]
type = ChangeState
triggerall = movecontact
triggerall = power >= 300
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 2830
ctrl = 0
[State 200, End]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(6823) = 0
triggerall = power >= 300
trigger1 = command = "holdfwd"
trigger1 = command = "c"
value = 5322
ctrl = 0

;-------------------------------------------------------------------------------
; Fwd+C AIR
;-------------------------------------------------------------------------------
[Statedef 5322]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 526
poweradd = -200
velset = 0,0
sprpriority = 1

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5


[State 0, Sound]
type = PlaySnd
trigger1 = time = 0
value = S200,14
volumescale = 500


[State 0, Helper]
type = Helper
trigger1 = movecontact
helpertype = normal ;player
name = "Spam Deny"
ID = 6823
stateno = 6823
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Add X and Y coordinates if linked with s.6C]
type = PosAdd
trigger1 = prevstateno = 526 && time = 0
x = 2
y = -15
[State 0, No Physics if linked with s.6C]
type = StateTypeSet
trigger1 = prevstateno = 526 && time = 0
statetype = A
movetype = A
physics = N

[State 0, PlayerPush]
type = PlayerPush
trigger1 = AnimElem = 3||AnimElem = 4
value = 0
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 0
y = 0
[State 0, No Physics]
type = StateTypeSet
trigger1 = AnimElem = 3
statetype = A
movetype = A
physics = N
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 10
y = -.05
[State 0, Air state]
type = StateTypeSet
trigger1 = AnimElem = 4
statetype = A
movetype = A
physics = A


[State 0, vOICE - LETS STEP IT UP!]
type = PlaySnd
triggerall = var(2)  >=0
triggerall = var(2)  <=34
trigger1 = time = 0
value = S7,30
volumescale = 100

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 527
ID = 628
pos = -60,-50
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.8,0.8
sprpriority = 5
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1
ignorehitpause = 0


[State 0, NotHitBy]
type = NotHitBy
trigger1 = Animelem = 3
value = ,NA,SA,NP,SP,NT,ST
time = 1



[State 200, 1]
type = HitDef
getpower = 0
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Heavy
damage    = ifelse(enemy,movetype = A,80,40)*map(AbilityMultiplier)
guardflag = MAFD
hitflag = MAFD
pausetime = ifelse(enemy,movetype = A,24,12),ifelse(enemy,movetype = A,32,16)
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-7
air.velocity = -3,-7
Fall = ifelse(enemy,movetype = A,1,0)
Fall.Recover = ifelse(enemy,movetype = A,0,1)
Envshake.time = 20

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 200, Jump]
type = ChangeState
triggerall = movehit
trigger1 = command = "up"
trigger2 = command = "holdup"
value = 50
ctrl = 0

[State 200, SWORD JODIE J.C]
type = ChangeState
triggerall = movecontact
triggerall = power >= 300
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 2830
ctrl = 0

[State 200, Fwd+C]
type = ChangeState
Triggerall = movecontact
Triggerall = numhelper(6678) = 0
triggerall = power >= 300
trigger1 = command = "holdfwd"
trigger1 = command = "c"
value = 526

[State 200, C]
type = ChangeState
triggerall = movecontact
triggerall = power >= 300
trigger1 = command = "c"
value = 525
ctrl = 0


;------------------------------------------
; C - Aire 
[Statedef 525]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 525
poweradd = 0
sprpriority = 2

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, Rapid Sound]
type = PlaySnd
trigger1 = animelem = 1
value = s200,15
volumescale = 300

[State 0, Voice - shred this!]
type = PlaySnd
triggerall = var(2)  >=0
triggerall = var(2)  <=35
trigger1 = AnimElem = 1
value = S200,16
volumescale = 200



[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
triggerall = numhelper(55000) = 0
trigger1 = time = 7
value = -200


[State 0, If from C Stance, start with unique velocity.]
type = Posadd
trigger1 = (prevstateno = 522 || prevstateno = 80070) && time = 0
y = -5
[State 0, If from C Stance, start with unique velocity.]
type = VelSet
trigger1 = (prevstateno = 522 || prevstateno = 80070) && time = 0
y = -1.5


[State 0, DP INVINCIBILLITY BABY]
type = NotHitBy
triggerall = (prevstateno = 522 || prevstateno = 80070)
trigger1 = time = [0, 10)
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 1



[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
y = 0
[State 0, VelSet]
type = VelSet
trigger1 = Time = (6,15)
x = 5
y = -4
[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 6
x = 5
y = -4

[State 0, TargetBind]
type = TargetBind
trigger1 = movehit && Animelem = 4
trigger2 = movehit && Animelem = 5
trigger3 = movehit && Animelem = 6
trigger4 = movehit && Animelem = 7
trigger5 = movehit && Animelem = 8
time = 1
id = -1
pos = 20,-5

[State 0, VelAdd]
type = VelAdd
trigger1 = hitcount && time = 0
y = 1.5
[State 200, 1]
type = HitDef
getpower = 0
getpower = 0
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
trigger7 = AnimElem = 10
trigger8 = AnimElem = 11
attr = A, NA
animtype  = Up
damage    = 3*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 2,2
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,1
guardsound = 6,10
guard.velocity = -2
airguard.velocity = -3,-5
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-5
air.velocity = -2,-3
Fall = 0
Fall.Recover = 1
Envshake.time = 5

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50

[State 200, INSTANT AIRDASH]
type = ChangeState
Triggerall = movecontact
Triggerall = time >=17
triggerall = var(4) = 0
triggerall = prevstateno != [65,70]
trigger1 = command = "s"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 66

[State 200, AIRDASH]
type = ChangeState
Triggerall = movecontact
Triggerall = time >=17
triggerall = prevstateno != [65,70]
trigger1 = command = "FF"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 65

[State 200, J.6C]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(421) = 0
triggerall = power >= 300
trigger1 = command = "holdfwd"
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
value = 5322
ctrl = 0

[State 200, SLAM!]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = AnimTime = 0
value = 524
ctrl = 0

[State 0, If from C Stance, you can cancel into j.A.]
type = ChangeState
triggerall = prevstateno = 522 && hitcount >= 4
trigger1 = command = "a"
value = 601
ctrl = 0

[State 0, If from C Stance, you can cancel into j.B.]
type = ChangeState
triggerall = prevstateno = 522 && hitcount >= 4
trigger1 = command = "b"
value = 610
ctrl = 0

[State 0, If from C Stance, you can cancel into j.C.]
type = ChangeState
triggerall = prevstateno = 522 && hitcount >= 4
triggerall = power >= 300
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
value = 620
ctrl = 0

;-------------------------------------------------------------------------------
; Sword Switch - BASE to SWORD
;-------------------------------------------------------------------------------
[Statedef 708]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 708
poweradd = 0
velset = 0,0
sprpriority = 2

[State 0, Sound]
type = PlaySnd
trigger1 = time = 0
value = S960,1
volumescale = 300

[State 0, Sound]
type = PlaySnd
trigger1 = time = 0
value = S422,4
volumescale = 300

[State 0, Skip to Animelem 3 if previous state is C.]
type = ChangeAnim2
trigger1 = prevstateno = 522 && time = 0
value = 708
elem = 3

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 10
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S7,48
volumescale = 100

[State 200, End]
type = ChangeState
triggerall = roundstate != 1
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, End]
type = ChangeState
triggerall = roundstate = 1
trigger1 = AnimTime = 0
value = 0
ctrl = 0

; Sword Switch - SWORD to BASE
;-------------------------------------------------------------------------------
[Statedef 709]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 709
poweradd = 0
velset = 0,0
sprpriority = 2

[State 0, Sound]
type = PlaySnd
trigger1 = time = 0
value = S960,0
volumescale = 300

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 200, End]
type = ChangeState
triggerall = roundstate != 1
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, End]
type = ChangeState
triggerall = roundstate = 1
trigger1 = AnimTime = 0
value = 0
ctrl = 0

;===============================================================================
; Yoru
;-------------------------------------------------------------------------------
[Statedef 530]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 530
poweradd = 0
velset = -4,0
sprpriority = 1
[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
trans = add
[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = AnimElem = 3
value = -300

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S200,12
volumescale = 200

[State 0, Voice - Grunt 5!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,9
volumescale = 200


[state 450]
type = velset
trigger1 = AnimElem = 2
x = 6

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "C - Start"
ID = 528
stateno = 528
pos = 0,-45
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1



[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; C - Start
[Statedef 528]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 528
sprpriority = 3

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State 0, Damage Proration]
type = parentvaradd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 10

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
[State 0, ScreenBound]
type = ScreenBound
trigger1 = hitcount >=1
trigger2 = vel x < 0
value = 0
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[state 450]
type = velset
trigger1 = time = 0
x = 17
[state 450]
type = veladd
trigger1 = time >= 7
x = -2.5

[State 0, Guard Count Reset]
type = MapSet
trigger1 = time = 0
map = "guardCount"
value = 0
;ignorehitpause = 
;persistent = 

[State 0, Guard Count Add]
type = MapAdd
trigger1 = moveguarded = 1
map = "guardCount"
value = 1
;ignorehitpause = 
;persistent =

[State 310, 1]
type = HitDef
getpower = 0
Triggerall = vel x > 0
Triggerall = anim = 528 && (map(guardCount) + hitcount) <= 3
trigger1 = 1
attr = S, NP
animtype  = Heavy 
damage    = 5*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
guard.pausetime = 4,4
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S200,13
guardsound = 6,10
ground.type = High
ground.slidetime = 12
guard.hittime = 20
ground.hittime  = 15
ground.velocity = 2,-2
air.velocity = 2,-2
Fall = 0
Envshake.time = 5
Getpower = 0,0
Fall.recovertime = 40
[State 200, 1]
type = HitDef
Triggerall = vel x > 0
Triggerall = anim = 528 && (map(guardCount) + hitcount) <= 3
trigger1 = 1
attr = S, NP
animtype  = Heavy 
damage    = 5*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
guard.pausetime = 4,4
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S200,13
guardsound = 6,10
ground.type = High
ground.slidetime = 12
guard.hittime = 20
ground.hittime  = 15
ground.velocity = -1.5,-1.5
air.velocity = -1.5,-1.5
Fall = 0
Envshake.time = 5
Getpower = 0,0
Fall.recovertime = 40

[State 200, 1]
type = HitDef
Triggerall = vel x < -3
Triggerall = anim = 528 && (map(guardCount) + hitcount) <= 4
trigger1 = 1
attr = S, NP
animtype  = Heavy 
damage    = 5*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
guard.pausetime = 4,4
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S200,13
guardsound = 6,10
ground.type = High
ground.slidetime = 12
guard.hittime = 0
ground.hittime  = 15
ground.velocity = 2,-1.5
air.velocity = 2,-1.5
down.velocity = 2,-3
Fall = 0
Envshake.time = 5
Getpower = 0,0
Fall.recovertime = 40

[State 200, End]
type = Changestate
trigger1 = frontedgebodydist < -200
trigger2 = time = 50
value = 5311
;-------------------------------------------------------------------------------
; C -  Fin
[Statedef 5311]
type    = S
movetype= I
physics = S
juggle  = 2
ctrl = 0
anim = 9999
velset = 0,0
sprpriority = -1

[State 200, End]
type = Destroyself
trigger1 = time = 0

;-------------------------------------------------------------------------------
; C - Aire
[Statedef 531]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 531
poweradd = -300
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S200,12
volumescale = 200

[State 0, Voice - Grunt 5!]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,9
volumescale = 200


[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = -1.5
y = -5

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "C - Air Helper"
ID = 529
stateno = 529
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 200, Fall]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1


;===============================================================================
; C - Air Helper
;-------------------------------------------------------------------------------
[Statedef 529]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 529
poweradd = 0
velset = 0,0
sprpriority = 2

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit


[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
[State 0, ScreenBound]
type = ScreenBound
trigger1 = hitcount >=1
trigger2 = vel x < 0
value = 0
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow


[State 0, If touching floor]
type = VelSet
trigger1 = pos y = 0
y = 0
[State 0, If Under the floor]
type = PosSet
trigger1 = pos y >= 1
y = 0

[state 450]
type = velset
trigger1 = time = 0
x = 17
y = 6
[state 450]
type = velset
trigger1 = time = [7,10]
x = 10
y = 3
[state 450]
type = velset
trigger1 = time = [10,13]
x = 5
y = 1
[state 450]
type = velset
trigger1 = time = [13,16]
x = -5
y = -3
[state 450]
type = velset
trigger1 = time = [16,19]
x = -15
y = -6

[State 0, Guard Count Reset]
type = MapSet
trigger1 = time = 0
map = "guardCount"
value = 0
;ignorehitpause = 
;persistent = 

[State 0, Guard Count Add]
type = MapAdd
trigger1 = moveguarded = 1
map = "guardCount"
value = 1
;ignorehitpause = 
;persistent =

[State 310, 1]
type = HitDef
getpower = 0
Triggerall = vel x > 0
Triggerall = anim = 529 && (map(guardCount) + hitcount) <= 3
trigger1 = 1
attr = A, NP
animtype  = Heavy 
damage    = 5*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
guard.pausetime = 2,2
guard.sparkno = 13000
sparkno = 0
sparkxy = -8,0
hitsound   = S200,13
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
guard.hittime  = 20
airguard.hittime  = 20
ground.velocity = -2.5,-1.5
air.velocity = -1.5,-2.5
Fall = 0
Envshake.time = 5
Getpower = 0,0
Fall.recovertime = 40 + ifelse(enemy,movetype = A, 7,0)

[State 200, 1]
type = HitDef
Triggerall = vel x < 0
Triggerall = anim = 529 && (map(guardCount) + hitcount) <= 3
trigger1 = 1
attr = S, NP
animtype  = Heavy 
damage    = 5*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
guard.pausetime = 2,2
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S0,11
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = 2.5,-1.5
guard.hittime  = 20
airguard.hittime  = 20
air.velocity = 1.5,-2.5
Fall = 0
Envshake.time = 5
Getpower = 0,0
Fall.recovertime = 40 + ifelse(enemy,movetype = A, 7,0)

[State 200, End]
type = ChangeState
trigger1 = frontedgebodydist < -200
trigger2 = time = 50
value = 5311
ctrl = 0

;===============================================================================
; Yoru - Down C:
;-------------------------------------------------------------------------------
[Statedef 636]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 636
poweradd = -300
velset = -4,0
sprpriority = 1

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
trans = add

[State 0, Helper]
type = Helper
triggerall = numhelper(6450) = 0
trigger1 = Time = 3
helpertype = normal ;player
name = "Metastar Rush"
ID = 6450
stateno = 6450
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1
supermovetime = 9999

[State 0, ChangeAnim2]
type = ChangeAnim2
trigger1 = helper(6450), animelem = 12
trigger2 = time = 100 && numhelper(6450) = 0
value = 636
elem = 2

[State 0, VelSet]
type = VelSet
trigger1 = animelem = 2
x = 2
[State 0, VelSet]
type = VelSet
trigger1 = animelem = 5
x = 4

[State 200, Dash Cancel on block]
type = ChangeState
triggerall = command = "FF"
Triggerall = power >= 500
Trigger1 = helper(6450),moveguarded
Trigger1 = time >=60
value = 100
ctrl = 1

[State 200, Dash Cancel on block]
type = ChangeState
triggerall = ailevel > 0
triggerall = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
Triggerall = power >= 500
Trigger1 = helper(6450),moveguarded
Trigger1 = time >=60
value = 100
ctrl = 1

[State 200, Dash Cancel on hit]
type = ChangeState
triggerall = command = "FF"
Triggerall = power >= 500
Trigger1 = helper(6450),movehit
Trigger1 = helper(6450),hitcount >= 2
value = 100
ctrl = 1

[State 200, Dash Cancel on hit]
type = ChangeState
triggerall = ailevel > 0
Triggerall = power >= 500
Trigger1 = helper(6450),movehit
Trigger1 = helper(6450),hitcount >= 2
triggerall = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 100
ctrl = 1


[State 200, End]
type = ChangeState
Trigger1 = helper(6450),movehit
Trigger1 = helper(6450),hitcount >= 2
triggerall = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 640

[State 200, End]
type = ChangeState
triggerall = command = "holddown" 
triggerall = command = "c"
triggerall = power >= 700
Trigger1 = helper(6450),movehit
Trigger1 = helper(6450),hitcount >= 2
value = 640

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = Helper(6450),stateno = 639
value = 641
ctrl = 0

;===============================================================================
; Yoru - Down C: FINISH
;-------------------------------------------------------------------------------
[Statedef 640]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 640
poweradd = -700
velset = -10,0
sprpriority = 1

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 20
trans = add

[State 0, Helper]
type = Helper
triggerall = numhelper(6450) = 0
trigger1 = Time = 1
helpertype = normal ;player
name = "Metastar Rush"
ID = 6450
stateno = 638
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Yoru - Down+C Hurt
;-------------------------------------------------------------------------------
[Statedef 641]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 641
velset = -4,0

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 4
x = 5
[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Yoru - MK Rush
[Statedef 6450]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 6450
poweradd = 0
velset = 5,0
sprpriority = 2

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded


[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit


[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, Removes Velocity tick 1]
type = VelSet
trigger1 = time = 0
y = 0
ignorehitpause = 1
[State 0, PosSet]
type = PosSet
trigger1 = time = 0
trigger2 = time = 1
trigger3 = time = 2
y = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 440, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AT,AP
slot = 0
stateno = 639
time = -1

;Velocity Below----------------------------------------
[State 0, VelSet]		;DASH
type = VelSet
trigger1 = Animelem = 1
x = 8
[State 0, VelSet]		;Slash
type = VelSet
trigger1 = Animelem = 4
x = 5
[State 0, VelSet]		;Downwards
type = VelSet
trigger1 = Animelem = 6
x = 5


[State 0, VelSet]		;Downwards
type = VelSet
trigger1 = Animelem = 8
x = 2


[State 0, StateTypeSet]	;Airstate for good physics
type = StateTypeSet
trigger1 = Animelem = 9
statetype = S
movetype = A
physics = A
[State 0, VelSet]		;JumpSlash Up
type = VelSet
trigger1 = Animelem = 9
x = 2
y = -4.5


[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = Animelem = 12
statetype = S
movetype = A
physics = S
[State 0, PosSet]		;Jumpslash land
type = PosSet
trigger1 = Animelem = 12
y = 0
[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 12
x = 2
y = 0
[State 0, Veladd]		;If wiffing in neutral she goes a bit farther
type = Veladd
getpower = 0
triggerall = !movecontact
trigger1 = time < 66
x = .055
;Velocity Above------------------------------------------------
[State 200, 1]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = AnimElem = 1
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 12*map(AbilityMultiplier),1*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MAF
pausetime = 5,5
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,1
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5,0
air.velocity = -2,.5
Envshake.time = 7
getpower = 0
[State 200, 1]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = AnimElem = 3||AnimElem = 4||AnimElem = 5||AnimElem = 6
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 12*map(AbilityMultiplier),1*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MAF
pausetime = 5,6
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 25
ground.velocity = -2.5,0
air.velocity = -2,-.5
Envshake.time = 7
getpower = 0
[State 200, 1]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = AnimElem = 7
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 12*map(AbilityMultiplier),1*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MAF
pausetime = 5,5
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2.5,-4	;lifts p2 off the ground
air.velocity = -2,-3
Envshake.time = 7
getpower = 0
[State 200, 1]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = AnimElem = 8
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 12*map(AbilityMultiplier),1*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MAF
pausetime = 5,5
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,1
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3.5,-3
air.velocity = -3,-3
Envshake.time = 7
getpower = 0

[State 0, Veladd]		;If wiffing on upwards swing she goes a bit farther
type = Veladd
trigger1 = hitcount <=8 && animelem = 9
trigger2 = hitcount <=8 && animelem = 10
x = .15
[State 200, 1]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = AnimElem = 9
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 12*map(AbilityMultiplier),1*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MAF
pausetime = 5,5
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -3,-4
air.velocity = -2.5,-5
Envshake.time = 7
getpower = 0

[State 200, 1]
type = HitDef
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = AnimElem = 11
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = 12*map(AbilityMultiplier),2*map(AbilityMultiplier)
guard.kill = 0
hitflag = MAF
guardflag = MAF
pausetime = 10,10
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -4.5,7
air.velocity = -4,7
Envshake.time = 20
fall = 1
down.bounce = 1
fall.yvelocity = -7.5
fall.xvelocity = -1
fall.recover = 0
getpower = 0


[State 200, End]
type = ChangeState
trigger1 = root,stateno = 640
value = 638

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 637
ctrl = 1
;-------------------------------------------------------------------------------
; Yoru - MK Rush Finisher
[Statedef 638]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 638
poweradd = 0
velset = 5,0
sprpriority = 2

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 10

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded


[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit


[State 0, Helper]
type = Helper
trigger1 = AnimTime = 0
helpertype = normal ;player
name = "Power Delay"
ID = 56000
stateno = 56000
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 441, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AT,AP
slot = 0
stateno = 639
time = -1

[State 0, BindToTarget]
type = BindToTarget
trigger1 = time = 0
time = 1
pos = 55,0,Foot
[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
trigger2 = Time = 1
trigger3 = Time = 2
y = 0
[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 1
x = 5


[State 441, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
trigger1 = 1
attr = S, NP
animtype  = Heavy
damage    = 50*map(AbilityMultiplier),10*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFDP
guardflag = MAFD
pausetime = 24,24
sparkno = 2
guard.sparkno = 13000
sparkxy = -9,-30
hitsound   = S0,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 18,5
guard.velocity = -3
air.velocity = 18,5
Fall = 1
Envshake.time = 30
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2getp1state = 0

[State 441, Countered]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,map(hitOverride) = 1
attr = S, NP
animtype  = Heavy
damage    = 50*map(AbilityMultiplier),10*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFDP
guardflag = MAFD
pausetime = 24,24
sparkno = 2
guard.sparkno = 13000
sparkxy = -9,-30
hitsound   = s0,5

[State 200, End]
type = ChangeState
trigger1 = Time = 18
value = 637
ctrl = 1

;-------------------------------------------------------------------------------
; Yoru - MK Hurt
[Statedef 639]
type    = S
movetype= H
physics = N
juggle  = 2
ctrl = 0
anim = 639
poweradd = 0
velset = 0,0
sprpriority = 1

[State 440, HitOverride]
type = HitOverride
trigger1 = 1
attr = SCA,AA,AT,AP
slot = 0
stateno = 639
time = -1

[State 0, PosSet]
type = PosSet
trigger1 = Time = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S9,0
volumescale = 999


[State 0, VelSet]
type = VelSet
trigger1 = Time = [1,5]
x = -2
y = -3

[State 0, VelSet]
type = VelSet
trigger1 = Time = [5,10]
x = -2
y = 3

[State 0, VelSet]
type = VelSet
trigger1 = Time = [10,13.5]
x = -1.5
y = -1

[State 0, VelSet]
type = VelSet
trigger1 = Time = [13.5,17]
x = -1.5
y = 1

[State 0, VelSet]
type = VelSet
trigger1 = Time = 17
x = -0.5
y = 0



[State 200, End]
type = ChangeState
trigger1 = Time = 17
value = 637
ctrl = 1
;----------------------------------------------------------------------
; MK dips
[Statedef 637]
type    = A
movetype= I
physics = S
juggle  = 2
ctrl = 0
anim = 637
velset = 0,0
sprpriority = -1


[State 0, VelSet]
type = VelSet
trigger1 = Time = [1,6]
x = 25

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,1
volumescale = 100

[State 200, End]
type = Destroyself
trigger1 = time = 6

;-------------------------------------------------------------------------------
;Down C - Aire
[Statedef 642]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 642
velset = 0,0
sprpriority = 2
poweradd = -250

[State 0, VelSet]
type = VelSet
trigger1 = time = 6
y = -3
x = -2
persistent = 0

[State 0, Helper]
type = Helper
triggerall = numhelper(6450) < 1
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "Metastar Tackle: Helper"
ID = 6450
stateno = 643
pos = 30,ifelse(pos Y < -275,Pos Y - 30 ,-275)
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1
supermovetime = 9999
;-------------------------------------------------------
;Metastar Tackle
[Statedef 643]
type    = A
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 643
velset = 0,0
sprpriority = 2

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 655, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 655, Damage Proration]
type = parentvaradd 
trigger1 = movecontact
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, RemapPal]
type = RemapPal
trigger1 = 1
source = 2,1
dest = 2,parent,var(52)

[State 0, Metastar arrives]
type = PlaySnd
trigger1 = time = 0
value = S1,3
volumescale = 80

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = 21
x = -0.03
persistent = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Heavy
damage    = 25*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFD
guardflag = MAF
pausetime = 17,25
guard.pausetime = 17,17
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1,15
air.velocity = -1,15
envshake.time = 17
Fall = 1
down.bounce = 1
fall.yvelocity  = -3
fall.recover = 0
fall.Envshake.time = 10

[State 0, ChangeState]
type = ChangeState
trigger1 = pos y >= 0
value = 644 ;Metastar Tackle Land
ctrl = 0

[State 0, ChangeState]
type = ChangeState
triggerall = movehit
trigger1 = parent, command = "b"
trigger2 = parent, command = "c"
trigger2 = parent, command = "holddown"
value = 645 ;Metastar uppercut AIR
ctrl = 0

[State 425, HitOverride]
type = HitOverride
trigger1 = Time = 0
attr = SCA,AA,AT,AP
slot = 0
stateno = 639
time = -1
forceair = 0
;-------------------------------------------------------
;Metastar Tackle Land
[Statedef 644]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 644
velset = 0,0
sprpriority = -1

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, stateno = 636
value = 6450 ;Metastar rush
ctrl = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = parent, command = "b"
trigger2 = parent, command = "c"
trigger2 = parent, command = "holddown"
trigger2 = parent,statetype = A
value = 646 ;Metastar uppercut GROUND
ctrl = 0

[State 200, End]
type = ChangeState
trigger1 = root, movetype = H
trigger2 = enemy, !alive
trigger3 = root,stateno = 700 & root,movehit ; Leaves if the user grabs to avoid clones
trigger4 = roundstate = 3
value = 637
ctrl = 0


;-------------------------------------------------------
;Metastar Uppercut Air
[Statedef 645]
type    = A
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 645
velset = 0,0
sprpriority = 2

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 657, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 657, Damage Proration]
type = parentvaradd 
trigger1 = movecontact
v = 11
ignorehitpause = 1
persistent = 0
value = 10

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, VelAdd]
type = VelAdd
triggerall = pos y < -10
trigger1 = time = [1,6]
x = 0
y = .8

[State 0, PosSet]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, VelAdd]
type = VelAdd
triggerall = pos y < -10
trigger1 = time >= 7
x = 0
y = .44


[State 0, VelSet]
type = VelSet
trigger1 = time = 7
x = 2
y = -7

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Heavy
damage    = 25*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFD
guardflag = MAF
pausetime = 12,14
guard.pausetime = 4,4
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,13
guardsound = 6,0
ground.type = High
ground.slidetime = 6
ground.hittime  = 6
ground.velocity = -1,-5
air.velocity = -1,-5
envshake.time = 21
Fall = 1
fall.recovertime = 45
fall.Envshake.time = 10

[State 0, ChangeState]
type = Changestate
triggerall = movehit
trigger1 = root,command = "holddown"
trigger1 = root,command = "b"
value = 647

[State 0, ChangeState]
type = ChangeState
triggerall = time = [1,6]
trigger1 = pos y >= 0
value = 646 ;Metastar Uppercut Ground
ctrl = 0


[State 0, ChangeState]
type = ChangeState
triggerall = time > 7
trigger1 = pos y >= 0
value = 637 ;Metastar Normal Land
ctrl = 0

;-------------------------------------------------------------------------
;Metastar Uppercut Ground
[Statedef 646]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 646
velset = 0,0
sprpriority = 2 

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 3
persistent = 0

[State 658, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 658, Damage Proration]
type = parentvaradd 
trigger1 = movecontact
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = time = 7
x = 15

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Heavy
damage    = 50*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFD
guardflag = MAF
pausetime = 12,14
guard.pausetime = 4,4
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,13
guardsound = 6,0
ground.type = High
ground.slidetime = 4
ground.hittime  = 8
ground.velocity = -1.5,-8
air.velocity = -1.5,-8
envshake.time = 21
Fall = 1
fall.recover = 0
fall.Envshake.time = 10

[State 0, ChangeState]
type = Changestate
triggerall = movehit
trigger1 = root,command = "holddown"
trigger1 = root,command = "b"
value = 647

[State 0, ChangeState]
type = ChangeState
trigger1 = AnimTime = 0
value = 637 ;Metastar Normal Land
ctrl = 0

;-------------------------------------------------------------------------
;Metastar dunk
[Statedef 647]
type    = A
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 647
velset = 0,0
sprpriority = 2 
facep2 = 1

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 658, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 658, Damage Proration]
type = parentvaradd 
trigger1 = movecontact
v = 11
ignorehitpause = 1
persistent = 0
value = 10

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(2) = 0
x = 3
Y = -9

[State 0, VelSet]
type = VelAdd
trigger1 = time >= 5
Y = 0.44

[State 0, VelSet]
type = VelSet
trigger1 = animelemtime(4) = 0
x = 6
Y = 12

[State 0, VelAdd]
type = VelSet
trigger1 = movecontact
x = 6
y = 12

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
trigger1 = 1
attr = A, NA
animtype  = Heavy
damage    = 40*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFD
guardflag = MAF
pausetime = 24,24
guard.pausetime = 4,4
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,4
guardsound = 6,10
ground.type = High
ground.velocity = -3,7
air.velocity = -3,7
Fall = 1
fall.recover = 0
p2stateno = 1000
p2getp1state = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 1
trigger1 = 1
attr = A, NA
animtype  = Heavy
damage    = 40*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAFD
guardflag = MAF
pausetime = 24,24
guard.pausetime = 12,12
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,4
guardsound = 6,10
ground.type = High
ground.velocity = -3,7
air.velocity = -3,7
Fall = 1
fall.recover = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = Pos y >= 0 && time > 2
trigger2 = AnimTime = 0
value = 637 ;Metastar Normal Land
ctrl = 0
;-------------------------------------------------------------------------------
;---------------------------------------------------------------------------

;-----------------------------------------------------------
;Violet
;-----------------------------------------------------------
;===============================================================================
; Violet Down C - Reload:
;-------------------------------------------------------------------------------
[Statedef 541]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 541
velset = 0,0
sprpriority = 2

[State 0, Reload Variable 1]
type = VarAdd
triggerall = Var(47) < 16
trigger1 = Time = 10
v = 47
value = 4
[State 0, Reload Variable 2]
type = VarAdd
triggerall = Var(47) != 16
trigger1 = AnimElem = 7
v = 47
value = 4

[State 0, RELOAD 1]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8,3
volumescale = 999
[State 0, RELOAD 2]
type = PlaySnd
trigger1 = AnimElem = 8
value = S8,3
volumescale = 999
channel = 1

[State 0, CtrlSet]
type = CtrlSet
triggerall = !command = "holddown"
trigger1 = time >=30
value = 1
[State 0, CtrlSet]
type = CtrlSet
trigger1 = time >= 37
value = 0


[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Violet C - 1:
;-------------------------------------------------------------------------------
[Statedef 534]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 534
poweradd = -50
velset = 0,0
sprpriority = 1

[State 200, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,0
volumescale = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S8,0
volumescale = 999



[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 537
ID = 537
pos = 90,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.55,0.55
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 30*map(AbilityMultiplier) 
hitflag = MAFD
guardflag = MA
pausetime = 12,13
sparkno = s30002
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,999999
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = 3,.5
guard.velocity = -3
air.velocity = 3,.5
Fall = 0
Envshake.time = 10
ground.cornerpush.veloff = -1
getpower = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 3
v = 47    ;fv = 
value = -1




[State 200, 2C]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 649

[State 200, 6C]
type = ChangeState
Triggerall = movecontact
Triggerall = var(47) > 0
trigger1 = command = "holdfwd"
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 540

[State 200, End]
type = ChangeState
Triggerall = var(47) > 0
Triggerall = movecontact
Triggerall = power >= 50  
trigger1 = command = "c"
value = 535

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Violet C - 2:
;-------------------------------------------------------------------------------
[Statedef 535]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 535
poweradd = -50
velset = 0,0
sprpriority = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = -6
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,1
volumescale = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,1
volumescale = 999

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 537
ID = 537
pos = 90,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.55,0.55
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 30*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 12,12
sparkno = s30002
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,99999
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -3,.65
air.velocity = -3,-.65
Fall = 1
Envshake.time = 10
ground.cornerpush.veloff = -1
getpower = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 1
v = 47    ;fv = 
value = -1



[State 200, 6C]
type = ChangeState
Triggerall = movecontact 
Triggerall = var(47) > 0
trigger1 = command = "holdfwd"
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 540
[State 200, 2C]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 649
[State 200, End]
type = ChangeState
Triggerall = movehit
Triggerall = var(47) > 0
Triggerall = power >= 50  
trigger1 =  command = "c"
value = 536

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Violet C - 3:
;-------------------------------------------------------------------------------
[Statedef 536]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 536
poweradd = -50
velset = 0,0
sprpriority = 1

[State 200, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = -6
y = 0



[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 537
ID = 537
pos = 90,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.55,0.55
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,2
volumescale = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,2
volumescale = 999

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 30*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 12,12
sparkno = s30002
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,99999
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -3,.5
air.velocity = -3,-.65
Fall = 1
Envshake.time = 10
ground.cornerpush.veloff = -1
getpower = 0

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 1
v = 47    ;fv = 
value = -1





[State 200, 6C]
type = ChangeState
Triggerall = movecontact 
Triggerall = var(47) > 0
trigger1 = command = "holdfwd"
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 540
[State 200, 2C]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 649
[State 200, End]
type = ChangeState
Triggerall = movecontact
Triggerall = var(47) > 0
Triggerall = power >= 50  
trigger1 = command = "c"
value = 535

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Violet C - Aire
[Statedef 538]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 538
poweradd = -100
sprpriority = 2

[State 200, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0, Cut the startup]
type = ChangeAnim2
trigger1 = prevstateno = 539&& time = 0
value = 538
elem = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 2
v = 47    ;fv = 
value = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8,2
volumescale = 999


[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,2
volumescale = 999

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -map(AbilityMultiplier)5
y = -2

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 537
ID = 537
pos = 90,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.55,0.55
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Up
damage    = 25*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 12,12
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,9999
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-2
air.velocity = -2,-2
Envshake.time = 20
getpower = 0
Fall = 1
Fall.recovertime = 30 + ifelse(enemy,movetype = A, 7,0)

[State 200, j.2C]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 100  
Triggerall = var(47) > 0
trigger1 = command = "holddown"
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 649

[State 200, j.5cc]
type = ChangeState
Triggerall = var(47) > 0
Triggerall = power >= 50  
Triggerall = movecontact
trigger1 = command = "c"
value = 539

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Violet C - Aire 2
[Statedef 539]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 539
poweradd = -50
sprpriority = 2


[State 0, Cut the startup]
type = ChangeAnim2
trigger1 = prevstateno = 538&& time = 0
value = 539
elem = 2

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 2
v = 47    ;fv = 
value = -1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,2
volumescale = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S8,2
volumescale = 999

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -map(AbilityMultiplier)5
y = -2


[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 537
ID = 537
pos = 90,-20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.55,0.55
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Up
damage    = 25*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 12,12
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,99999
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-2
air.velocity = -2,-2
Envshake.time = 20
getpower = 0
Fall = 1
Fall.recovertime = 30 + ifelse(enemy,movetype = A, 7,0)

[State 200, End]
type = ChangeState
triggerall = movecontact
Triggerall = var(47) > 0
trigger1 = command = "holddown"
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 649
ctrl = 1

[State 200, j.5c]
type = ChangeState
Triggerall = var(47) > 0
Triggerall = power >= 50  
Triggerall = movecontact
trigger1 = command = "c"
value = 538

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Violet Fwd+C
[Statedef 540]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 540
poweradd = 0
sprpriority = 2

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 200, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0, CtrlSet]
type = CtrlSet
trigger1 = time = 8 && !movecontact
value = 1

[State 0, CtrlSet]
type = CtrlSet
trigger1 = movecontact
value = 0
ignorehitpause = 1

[State 0, ChangeAnim2]
type = ChangeAnim2
Triggerall = var(47) <= 0
trigger1 = prevstateno = 100 && time = 0
value = 465
elem = 2
[State 0, Set above the ground]
type = PosSet
trigger1 = Animelem = 2
y = -5
[State 0, VelSet]
type = VelSet
trigger1 = movecontact
y = -2
x = -3

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,2
volumescale = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,2
volumescale = 999
[State 0, VelSet]
type = VelSet
Triggerall = Var(47) >= 1
trigger1 = AnimElem = 2
x = 8
y = -3
[State 0, Explod]
type = Explod
Triggerall = Var(47) >= 1
trigger1 = AnimElem = 2
anim = 537
ID = 537
pos = -90,-20
postype = p1  ;p2,front,back,left,right
facing = -1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.55,0.55
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0


[State 0, Set to Airstate]
type = StateTypeSet
trigger1 = Animelem = 2
statetype = A
movetype = A
physics = A
[State 0, VelSet]
type = VelSet
Triggerall = Var(47) <= 0
trigger1 = AnimElem = 2
x = 5
y = -1

[State 0, RELOAD VARIABLE]
type = VarAdd
trigger1 = AnimElem = 2
v = 47    ;fv = 
value = -1

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
triggerall = enemy,movetype = A
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = 70*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 28,40
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 8,0
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 18,5
air.velocity = 18,5
Fall = 0
Envshake.time = 15
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2facing = 1        ;Force to face p1

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = enemy,movetype != A
trigger2 = enemy,map(hitOverride) = 1
attr = S, NA
animtype  = Heavy
damage    = 35*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 14,20
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -5,-2
air.velocity = -3,-2
Fall = 0
Envshake.time = 15
Fall.recovertime = 20

[State 200, j.2C]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 100  
Triggerall = var(47) > 0
trigger1 = command = "holddown"
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 649

[State 200, End]
type = ChangeState
Triggerall = movecontact
Triggerall = var(47) <= 0
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 534

[State 200, End]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 50  
Triggerall = var(47) > 0
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 535

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Violet Down C - Aire
[Statedef 649]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 649
poweradd = -200
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 200, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 15

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 1
v = 47    ;fv = 
value = -1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 5
y = 8

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 5
y = -4

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,2
volumescale = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S8,2
volumescale = 999

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 2
anim = 648
ID = 648
pos = -20,20
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.55,0.55
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = ifelse(enemy,movetype = A,80,40)*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = ifelse(enemy,movetype = A,30,14),ifelse(enemy,movetype = A,30,14)
guard.pausetime = 15,4
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,11
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -1.5,8
air.velocity = -1.5,8
Fall = 1
Envshake.time = 20
fall.yvelocity = ifelse(enemy,movetype = A,-12,-6)
down.bounce = 1
getpower = 0
fall.recover = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;===============================================================================
; Bill - C
;-------------------------------------------------------------------------------
[Statedef 631]
type    = S
movetype= A
physics = N
juggle  = 3
ctrl = 0
anim = 631
poweradd = -200
sprpriority = 1

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 15
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, VarAdd]
type = VarAdd
triggerall = var(21) < 8
triggerall = enemy,map(hitOverride) = 0
trigger1 = movecontact && !movecountered
v = 21    
value = 1
ignorehitpause = 1
persistent = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(21) < 8
triggerall = enemy,map(hitOverride) = 0
trigger1 = movecontact && movecountered
v = 21    
value = 2
ignorehitpause = 1
persistent = 0

[State 400, StateTypeSet]
type = StateTypeSet
trigger1 = animelem = 4
statetype = S
movetype = A
physics = S

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 4
y = -2.5

[State 0, VelAdd]
type = VelAdd
triggerall = time <= 10
trigger1 = 1
y = .4

[State 0, PosSet]
type = PosSet
triggerall = time > 10
trigger1 = pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
triggerall = time > 10
trigger1 = pos y >= 0
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 3

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10

[State 400, Counterhit]
type = HitDef
getpower = 0
triggerall = enemy, movetype = A
triggerall = enemy,map(hitOverride) = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 25*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 36,36
guard.pausetime = 12, 10
sparkno = 0
guard.sparkno = s13000
sparkxy = -8,-25
hitsound   = 8,0
guardsound = 6,10 + (random < 500) * 1
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -18,-5
air.velocity = -17,-4
Fall = 1
Envshake.time = 15
Fall.recovertime = 60
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7
p2stateno = 1030
p2getp1state = 0

[State 400, Normal]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = enemy, movetype != A
trigger2 = enemy,map(hitOverride) = 1
attr = S, NA
animtype  = Medium
damage    = 25*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 12,12
guard.pausetime = 12, 10
sparkno = 0
guard.sparkno = s13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,10 + (random < 500) * 1
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -5
air.velocity = -4,-1
Fall = 1
Envshake.time = 15
Fall.recovertime = 60
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7

[State 1000, 6]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Bill - C - Aire
;-------------------------------------------------------------------------------
[Statedef 628]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 484
poweradd = -200
velset = 0,0
sprpriority = 2

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = -4
y = -3

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "Contact Bomb"
ID = 629
stateno = 629
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inheritjuggle = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;===============================================================================
; Bill - C - Aire Grenade
;-------------------------------------------------------------------------------
[Statedef 629]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 629
poweradd = 0
sprpriority = 2

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 0, Damage Proration]
type = ParentVarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 3

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0
x = 3
y = -8 + (time/25)

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .4

[State 0, PosSet]
type = PosSet
trigger1 = pos y > 0
y = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = A, NP
animtype  = Light
damage    = 0
hitflag = MAF
guardflag = MAF
pausetime = 1,1
sparkno = s9999
numhits = 0
guard.sparkno = s13000
sparkxy = -8,-25
hitsound   = 5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 10
ground.velocity = -2.5
air.velocity = -3,-1
Fall = 0
Fall.recovertime = 60
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4


[State 200, End]
type = ChangeState
triggerall = root,numhelper(23500) > 0
trigger1 = abs(Pos X - (root,helper(23500), Pos X)) < 20 
trigger1 = abs(Pos Y - (root,helper(23500), Pos Y)) < 20 
value = 630
ctrl = 1

[State 0, ChangeState]
type = ChangeState
trigger1 = movecontact
value = 630
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = frontedgebodydist < -20

;-------------------------------------------------------------------------------
; Bill - Light Explosion 2
[Statedef 630]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 630
poweradd = 0
sprpriority = 2
velset = 0,0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 1
value = S6,1
volume = 50
channel = -1
;lowpriority = -1
freqmul = 1.0
loop = 0
pan = 0
;abspan = 
ignorehitpause = 1
persistent = 0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, Damage Proration]
type = rootVarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = root,var(21) + 3 ; More bombs = more proration

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 1
time = 15
ampl = -4

[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 1
trigger1 = 1
attr = A, NP 
animtype  = Heavy
damage    = ifelse(prevstateno = 621 && root,var(22) = 1,50,70)*map(AbilityMultiplier) ; Grenades do reduced damage in pyromaniac mode (To reduce pyromaniac's damage boost) 
hitflag = MAFD
guardflag = MAF
pausetime = 12,ifelse(prevstateno = 621,1,12) ;Reduced blockstun if from j.5c
sparkno = 0
guard.sparkno = s13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 16
ground.velocity = -1,-5
air.velocity = ifelse(prevstateno = 621,-5,-1),-5 ; Launches away farther horizontally if from j.5c grenade
airguard.velocity = -5,-1
Fall = 0
Fall.recovertime = 60
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;-------------------------------------------------------------------------------
; Bill - Light Explosion 3
[Statedef 80101]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 630
poweradd = 0
sprpriority = 2
velset = 0,0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, Damage Proration]
type = rootVarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = root,var(21) + 3 ; More bombs = more proration

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 1
time = 15
ampl = -4

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = A, NP 
animtype  = hard
damage    = 0 ; Grenades do no damage to himself
hitflag = MAFD
guardflag = 
affectteam = F
pausetime = 12,1 ;Reduced blockstun if from j.5c
sparkno = 0
guard.sparkno = s13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 10
ground.hittime  = 8
ground.velocity = -8, -6.5
air.hittime = 8
air.velocity = -8, -6.5 ; Launches away farther horizontally if from j.5c grenade
mindist = 0, -50
Fall = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;-------------------------------------------------------------------------------
;===============================================================================
; Bill - Down C:
;-------------------------------------------------------------------------------
[Statedef 627]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 627
poweradd = -200
velset = 0,0
sprpriority = 2

[State 0, Helper]
type = Helper
triggerall = var(21) > 0
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "Light Explosive"
ID = 630
stateno = 630
pos = p2bodydist x + 20, p2bodydist y
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inheritjuggle = 1

[State 0, VarAdd]
type = Varadd
triggerall = var(21) > 0
trigger1 = AnimElem = 3
v = 21    
value = -1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Bill - Down C: Fail
;-------------------------------------------------------------------------------
[Statedef 632]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 632
poweradd = -200
velset = 0,0
sprpriority = 2

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Bill - Down C - Aire
;-------------------------------------------------------------------------------
[Statedef 635]
type    = A
movetype= I
physics = A
juggle  = 0
ctrl = 0
anim = 635
poweradd = -200
velset = 0,0
sprpriority = 2

[State 5201, 5] ;Blink white
type = PalFX
triggerall = var(21) > 0
trigger1 = Time%10 = 0
time = 3
add = 128,128,128 ;256,256,256

[State 0, AfterImage]
type = AfterImage
trigger1 = 1
time = 20

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 4
y = -3

[State 625, Width]
type = Width
trigger1 = 1
edge = 20,20

[State 0, Helper]
type = Helper
triggerall = var(21) > 0
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "Light Explosive"
ID = 630
stateno = 630
pos = p2bodydist x + 20, p2bodydist y
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, VarAdd]
type = VarAdd
triggerall = var(21) > 0
trigger1 = AnimElem = 3
v = 21    
value = -1
persistent = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
;Bill 4C
[Statedef 685]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 685
poweradd = -200
sprpriority = 2

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "C4"
ID = 686
stateno = 686
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
scale = 0.1,0.1
supermovetime = 0
pausemovetime = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
;4C sticky Mine
[Statedef 686]
type    = S
movetype= I
physics = S
juggle  = 1
ctrl = 0
anim = 686
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S200,1
volumescale = 50

[State 475, ParentVarAdd] ; If the enemy touches the sticky mine, adds +1 to bomb count and vanishes
type = Parentvaradd
trigger1 = var(21) < 8 
trigger1 = abs(pos X - enemynear,pos X) <= 30 
trigger1 = abs(pos Y - enemynear,pos Y) <= 20 
v = 21
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = abs(pos X - enemynear,pos X) <= 30 
trigger1 = abs(pos Y - enemynear,pos Y) <= 20 
value = S200,0
volumescale = 50

[State 475, 2c trigger] ; If bill uses 2c or j.2c, explodes
type = ChangeState
trigger1 = root,stateno = 627 && root,animelem = 3
trigger2 = root,stateno = 635 && root,animelem = 3
value = 630

[State 0, Helper]
type = Helper
trigger1 = root,stateno = 80100 && root,animelem = 4
helpertype = normal ;player
name = "Light Explosive"
ID = 80101
stateno = 80101
pos = 0, 0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inheritjuggle = 0

[State 475, WDc trigger] ; If bill uses 2c or j.2c, explodes
type = ChangeState
trigger1 = root,stateno = 80100 && root,animelem = 4
value = 630

[State 475, End] ; Destroys self if the opponent touches it
type = DestroySelf
trigger1 = abs(pos X - enemynear,pos X) <= 30 
trigger1 = abs(pos Y - enemynear,pos Y) <= 20

;--------------------------------------
;JAY
;--------------------------------------

; Burn (Heat gain)
; For burn damage, check hurstates.cns
[Statedef 10500]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 9999
poweradd = 0
sprpriority = 2

[State 0, BurnHeat] ; Every 30 frames, increases Jay's heat by his total burn stack
type = rootMapAdd
triggerall = time > 5
trigger1 = (time%30) = 0
map = "heat"
value = root,map(burnStack)

[State 0, BurnTimer] ; Every 5 seconds, lowers Jay's burn stack count by 1
type = rootMapAdd
triggerall = time > 5
trigger1 = (time%300) = 0
map = "burnStack"
value = -1

[State 0, DestroySelf] ; If Jay's burn stack reaches 0, the round ends or he is knocked out, destroys self
type = DestroySelf
trigger1 = root,map(burnStack) = 0
trigger2 = roundstate != 2
trigger3 = root,!alive

;===============================================================================
; Jay Down C:
;-------------------------------------------------------------------------------
[Statedef 670]
type    = S
movetype = A
physics = S
juggle  = 2
ctrl = 0
anim = 670
poweradd = -200
velset = 0,0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 200, Woosh] 
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,10
volume = 120

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 650, ChangeState] ; If Heat is available, consumes it to switch to a stronger version of the move
type = ChangeState
triggerall = time = 5
trigger1 = map(heat) >= 100 && map(heat) < 200
trigger1 = command != "s" && command != "hold_s"; Holding S prevents this from consuming heat
value = 671

[State 650, ChangeState] ; If Heat is available, consumes it to switch to a stronger version of the move
type = ChangeState
triggerall = time = 5
trigger1 = map(heat) >= 200
trigger1 = command != "s" && command != "hold_s"; Holding S prevents this from consuming heat
value = 672

[State 0, VelSet] ; Normal speed boost
type = VelSet
trigger1 = AnimElem = 2
x = 10

[State 0, Burning MapAdd]
type = MapAdd
trigger1 = movecontact && !movecountered
map = "burn"
value = 1
persistent = 0
redirectid = enemynear,id

[State 0, BurnStack MapAdd]
type = MapAdd
trigger1 = movecontact && !movecountered
map = "burnStack"
value = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = Time%8 = 0
anim = F16000
ID = 16000
pos = -40,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.75,0.75
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1

[State 220, Attack] ; Normal Hit
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = !movecontact
triggerall = enemy,movetype != A
trigger1 = map(heat) < 100
attr = C, NA
animtype  = hard
damage    = 30*map(AbilityMultiplier)
hitflag = MAFD
guardflag = LAFD
pausetime = 15,15
guard.pausetime = 12, 15
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 12
ground.velocity = -7,-1
air.velocity = -7,-1
Fall = 1
fall.recover = 1
Envshake.time = 15
Fall.recovertime = 30
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7

[State 220, Attack] ; Normal Hit Fatal
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = !movecontact
triggerall = enemy,movetype = A
trigger1 = map(heat) < 100
attr = C, NA
animtype  = hard
damage    = 60*map(AbilityMultiplier)
hitflag = MAFD
guardflag = LAFD
pausetime = 30,30
guard.pausetime = 12, 10
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 8,1
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 9
ground.velocity = -7,-1
air.velocity = -7,-1
Fall = 1
fall.recover = 0
Envshake.time = 15
Fall.recovertime = 60
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7

[State 0, Active Charge Cancel]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "s"
value = 668

[State 450, End State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;===============================================================================
; Jay Down C Boosted:
;-------------------------------------------------------------------------------
[Statedef 671]
type    = S
movetype = A
physics = S
juggle  = 2
ctrl = 0
anim = 671
velset = 0,0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, VelSet] ; Heat speed boost
type = VelSet
trigger1 = AnimElem = 2
x = 23

[State 0, Playerpush] ; When heat is consumed, loses collision during the attack
type = playerPush
trigger1 = time = 0
value = 0

[State 0, Playerpush] ; Gains collision back 
type = playerPush
trigger1 = AnimElem = 5
value = 1

[State 0, Helper] ; Activates with Heat
type = Helper
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "Flare Boom"
ID = 667
stateno = 667
pos = -20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inherentjuggle = 2

[State 0, Burning MapAdd]
type = MapAdd
trigger1 = movecontact && !movecountered
map = "burn"
value = 1
persistent = 0
redirectid = enemynear,id

[State 0, BurnStack MapAdd]
type = MapAdd
trigger1 = movecontact && !movecountered
map = "burnStack"
value = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = Time%8 = 0
anim = F16000
ID = 16000
pos = -40,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.75,0.75
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1

[State 220, Attack] ; Heat Hit
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = enemy,movetype != A
trigger1 = !movecontact
attr = C, NA
animtype  = hard
damage    = 40*map(AbilityMultiplier)
hitflag = MAFD
guardflag = LAFD
pausetime = 0,18
guard.pausetime = 12, 22
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 28
ground.hittime  = 12
ground.velocity = -1,-8
air.velocity = -1,-8
Fall = 1
Envshake.time = 15
Fall.recover = 1
fall.recovertime = 60
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7
down.bounce = 1

[State 220, Attack] ; Heat Hit Fatal
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = enemy,movetype = A
trigger1 = !movecontact
attr = C, NA
animtype  = hard
damage    = 80*map(AbilityMultiplier)
hitflag = MAFD
guardflag = LAFD
pausetime = 10,36
guard.pausetime = 12, 22
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 8,1
guardsound = 6,11
ground.type = High
ground.slidetime = 28
ground.hittime  = 19
ground.velocity = -1,-8
air.velocity = -1,-8
Fall = 1
Envshake.time = 15
Fall.recover = 1
fall.recovertime = 45
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7
down.bounce = 1

[State 0, Consume Heat]
type = MapAdd
trigger1 = time = 0
map = "heat"
value = -100
persistent = 0

[State 0, Active Charge Cancel]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "s"
value = 668


[State 450, End State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;===============================================================================
; Jay Down C Boosted 2x:
;-------------------------------------------------------------------------------
[Statedef 672]
type    = S
movetype = A
physics = S
juggle  = 2
ctrl = 0
anim = 671
velset = 0,0
sprpriority = 2

[State 200, Woosh] 
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,10
volume = 120

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, VelSet] ; Heat speed boost Lvl 2
type = VelSet
trigger1 = AnimElem = 2
x = 30

[State 0, Playerpush] ; When heat is consumed, loses collision during the attack
type = playerPush
trigger1 = time < 22
value = 0

[State 0, Helper] ; Activates with Heat
type = Helper
trigger1 = AnimElem = 2 || AnimElem = 3 || AnimElem = 4
helpertype = normal ;player
name = "Flare Boom"
ID = 667
stateno = 667
pos = 20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inherentjuggle = 2

[State 0, Burning MapAdd]
type = MapAdd
trigger1 = movecontact && !movecountered
map = "burn"
value = 1
persistent = 0
redirectid = enemynear,id

[State 0, BurnStack MapAdd]
type = MapAdd
trigger1 = movecontact && !movecountered
map = "burnStack"
value = 1
persistent = 0

[State 0, Explod]
type = Explod
trigger1 = Time%8 = 0
anim = F16000
ID = 16000
pos = -40,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.75,0.75
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1

[State 220, Attack] ; Heat Hit
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = enemy,movetype != A
trigger1 = !movecontact
attr = C, NA
animtype  = hard
damage    = 50*map(AbilityMultiplier)
hitflag = MAFD
guardflag = LAFD
pausetime = 0,18
guard.pausetime = 12, 28
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 28
ground.hittime  = 12
ground.velocity = -1,-8
air.velocity = -1,-8
Fall = 1
Envshake.time = 15
Fall.recover = 1
fall.recovertime = 45
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7
down.bounce = 1

[State 220, Attack] ; Heat Hit Fatal
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = enemy,movetype = A
trigger1 = !movecontact
attr = C, NA
animtype  = hard
damage    = 100*map(AbilityMultiplier)
hitflag = MAFD
guardflag = LAFD
pausetime = 10,36
guard.pausetime = 12, 28
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 8,1
guardsound = 6,11
ground.type = High
ground.slidetime = 28
ground.hittime  = 19
ground.velocity = -1,-8
air.velocity = -1,-8
Fall = 1
Envshake.time = 15
Fall.recover = 1
fall.recovertime = 45
guard.cornerpush.veloff = -7
airguard.cornerpush.veloff = -7
down.bounce = 1

[State 0, Consume Heat]
type = MapAdd
trigger1 = time = 0
map = "heat"
value = -200
persistent = 0

[State 0, Active Charge Cancel]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "s"
value = 668

[State 450, End State]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Jay C - Aire Flare Boom
[Statedef 667]
type    = A
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 667
poweradd = 0
sprpriority = 2

[State 0, Juggle Map] ; Only inflicts juggle if this move came from lvl 0 j.5c
type = ParentMapAdd
triggerall = movehit && enemy,gethitvar(fall)
trigger1 = root,stateno = 620
map = "juggle"
value = 10
persistent = 0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S99,1
volumescale = 300
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 0
y = 0

[State 0, Burning MapAdd]
type = MapAdd
trigger1 = movehit && !movecountered
map = "burn"
value = 1
persistent = 0
redirectid = enemynear,id

[State 0, BurnStack MapAdd]
type = RootMapAdd
trigger1 = movehit && !movecountered
map = "burnStack"
value = 1
persistent = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = root,map(juggle) < 100 || root,stateno = 677
trigger1 = 1
attr = A, NP
animtype  = Medium
damage    = ifelse(root,stateno != 664,15,5)*map(AbilityMultiplier) ; Does less damage if spawned from 214b or 2c (2x)
hitflag = MAF
guardflag = MA
pausetime = 4,4
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 4
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2, ifelse(prevstateno = 679,4,-4)
air.velocity = -2, ifelse(prevstateno = 679,5,-5)
Fall = 1
Envshake.time = 15
Fall.recovertime = 25 + ifelse(enemy,movetype = A, 7,0) + (ifelse(prevstateno != 679 && root,stateno != 677, 20,0)) ; Adds extra hurtstun if not from j.5c
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4
down.bounce = 1

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;===============================================================================
; Jay C:
;-------------------------------------------------------------------------------
[Statedef 674]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 674
poweradd = -200
velset = 0,0
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S99,2
volumescale = 100

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = -3

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = -7

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 4
trigger1 = map(heat) >= 100
trigger1 = command != "s" && command != "hold_s"; Holding S prevents this from consuming heat
helpertype = normal ;player
name = "Blitz Ball"
ID = 675
stateno = 675
pos = 30,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inherentjuggle = 2

[State 0, Helper]
type = Helper
triggerall = AnimElem = 4
trigger1 = map(heat) < 100
trigger2 = command = "s" || command = "hold_s"; Holding S prevents this from consuming heat
helpertype = normal ;player
name = "Flare Boom"
ID = 676
stateno = 676
pos = 30,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inherentjuggle = 2

[State 0, Consume Heat]
type = MapAdd
trigger1 = AnimElem = 4
trigger1 = command != "s" && command != "hold_s"; Holding S prevents this from consuming heat
trigger1 = map(heat) >= 100
map = "heat"
value = -100

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = F16000
ID = 16000
pos = -50,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.75,0.75
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1

[State 400, End State]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Jay C: Flare
[Statedef 675]
type    = A
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 673
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = ParentMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 2

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = Time%10 = 0
anim = F16000
ID = 16000
pos = -40,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.75,0.75
sprpriority = 2
ontop = 0
shadow = 0,0,0
ownpal = 1

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = root,map(juggle) < 100
trigger1 = 1
attr = A, NP
animtype  = Medium
damage    = 10*map(AbilityMultiplier)
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-4
air.velocity = -2,-4
Fall = 1
Envshake.time = 15
Fall.recovertime = 20 + ifelse(enemy,movetype = A, 7,0)
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4

[State 200, End]
type = ChangeState
trigger1 = movecontact 
trigger2 = frontedgedist <= 0
value = 676
ctrl = 1

;-------------------------------------------------------------------------------
; Jay C: Flare Boom
[Statedef 676]
type    = A
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 667
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
trigger1 = root,stateno = 674
trigger1 = prevstateno != 675
map = "juggle"
value = 10
persistent = 0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S99,1
volumescale = 300
ignorehitpause = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 0
y = 0

[State 0, Burning MapAdd]
type = MapAdd
trigger1 = movehit && !movecountered
map = "burn"
value = 1
persistent = 0
redirectid = enemynear,id

[State 0, BurnStack MapAdd]
type = RootMapAdd
trigger1 = movehit && !movecountered
map = "burnStack"
value = 1
persistent = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = root,map(juggle) < 100 || root,stateno = 674
trigger1 = 1
attr = A, NP
animtype  = Medium
damage    = 15*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 4,7
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 8
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2, -5
air.velocity = -2,-5
Fall = 1
Envshake.time = 15
Fall.recovertime = 30 + ifelse(enemy,movetype = A, 7,0) + ifelse(root,stateno != 674,30,0) ; Adds extra hitstun if not from 5c
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4

[State 0, DestroySelf]
type = DestroySelf
trigger1 = AnimTime = 0

;-------------------------------------------------------------------------------
; Jay C - Aire
[Statedef 677]
type    = A
movetype= A
physics = A
ctrl = 0
anim = 677
poweradd = -200
sprpriority = 2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S99,2
volumescale = 300

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = -2
y = -5

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 2
trigger1 = command != "hold_s" ; Holding S prevents this from occuring, forcing the weakest version
trigger1 = map(heat) >= 100
helpertype = normal ;player
name = "Flare"
ID = 679
stateno = 679
pos = 20,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inherentjuggle = 2

[State 0, Helper]
type = Helper
triggerall = AnimElem = 2
trigger1 = map(heat) < 100
trigger2 = command = "s" || command = "hold_s"; Holding S prevents this from consuming heat
helpertype = normal ;player
name = "Flare Boom"
ID = 667
stateno = 667
pos = 30,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inherentjuggle = 2

[State 0, Consume Heat]
type = MapAdd
trigger1 = AnimElem = 2
trigger1 = command != "s" ; Doesn't consume heat if S is held
trigger1 = map(heat) >= 100
map = "heat"
value = -100

;[State 200, End]
;type = ChangeState
;triggerall = Time >= 5
;trigger1 = command = "holddown"
;trigger1 = command = "c"
;value = 650

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Jay C - Aire Flare
[Statedef 679]
type    = A
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 673
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = ParentMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = 2
y = -8

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .4

[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100
trigger1 = 1
attr = A, NP
animtype  = Medium
damage    = 10*map(AbilityMultiplier)
hitflag = MAF
guardflag = MA
pausetime = 12,12
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-4
air.velocity = -2,-4
Fall = 1
Envshake.time = 15
Fall.recovertime = 20 + ifelse(enemy,movetype = A, 7,0)
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4

[State 200, End]
type = ChangeState
trigger1 = pos y >= 0
trigger2 = movecontact 
value = 667
ctrl = 1

;===============================================================================
;  Clutch - Down + C:
;-------------------------------------------------------------------------------
[Statedef 690]
type    = S
movetype= I
physics = S
juggle  = 2
ctrl = 0
anim = 690
poweradd = -100
velset = 0,0
sprpriority = 2

[State 0, Level Up]
type = PlaySnd
trigger1 = time = 0
value = S450, 1
volumescale = 200

[State 0, VarSet]
type = VarAdd  
trigger1 = Time = 19
v = 17    ;fv = 10
value = 1

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 691
ID = 691
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.3,0.3
sprpriority = 5
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "Spam Deny"
ID = 6823
stateno = 6823
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
;===============================================================================
; Clutch C - START
;-------------------------------------------------------------------------------
[Statedef 692]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 692
poweradd = -200

[State 200, End]		;Lvl 3 Charge - BLAST
type = Changestate
trigger1 = Var(17) >= 3
trigger1 = AnimTime = 0
value = 696

[State 200, End]		;Lvl 2 Charge - Big Projectile
type = Changestate
trigger1 = Var(17) = 2
trigger1 = AnimTime = 0
value = 695

[State 200, End]		;Lvl 1 Charge - BURST
type = Changestate
trigger1 = Var(17) = 1
trigger1 = AnimTime = 0
value = 694

[State 200, End]		;Lvl 0 Charge - PEW
type = Changestate
trigger1 = Var(17) = 0
trigger1 = AnimTime = 0
value = 693



;===============================================================================
; Clutch C - Lvl 0 PEW
;-------------------------------------------------------------------------------
[Statedef 693]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 693
poweradd = 0
velset = -3,0
sprpriority = 1

[State 0, Mechanic]
type = PlaySnd
trigger1 = time = 0
value = S401,3
volumescale = 300
[State 0, LAZER]
type = PlaySnd
trigger1 = time = 9
value = S401,0
volumescale = 150

[State 0, VarSet]
type = VarSet
trigger1 = Time = 11
v = 17
value = 0
[State 0, Helper]
type = Helper
trigger1 = AnimElem = 5
helpertype = normal ;player
name = "697"
ID = 697
stateno = 697
pos = 35,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
inheritJuggle = 1


[State 200, End]				;Dash Cancel
type = Changestate
triggerall = command = "FF"
triggerall = power >= 200
triggerall = time >10
trigger1 = numhelper(422) = 0
value = 101
ctrl = 0

[State 200, End]		;Lvl 0 Charge -> Idle
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Clutch C - Lvl 1 BURST
;-------------------------------------------------------------------------------
[Statedef 694]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 694
poweradd = 0
velset = -3,0
sprpriority = 1

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Helper]		; Prevents using 2C for 40 frames
type = Helper
trigger1 = 1
helpertype = normal ;player
name = "Spam Deny"
ID = 6678
stateno = 6678
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, Mechanic]
type = PlaySnd
trigger1 = time = 0
value = S401,3
volumescale = 300
[State 0, LAZER]
type = PlaySnd
trigger1 = time = 9
value = S401,1
volumescale = 150

[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 4
value = -100
[State 0, VarSet]		;When Animelem = 4 is met, variable value changes to 0.
type = VarSet
trigger1 = Animelem = 4
v = 17
value = 0
[State 0, Helper]		;LEVEL 1 PROJECTILE
type = Helper
trigger1 = AnimElem = 5
helpertype = normal ;player
name = "698"
ID = 698
stateno = 698
pos = 50,-30
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = map(AbilityMultiplier)
size.yscale = map(AbilityMultiplier)
sprpriority = 5
inheritJuggle = 1


[State 200, End]		;Dash Cancel
type = Changestate
triggerall = helper(698), movecontact && time >= 24	;Helper movecontat, and over 5 frames.
triggerall = power >= 200
trigger1 = command = "FF"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
trigger1 = numhelper(6823) = 0
value = 101
ctrl = 0

[State 200, End]		;Idle
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-------------------------------------------------------------------------------
; Clutch C - Lvl 2 PROJECTILE
;-------------------------------------------------------------------------------
[Statedef 695]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 695
poweradd = 0
velset = -3,0
sprpriority = 1

[State 0, Mechanic]
type = PlaySnd
trigger1 = time = 0
value = S401,3
volumescale = 300
[State 0, LAZER]
type = PlaySnd
trigger1 = time = 9
value = S401,2
volumescale = 150

[State 0, PowerAdd]
type = PowerAdd
trigger1 = AnimElem = 4
value = -200
[State 0, VarSet]		;When Animelem = 4 is met, variable value changes to 0.
type = VarSet
trigger1 = Animelem = 4
v = 17
value = 0
[State 0, Helper]		;LEVEL 2 PROJECTILE
type = Helper
trigger1 = AnimElem = 5
helpertype = normal ;player
name = "699"
ID = 699
stateno = 699
pos = 50,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
size.xscale = 2
size.yscale = 2
sprpriority = 5
inheritJuggle = 1


[State 200, End]		;Dash Cancel
type = Changestate
triggerall = time >= 35	;Helper movecontat, and over 5 frames. it doesnt actually ask 
triggerall = power >= 200
trigger1 = command = "FF"
trigger1 = numhelper(6823) = 0
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 101
ctrl = 0



[State 200, End]		;Idle
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Clutch C - Lvl 3 BLAST
;-------------------------------------------------------------------------------
[Statedef 696]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 696
velset = -3,0
sprpriority = 1
poweradd = 0

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0

[State 0, Mechanic]
type = PlaySnd
trigger1 = time = 0
value = S401,3
volumescale = 300

[State 0, VarSet]		;When Animelem = 4 is met, variable value changes to 0.
type = VarSet
trigger1 = Animelem = 4
v = 17
value = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "701"
ID = 701
stateno = 701
pos = 485,-50
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
sprpriority = 5
inheritJuggle = 1



[State 200, End]		;Dash Cancel
type = Changestate
triggerall = time >= 42	;over 40 frames.
triggerall = power >= 200
trigger1 = command = "FF"
trigger1 = numhelper(6823) = 0
value = 101
ctrl = 0

[State 200, End]		;Idle
type = Changestate
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;===============================================================================
;----------------------------- C Lvl 0 Pew HELPER
;-------------------------------------------------------------------------------
[Statedef 697]
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 697
velset = 15,0
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 310, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = root,map(juggle) < 100
trigger1 = 1
attr = S, NP
damage = 35*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
hitsound = S3,1
sparkno = 0
guard.sparkno = 13000
guardsound = 6,10
ground.type = High
ground.slidetime = 15
ground.velocity = -8
airguard.velocity = -2,-1.5
air.velocity = -2.5,-1.5
air.fall = 1
fall.recover = 1
fall.recovertime = 25 + ifelse(enemy,movetype = A, 7,0)
Getpower = 0,0

pausetime = 0,17
ground.hittime = 13 + ifelse(enemy,movetype = A, 7,0)
air.hittime = 15 + ifelse(enemy,movetype = A, 7,0)
guard.pausetime = 0,15



[State 200, End]		;Die Hitspark
type = Changestate
trigger1 = movecontact
value = 703
[State 200, End]		;Die Wiff
type = Changestate
trigger1 = movecontact
trigger2 = time = 100
trigger3 = backedgebodydist < -50
value = 704
;-------------------------------------------------------------------------------
;----------------------C Level 1 - BURST HELPER
;-------------------------------------------------------------------------------
[Statedef 698]
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 698
poweradd = 0
velset = .5,0
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, EnvShake]		;Small camera shake post-guard.
type = EnvShake
trigger1 = Animelem = 1
time = 25
freq = 100
ampl = 2

[State 310, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = root,map(juggle) < 100
triggerall = enemy,map(hitOverride) = 0
trigger1 = 1
attr = S, NP
animtype  = Heavy
damage    = ifelse(enemy,movetype = A,130,65)*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
pausetime = ifelse(enemy,movetype = A,48,24),ifelse(enemy,movetype = A,48,24)
guard.pausetime = 24,18
sparkno = s623
guard.sparkno = 13000
sparkxy = -20,-5
hitsound   = 5,4
guardsound = 6,10
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = 18,5
guard.velocity = -8
airguard.velocity = -8,-2
air.velocity = 18,5
Fall = 1
Envshake.time = 30
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2getp1state = 0
p2facing = 1        ;Force to face p1
Fall.recovertime = 10

[State 310, Countered]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = root,map(juggle) < 100
trigger1 = enemy,map(hitOverride) = 1
attr = S, NP
animtype  = Heavy
damage    = 55*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
pausetime = 24,24
guard.pausetime = 24,18
sparkno = s623
guard.sparkno = 13000
sparkxy = -20,-5
hitsound   = 5,4

[State 200, End]	;Die
type = Destroyself
trigger1 = animtime = 0
;-------------------------------------------------------------------------------
;----------------------C Level 2 - Big Projectile HELPER
;-------------------------------------------------------------------------------
[Statedef 699]
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 699
poweradd = 0
velset = 12,0
sprpriority = 2

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, EnvShake]		;Small camera shake post-guard.
type = EnvShake
trigger1 = Animelem = 1
time = 25
freq = 100
ampl = 2

[state 407]
type = varset
trigger1 = time = 0
v = 20
value = 0
[state 407]
type = varadd
trigger1 = moveguarded = 1
v = 20
value = 1

[State 310, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
trigger1 = anim = 699 && (var(20) + hitcount) <= 5
trigger1 = 1
attr = S, NP
damage = 25*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 7,8
guard.pausetime = 7,8
sparkno = s301
sparkxy = -8,-5
guard.sparkno = 13000
sparkxy = 0,0
hitsound = S0,5
guardsound = 6,10
ground.type = High
ground.slidetime = 15 
ground.hittime = 20 + ifelse(enemy,movetype = A, 7,0)
guard.velocity = -3
ground.velocity = 0,-8
airguard.velocity = -3.5,-2.75
air.velocity = 0,-8
fall = 1
air.fall = 1
Getpower = 0,0
Fall.recover = 1
fall.recovertime = 52 + ifelse(enemy,movetype = A, 7,0)

envshake.time = 40
envshake.freq = 100
envshake.ampl = 2

[State 200, End]		;Die Hit
type = Changestate
trigger1 = hitcount >= 5
trigger2 = (var(20) + hitcount) >= 5
value = 703
[State 200, End]		;Die Wiff
type = Changestate
trigger1 = hitcount >= 5
trigger2 = (var(20) + hitcount) >= 5
trigger3 = time = 100
trigger4 = backedgebodydist < -50
value = 704
;-------------------------------------------------------------------------------
;----------------------C Level 3 - BLAST HELPER
;-------------------------------------------------------------------------------
[Statedef 701]
movetype= A
physics = N
juggle  = 0
ctrl = 0
anim = 701
poweradd = 0
velset = 0,0
sprpriority = 5

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, Damage Proration]
type = parentvaradd 
triggerall = hitcount = 8
trigger1 = AnimElem = 15
v = 11
ignorehitpause = 1
persistent = 0
value = 20

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S3,6
volumescale = 999

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 0
ignorehitpause = 1
[State 0, BindToRoot]
type = BindToRoot
trigger1 = root,stateno = 696
time = 1
facing = 0
pos = 485,-50
ignorehitpause = 1

[State 0, EnvShake]		;Small camera shake.
type = EnvShake
trigger1 = Animelem >= 7|| AnimElem = 14
time = 15
freq = 100
ampl = 2
[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 7||AnimElem = 8||AnimElem = 9||AnimElem = 10||AnimElem = 11||AnimElem = 12||AnimElem = 13
trigger1 = 1
attr = S, NP
animtype  = Heavy
damage    = 20*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 2,24
guard.pausetime = 2,20
sparkno = s301
sparkxy = -8,5
guard.sparkno = 13000
hitsound   = 5,4
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -6,-3
air.velocity = -6,-3
Fall = 1
Envshake.time = 30
ground.cornerpush.veloff = 0
Fall.recover = 0
[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 14
trigger1 = 1
attr = S, NA
animtype  = Heavy
damage    = 65*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 10,10
guard.pausetime = 10,8
guard.hittime = 10
airguard.hittime = 10
sparkno = s352
guard.sparkno = 13000
sparkxy = -50,0
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -6,-3
air.velocity = -6,-3
Fall = 1
Envshake.time = 30
ground.cornerpush.veloff = 0
Fall.recovertime = 60 + ifelse(enemy,movetype = A, 7,0)


[State 200, End]		;Die
type = Changestate
trigger1 = AnimTime = 0
value = 703
;-------------------------------------------------------------------------------
;--------------------------C Helper Changestate Die - Hitspark
[Statedef 703]
movetype= I
physics = N
ctrl = 0
anim = 703
velset = 0,0
sprpriority = -1

[State 200, End]
type = Destroyself
trigger1 = animtime = 0

;-------------------------------------------------------------------------------
; Clutch C - Aire
[Statedef 705]
type    = A
movetype= I
physics = A
juggle  = 2
ctrl = 0
anim = 705
poweradd = -100
sprpriority = 1

[State 0, Mechanic]
type = PlaySnd
trigger1 = time = 0
value = S400,3
volumescale = 300
[State 0, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "Spam Deny"
ID = 6678
stateno = 6678
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,0
volumescale = 50

[State 0, VelSet]
type = VelSet
triggerall = prevstateno != 610
trigger1 = AnimElem = 2
x = -2
y = -4

[State 0, VelSet]
type = VelSet
triggerall = prevstateno = 610
trigger1 = AnimElem = 2
x = -4
y = -6


[State 0, LAZER]
type = PlaySnd
trigger1 = time = 9
value = S400,0
volumescale = 150

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "Shots"
ID = 706
stateno = 706
pos = 40,5
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0



[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Clutch C - Aire: Shot
[Statedef 706]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 706
poweradd = 0
sprpriority = 2

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State 0, VelSet]
type = VelSet
trigger1 = 1
x = 10
y = 8

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = !movecontact
trigger1 = 1
attr = A, NP
animtype  = Medium
damage    = 9*map(AbilityMultiplier)
numhits = 0
hitflag = MAF
guardflag = MAF
pausetime = 0,5

[State 0, EnvShake]
type = EnvShake
trigger1 = pos y >= -2
trigger2 = frontedgebodydist < -50
time = 25
freq = 100
ampl = 2

[State 200, IF PROJECTILE WIFFS]
type = Changestate
trigger1 = pos y >= -2
trigger2 = frontedgebodydist <= 0
value = 707

[State 200, IF PROJECTILE HITS]
type = Changestate
trigger1 = movecontact
trigger2 = time = 100
value = 707
;--------------------------------
; Clutch C - Aire: Shot EXPLODE
[Statedef 707]
type    = S
movetype= A
physics = N
velset = 0,0
anim = 707
sprpriority = 2

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State 0, Counterhit Text Display]
type = LifebarAction
trigger1 = MoveCountered = 1 && root, map(_kbbsys_actionMoveCounteredFlag) = 0
spr = Const(MsgCounterHit), 0
snd = 25,0
persistent = 0

[State 0, Counterhit Map Modify]
type = RootMapSet
trigger1 = (MoveCountered = 1 && root,MoveCountered = 1) && root, map(_kbbsys_actionMoveCounteredFlag) = 0
map = "_kbbsys_actionMoveCounteredFlag"
value = 1

[State 0, Counterhit Map Reset]
type = RootMapSet
trigger1 = (MoveCountered = 0 && root,MoveCountered = 0) && root, map(_kbbsys_actionMoveCounteredFlag) = 1
map = "_kbbsys_actionMoveCounteredFlag"
value = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = animtime = 0
trigger2 = stateno = 706 && movecontact
[State 0, EnvShake]
type = EnvShake
trigger1 = Animelem = 1
time = 25
freq = 100
ampl = 2
[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 1
x = 10
[State 0, LAZER]
type = PlaySnd
trigger1 = time = 0
value = S300,2
volumescale = 100

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = A, NP
animtype  = Medium
damage    = 20*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 10,10
sparkno = s352
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-8
air.velocity = -2,-8
Fall = 1
Envshake.time = 10
Fall.recovertime = 35 + ifelse(enemy,movetype = A, 7,0)


;--------------------------------------------------------------
;-------------------------------------------------------------------------------
;--------------------------C Helper Changestate Die - 50 Frames
[Statedef 704]
movetype= I
physics = N
ctrl = 0
anim = 461
velset = 0,0
sprpriority = -1

[State 200, End]
type = Destroyself
trigger1 = animtime = 0


;===============================================================================
; Sword Moves:

;-------------------------------------------------------------------------------
; A - 1
[Statedef 2500]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 2500
poweradd = 0
velset = 0,0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3||animelem = 4||animelem = 5
x = 4
[State 0, VelSet]
type = VelSet
trigger1 = time = 5
x = 4.5


[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 100
channel = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 15*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF

pausetime = 10,10
ground.hittime  = 16 + ifelse(enemy,movetype = A, 7,0)
air.hittime  = 16 + ifelse(enemy,movetype = A, 7,0)
guard.pausetime = 10,10
guard.hittime  = 18

sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 16
ground.velocity = -2
guard.velocity = -4
air.velocity = -1.5,-1.5
Fall = 0
Envshake.time = 5

[State 200, SPECIAL 1 - Sword]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 1"
value = 21000

[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000

[State 200, SPECIAL 3 - SHANK BOMB]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 23000

[State 200, 2A]
type = ChangeState
Triggerall = prevstateno != 2700
Triggerall = movecontact
trigger1 = command = "a" ;Button to Press
trigger1 = command = "holddown" ;Button to Press
value = 2700

[State 200, 5AA]
type = ChangeState
Triggerall = movecontact
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
trigger1 = command = "a" ;Button to Press
value = 2510

[State 200, 5B]
type = ChangeState
Triggerall = movecontact
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
trigger1 = command = "b" ;Button to Press
value = 2600

[State 200, 5c]
type = ChangeState
triggerall = numhelper(3500) = 0
Triggerall = movecontact
triggerall = power >= 200
trigger1 = command = "c"
value = 2620

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; A - 2
[Statedef 2510]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 2510
poweradd = 100
velset = 0,0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 50
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,2
volumescale = 100


[State 0, VelSet]
type = VelSet
trigger1 = time = 7
x = 5

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 25*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF

pausetime = 10,10
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
air.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
guard.pausetime = 10,13
guard.hittime  = 15

sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12

ground.velocity = -2,-2
air.velocity = -2,-2
guard.velocity = -4
Fall = 0
Envshake.time = 10

[State 200, SPECIAL 1 - Sword]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 1"
value = 21000

[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000
[State 200, SPECIAL 3 - SHANK BOMB]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 23000



[State 200, 2A]
type = ChangeState
Triggerall = prevstateno != 2700
Triggerall = movecontact
trigger1 = command = "a" ;Button to Press
trigger1 = command = "holddown" ;Button to Press
value = 2700

[State 200, 5B]
type = ChangeState
Triggerall = movecontact
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
trigger1 = command = "b"
value = 2600

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;-------------------------------------------------------------------------------
; B - 1
[Statedef 2600]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 2600
velset = 0,0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 50
channel = 0



[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3
x = 5
y = 0
[State 0, VelSet]
type = VelSet
trigger1 = time = 5
x = 5.5



[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype = A
attr = S, NA
animtype  = Medium
damage    = 50*map(AbilityMultiplier)
hitflag = MAF
guardflag = M
pausetime = 24,50
ground.hittime  = 15
air.hittime  = 15
guard.pausetime = 12,15
guard.hittime  = 15
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.velocity = -4,0
air.velocity = -2.5,-1.5
Fall = 0
Envshake.time = 10

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype != A
attr = S, NA
animtype  = Medium
damage    = 25*map(AbilityMultiplier)
hitflag = MAF
guardflag = M

pausetime = 12,12
ground.hittime  = 15
air.hittime  = 15
guard.pausetime = 12,15
guard.hittime  = 15

sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = s5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.velocity = -4,0
air.velocity = -2.5,-1.5
Fall = 0
Envshake.time = 10

[State 200, SPECIAL 1 - Sword]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 1"
value = 21000

[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000
[State 200, SPECIAL 3 - SHANK BOMB]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 23000



[State 200, 5B]
type = ChangeState
Triggerall = movecontact
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
trigger1 = command = "b"
value = 2610

[State 200, 5c]
type = ChangeState
triggerall = numhelper(3500) = 0
Triggerall = movecontact
triggerall = power >= 200
trigger1 = command = "c"
value = 2620

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; B - 2
[Statedef 2610]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 2610
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = time = 0
x = 4
[State 0, PosAdd]
type = PosAdd
trigger1 = animelem = 3||animelem = 4
x = 7.5
[State 0, VelSet]
type = VelSet
trigger1 = time = 5
x = 3

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 50
channel = 0



[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype = A
attr = S, NA
animtype  = Heavy
damage    = 60*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF

pausetime = 32,32
ground.hittime  = 15
air.hittime  = 15
guard.pausetime = 16,20
guard.hittime  = 15

sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.velocity = -1.5,-6
air.velocity = -1.5,-6
Fall = 1
Envshake.time = 20
Fall.recover = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype != A
attr = S, NA
animtype  = Heavy
damage    = 30*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF

pausetime = 16,16
ground.hittime  = 15
air.hittime  = 15
guard.pausetime = 16,20
guard.hittime  = 15

sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = s5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.velocity = -1.5,-6
air.velocity = -1.5,-6
Fall = 1
Envshake.time = 20
Fall.recovertime = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

[State 200, SPECIAL 1 - Sword]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 1"
value = 21000

[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000
[State 200, SPECIAL 3 - SHANK BOMB]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 23000

[State 200, End]
type = ChangeState
Triggerall = movehit
trigger1 = command = "holdup"
trigger3 = command = "up"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 40

;-------------------------------------------------------------------------------
; C
[Statedef 2620]
type    = S
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 2620
poweradd = -200
velset = 0,0
sprpriority = 2


[State 0, Helper]
type = Helper
trigger1 = time%5.5 = 0  && numhelper(2621) < 10
trigger1 = time > 6 && time < 30
helpertype = normal ;player
name = "that"
ID = 2621
stateno = 2621
pos = 50,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0
inheritJuggle = 1

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 5

[State 200, A - 2]
type = ChangeState
Triggerall = helper(2621),movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "a"
value = 2510

[State 200, B - 2]
type = ChangeState
Triggerall = helper(2621),movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "b"
value = 2610

[State 200, SPECIAL 1 - Sword]
type = ChangeState
Triggerall = helper(2621),movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 1"
value = 21000
[State 200, DP SPECIAL]
type = ChangeState
Triggerall = helper(2621),movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 22000
[State 200, End]
type = ChangeState
Triggerall = var(10) = 1
Triggerall = time >= 10
Triggerall = power >= 1000
Triggerall = helper(2621),movecontact
triggerall = numhelper(3500) = 0
triggerall = numhelper(3500) = 0
trigger1 = command = "SPECIAL 3"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 23000

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;-----------------------------------------------------------------------------
; Sword C
[Statedef 2621]
type    = S
movetype= A
physics = U
juggle  = 2
ctrl = 0
anim = 2611
velset = 4.5
sprpriority = 2



[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0

[State 300, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = map(juggle) < 100
trigger1 = 1
attr = S, SP
animtype  = Light
damage    = 5*map(AbilityMultiplier)
hitflag = MAF
guardflag = M
pausetime = 0,15
ground.hittime  = 10 + ifelse(enemy,movetype = A, 10,0)
air.hittime = 30 + ifelse(enemy,movetype = A, 12,0)
guard.pausetime = 0,10
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,1
guardsound = 6,10
ground.type = Low
ground.slidetime = 9
guard.hittime  = 5
ground.velocity = -2.5,0
air.velocity = -3,-1
air.fall = 1
;ignorehitpause = 
;persistent =
[State 0, DestroySelf]
type = DestroySelf
trigger1 =  AnimTime = 0
;ignorehitpause = 
;persistent =  

;-------------------------------------------------------------------------------
; Low Attack
[Statedef 2700]
type    = C
movetype= A
physics = S
juggle  = 2
ctrl = 0
anim = 2700
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = 8

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 100
[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 100
channel = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
trigger1 = AnimElem = 4
attr = C, NA
animtype  = Heavy
damage    = 35*map(AbilityMultiplier)
hitflag = MAFD
guardflag = LAF
pausetime = 16,16
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,10
ground.type = Low
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -1.5,-5
air.velocity = -1,-5
Fall = 1
Envshake.time = 15

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000
[State 200, SPECIAL 3 - SHANK BOMB]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 23000

[State 200, End]
type = ChangeState
Triggerall = moveguarded
trigger1 = prevstateno !=2700
trigger1 = command = "holddown"
trigger1 = command = "a"
value = 2700

[State 200, 5bb]
type = ChangeState
Triggerall = movecontact
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
trigger1 = command = "b"
trigger3 = command = "hold_b"
value = 2610

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "up"
value = 40
;===============================================================================
; Overhead
[Statedef 2900]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 2900
poweradd = 0
sprpriority = 2

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 50

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = 2
y = -3

[State 0, VelAdd]
type = VelAdd
trigger1 = 1 
y = 0.2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = 10*map(AbilityMultiplier)
hitflag = MAF
guardflag = HAFD
pausetime = 12,18
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-55
hitsound   = S5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2
air.velocity = -2,-1
Fall = 0
Envshake.time = 10

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "s"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 66

[State 200, j5c]
type = ChangeState
triggerall = numhelper(3500) = 0
Triggerall = movecontact
triggerall = power >= 200
trigger1 = command = "c"
value = 2830

[State 200, End]
type = ChangeState
trigger1 = pos Y >= 0 && Vel Y > 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; A - Aire
[Statedef 2800]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 2800
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,1
volumescale = 50

[State 0, VelSet]
type = VelSet
trigger1 = movecontact = 1
y = -2
x = 2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Light
damage    = 15*map(AbilityMultiplier)
guardflag = HAF
pausetime = 12,12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
air.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
guard.pausetime = 12,8
guard.hittime  = 15
sparkno = 0
guard.sparkno = s7000
sparkxy = -8,-25
hitsound   = 5,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-4
air.velocity = -2,-4
Fall = 0
Envshake.time = 5
Fall.recovertime = 13 + ifelse(enemy,movetype = A, 7,0)

[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 2810

[State 200, End]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
value = 2830

;[State 200, End]
;type = ChangeState
;Triggerall = movecontact
;triggerall = numhelper(3500) = 0
;triggerall = numhelper(3500) = 0
;trigger1 = command = "holddown"
;trigger1 = command = "c"
;value = 2850

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup" && movecontact && var(3) = 0 
value = 45
ctrl = 1 

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; B - Aire
[Statedef 2810]
type    = A
movetype= A
physics = A
juggle  = 1
ctrl = 0
anim = 2810
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 50
channel = 0



[State 0, VelSet]
type = VelSet
trigger1 = movecontact = 1 
y = -2
x = 2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype = A
attr = A, NA
animtype  = Light
damage    = 30*map(AbilityMultiplier)
guardflag = HA

pausetime = 36,36
ground.hittime  = 15
air.hittime  = 15
guard.pausetime = 12,8
guard.hittime  = 15

sparkno = 15000
guard.sparkno = s7000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 37
ground.velocity = -2,-5
air.velocity = -2,-5
Fall = 1
Envshake.time = 24
Fall.recover = 0
Fall.recovertime = 37

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype != A
attr = A, NA
animtype  = Light
damage    = 15*map(AbilityMultiplier)
guardflag = HA

pausetime = 12,12
ground.hittime  = 15
air.hittime  = 15
guard.pausetime = 12,8
guard.hittime  = 15

sparkno = 15000
guard.sparkno = s7000
sparkxy = -8,-25
hitsound   = s5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 37
ground.velocity = -2,-5
air.velocity = -2,-5
Fall = 0
Envshake.time = 5
Fall.recovertime = 37

[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "b"
value = 2820

;[State 200, End]
;type = ChangeState
;triggerall = numhelper(3500) = 0
;Triggerall = movecontact
;triggerall = numhelper(3500) = 0
;trigger1 = command = "holddown"
;trigger1 = command = "c"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
;value = 2850

[State 200, End]
type = ChangeState
triggerall = numhelper(3500) = 0
Triggerall = movecontact
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && var(3) != 0 
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
value = 2830

[State 0, ChangeState]
type = ChangeState
triggerall = movecontact
trigger1 = command = "holdup" && var(3) = 0 
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && var(3) = 0 
value = 45
ctrl = 1 

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; B - Aire 2
[Statedef 2820]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 2820
poweradd = 0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, PowerAdd]
type = PowerAdd
triggerall = numhelper(51000) = 0
triggerall = numhelper(55000) = 0
triggerall = numhelper(56000) = 0
trigger1 = movecontact = 1
value = 50

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 50
channel = 0


[State 0, VelSet]
type = VelSet
trigger1 = movecontact = 1
y = -4
x = -2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype = A
attr = A, NA
animtype  = Up
damage    = 40*map(AbilityMultiplier)
hitflag = MAF
guardflag = HAF

pausetime = 24,36
ground.hittime  = 15
air.hittime  = 15
guard.pausetime = 12,11
guard.hittime  = 15

sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,2
air.velocity = -2,2
Fall = 1
fall.recovertime = 70
fall.xvelocity = -1.5
fall.yvelocity = -10
Envshake.time = 20

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = enemy,movetype != A
attr = A, NA
animtype  = Up
damage    = 20*map(AbilityMultiplier)
hitflag = MAF
guardflag = HAF

pausetime = 12,12
ground.hittime  = 15
air.hittime  = 15
guard.pausetime = 12,11
guard.hittime  = 15

sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = s5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,2
air.velocity = -2,2
Fall = 1
Envshake.time = 20
fall.recovertime = 50

[State 0, ChangeState]
type = ChangeState
triggerall = movecontact
trigger1 = command = "holdup"  && var(3) = 0
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 40
ctrl = 1 

[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000

;[State 200, End]
;type = ChangeState
;triggerall = numhelper(3500) = 0
;Triggerall = movecontact
;triggerall = numhelper(3500) = 0
;trigger1 = command = "holddown"
;trigger1 = command = "c"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
;value = 2850

[State 200, End]
type = ChangeState
triggerall = numhelper(3500) = 0
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 2830

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1
;-------------------------------------------------------------------------------
; C - Aire
[Statedef 2830]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 2830
poweradd = -300
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = time = 0
value = S2830,0
volumescale = 500

[State 0, Guard Count Reset]
type = MapSet
trigger1 = time = 0
map = "guardCount"
value = 0

[State 0, Guard Count Add]
type = MapAdd
trigger1 = moveguarded = 1
map = "guardCount"
value = 1


[State 0, State switch variable if canceled from j.6C or 6C]
type = VarAdd
trigger1 = (prevstateno = 526 || prevstateno = 5322)&& time = 0
v = 10
value = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 50
channel = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S200,2
volumescale = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S5,4
volumescale = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 9
value = S5,4
volumescale = 100

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 13
value = S5,4
volumescale = 100

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
y = -5
x = 1

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
trigger1 = AnimElem = 4
trigger2 = AnimElem = 5
trigger3 = AnimElem = 6
trigger4 = AnimElem = 7
trigger5 = AnimElem = 8
trigger6 = AnimElem = 9
trigger7 = AnimElem = 10
trigger8 = AnimElem = 11
trigger9 = AnimElem = 12
trigger10 = AnimElem = 13
trigger11 = AnimElem = 14
trigger12 = AnimElem = 15
trigger13 = AnimElem = 16
attr = A, NA
animtype  = Medium
damage    = ifelse((prevstateno = 526 || prevstateno = 5322), 4,3)*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 2,2
guard.pausetime = 2,2
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
guard.hittime = 6
airguard.velocity = -3,-2
guard.velocity = -4
ground.velocity = 1,-1
air.velocity = 1,-1
Fall = 1
Envshake.time = 5
Fall.recovertime = 50 + ifelse(enemy,movetype = A, 7,0)
guard.cornerpush.veloff = -5.25
airguard.cornerpush.veloff = -5.25

;[State 200, End]
;type = ChangeState
;triggerall = numhelper(3500) = 0
;triggerall = hitcount >= 4 || map(guardCount) >= 4
;trigger1 = command = "holddown"
;trigger1 = command = "c"
;trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
;value = 2850

[State 200, End]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
triggerall = hitcount >= 4 || map(guardCount) >= 4
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 2840

[State 200, Fall]
type = ChangeState
trigger1 = animtime = 0
value = 50
ctrl = 1

[State 200, LANDING LAG]
type = ChangeState
triggerall = command = "hold_b"
trigger1 = pos y >= -15
value = 2845
ctrl = 0

;-------------------------------------------------------------------------------
; C - Aire Finale
[Statedef 2840]
type    = A
movetype= A
physics = A
juggle  = 0
ctrl = 0
anim = 2840
poweradd = 0
sprpriority = 2

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,4
volumescale = 100
channel = 0

[State 0, VelSet]
type = VelSet
trigger1 = moveguarded = 1
y = -4
x = -2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = 30*map(AbilityMultiplier)
hitflag = MAF
guardflag = HA
pausetime = 12,12
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,5.5
air.velocity = -2,5.5
Fall = 1
Envshake.time = 20
fall.recover = 0
down.bounce = 1
fall.xvelocity = -2
fall.yvelocity = -6
p2stateno = 1000
p2getp1state = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 1
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = 30*map(AbilityMultiplier)
hitflag = MAF
guardflag = HA
pausetime = 12,12
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,1
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,5.5
air.velocity = -2,5.5
Fall = 1
Envshake.time = 20
fall.recover = 0
down.bounce = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000
;-------------------------------------------------------------------------------
; C - Aire LAND
[Statedef 2845]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 2845
velset = 2,0
poweradd = 0
sprpriority = 2
[State 0, PosSet]
type = PosSet
trigger1 = time = 0
y = 0
[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Up
damage    = 25*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 12,14
guard.pausetime = 12,19
guard.hittime = 30
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 17
ground.hittime  = 17
air.hittime = 20
ground.velocity = -2,-4
air.velocity = -2,-4
Envshake.time = 20
fall.recover = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

[State 200, SPECIAL 1 - Sword]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 1"
value = 21000
[State 200, DP SPECIAL]
type = ChangeState
Triggerall = movecontact
Triggerall = power >= 1000
triggerall = numhelper(3500) = 0
triggerall = numhelper(2860) = 0
trigger1 = command = "SPECIAL 2"
value = 24000
[State 200, SPECIAL 3 - SHANK BOMB]
type = ChangeState
triggerall = movehit
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 23000

[State 200, 5c]
type = ChangeState
triggerall = numhelper(3500) = 0
Triggerall = movecontact
triggerall = power >= 200
trigger1 = command = "c"
value = 2620

;-------------------------------------------------------------------------------
; sword extra grab startup
[Statedef 2895]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 2895
velset = 2,0
poweradd = 0
sprpriority = 2

[State 200, 5c]
type = ChangeState
triggerall = 1
trigger1 = AnimTime = 0
value = 700


; Switch Off: Barrage
;-------------------------------------------------------------------------------
[Statedef 23000]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 23000
velset = 0,0
sprpriority = 2
poweradd = -1000

[State 0, Busterable]
type = MapSet
trigger1 = 1
map = "busterable"
value = 1
ignorehitpause = 1

[State 0, enableDHC] ; Enables DHC and disables tag
type = MapSet
triggerall = teammode = tag
trigger1 = 1
map = "enableDHC"
value = 1

[State 0, SuperPause]
type = SuperPause
trigger1 = Time = 1
anim = 92006
time = 10
sound = 20,0
pos = 0,-20
movetime = 0
darken = 1
p2defmul = 1
poweradd = 0
endcmdbuftime = 7

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 16
x = 5
y = 0
ignorehitpause = 0

[State 200, 1]
type = HitDef
getpower = 0
trigger1 = AnimElem = 4
attr = S, SA
animtype  = Light
damage    = 20*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 8,30
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-1
air.velocity = -2,-1
Fall = 1
kill = 0

[State 200, 1]
type = HitDef
getpower = 0
trigger1 = AnimElem = 10
attr = S, SA
animtype  = Light
damage    = 20*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 8,20
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-1
air.velocity = -2,1
Fall = 0
kill = 0

[State 0, TargetBind]
type = TargetBind
triggerall = !moveguarded
trigger1 = AnimElem = 10 && movehit
time = 1
id = -1
pos = 75,-5
;ignorehitpause = 
[State 200, 1]
type = HitDef
getpower = 0
triggerall = hitcount < 2
trigger1 = AnimElem = 15
attr = S, SA
animtype  = Light
damage    = 20*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 10,10
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-1
air.velocity = -2,-1
Fall = 0
kill = 0
[State 0, TargetBind]
type = TargetBind
triggerall = !moveguarded
trigger1 = AnimElem = 15 && movehit
time = 1
id = -1
pos = 45,-5
;ignorehitpause = 
[State 200, 1]
type = HitDef
getpower = 0
triggerall = hitcount = 2
trigger1 = AnimElem = 15
attr = S, SA
animtype  = Light
damage    = 20*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MAF
pausetime = 10,100
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,-1
air.velocity = -2,-1
Fall = 0
kill = 0

[State 200, End]
type = ChangeState
trigger1 = hitcount = 3
value = 23005
ctrl = 1

[State 200, End]
type = ChangeState
triggerall = hitcount != 3
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Switch Off: Barrage Hop back
;-------------------------------------------------------------------------------
[Statedef 23005]
type    = A
movetype= I
physics = A
juggle  = 0
ctrl = 0
anim = 105
velset = 0,0
sprpriority = 2
poweradd = 0

[State 0, Busterable]
type = MapSet
trigger1 = 1
map = "busterable"
value = 1
ignorehitpause = 1

[State 0, enableDHC] ; Enables DHC and disables tag
type = MapSet
triggerall = teammode = tag
trigger1 = 1
map = "enableDHC"
value = 1

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 0, Helper]
type = Helper
trigger1 = AnimTime = 0
helpertype = normal ;player
name = "Power Delay"
ID = 56000
stateno = 56000
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 1
helpertype = normal ;player
name = "Sword Explody"
ID = 23010
stateno = 23010
pos = 0,0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

;[State 0, Helper]
;type = Helper
;trigger1 = AnimElem = 1
;helpertype = normal ;player
;name = "Spam Deny"
;ID =  23420
;stateno =  23420
;pos = 9999,9999
;postype = p1    ;p2,front,back,left,right
;facing = 1
;keyctrl = 0
;ownpal = 0
;supermovetime = 0
;pausemovetime = 0

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 1
x = -5
y = -5
ignorehitpause = 0

[State 200, End]
type = ChangeState
triggerall = AnimTime = 0
trigger1 = movecontact
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Switch Off: Barrage Hop 
;-------------------------------------------------------------------------------
[Statedef 23010]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 23001
velset = 0,0
sprpriority = 2
poweradd = 0

[State 0, Busterable]
type = MapSet
trigger1 = 1
map = "busterable"
value = 1
ignorehitpause = 1

[State 0, enableDHC] ; Enables DHC and disables tag
type = MapSet
triggerall = teammode = tag
trigger1 = 1
map = "enableDHC"
value = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 23015
ctrl = 1

;-------------------------------------------------------------------------------
; Switch Off: Barrage Hop 
;-------------------------------------------------------------------------------
[Statedef 23015]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 23005
velset = 0,0
sprpriority = 2
poweradd = 0

[State 0, Busterable]
type = ParentMapSet
trigger1 = 1
map = "busterable"
value = 1

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, PosAdd]
type = PosAdd
trigger1 = Time = 0
x = p2bodydist x + 30
y = -120

[State 200, 1]
type = HitDef
getpower = 0
Triggerall = !moveguarded
triggerall = hitcount < 15
trigger1 = 1
attr = S, SP
animtype  = Heavy 
damage    = 4*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MAF
pausetime = 2,4
sparkno = 9999
guard.sparkno = 9999
sparkxy = -8,-35
hitsound   = 5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0,-1
air.velocity = 0,-1
Fall = 0
Envshake.time = 5
fall.recover = 0
kill = 0

[State 200, 1]
type = HitDef
getpower = 0
trigger1 = AnimElem = 14
attr = S, SP
animtype  = Heavy
damage    = 30*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 12,12
sparkno = s299999
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -1.5,-10
air.velocity = -1,-10
Fall = 1
Envshake.time = 20
Fall.recover = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 23020
ctrl = 1
;-------------------------------------------------------------------------------
; Explody End
[Statedef 23020]
type    = S
movetype= I
physics = S
juggle  = 0
ctrl = 0
anim = 23016
velset = 0,0
sprpriority = -1

[State 200, End]
type = Destroyself
trigger1 = time = 0

; Switch On: DP
;-------------------------------------------------------------------------------
[Statedef 24000]
type    = A
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 24000
velset = 0,0
sprpriority = 2
poweradd = -1000

[State 0, Busterable]
type = MapSet
trigger1 = 1
map = "busterable"
value = 1
ignorehitpause = 1

[State 0, reversalMove]
type = MapSet
trigger1 = 1
map = "reversalMove"
value = 1
ignorehitpause = 1

[State 0, enableDHC] ; Enables DHC and disables tag
type = MapSet
triggerall = teammode = tag
trigger1 = 1
map = "enableDHC"
value = 1

[State 0, DP INVINCIBILLITY BABY]
type = NotHitBy
trigger1 = time =0
value = SCA,NA,SA,HA,NP,SP,HP,NT,ST,HT
time = 10

[State 0, VarSet]
type = VarSet
trigger1 = 1
v = 10
value = 1

[State 0, Helper]
type = Helper
trigger1 = AnimTime = 0
helpertype = normal ;player
name = "Power Delay"
ID = 56000
stateno = 56000
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0

[State 0, SuperPause]
type = SuperPause
trigger1 = Time = 1
anim = 92006
time = 10
sound = 20,0
pos = 0,-20
movetime = 0
darken = 1
p2defmul = 1
poweradd = 0
endcmdbuftime = 7

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 4
x = 2
y = -6
[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 6
statetype = A 
movetype = A
physics = A


[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,2
volumescale = 100
channel = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
trigger1 = 1
attr = A, SA
animtype  = Heavy
damage    = 70*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 18,18
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S5,3
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -1,-8
air.velocity = -1,-8
guard.velocity = -8
Fall = 1
fall.recovertime = 55 + ifelse(enemy,movetype = A, 7,0)
Fall.Recover = 1
Envshake.time = 25

[State 200, End]
type = ChangeState
trigger1 = AnimElem = 10
trigger1 = movehit
value = 50
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;=============================================================================
;The Wavedash Block
;-----------------------------------------------------------------------
;===============================================================================
; Glitch - Wavedash C
[Statedef 80010]
type    = A
movetype= A
physics = N
juggle  = 0
velset = 0,0
ctrl = 0
anim = 80010
poweradd = -100
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S5,2
volumescale = 100

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 688
ID = 688
pos = -5,-5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.7,0.7
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 1
value = S1,0
volumescale = 50

[State 0, VelSet]
type = VelSet
trigger1 = Time = 0
x = 3.75
y = -4.5

[State 0, VelAdd]
type = VelAdd
trigger1 = 1 
y = 0.33

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = 30*map(AbilityMultiplier)
hitflag = MAF
guardflag = HA
pausetime = 12,12
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = -2,3
air.velocity = -2,3
Fall = 1
Envshake.time = 20
Fall.recovertime = 40
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4

[State 200, SPECIAL 3 - CUTTER]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 26000
value = 390 

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "s"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 66

[State 200, Make it fakeble]
type = ChangeState
Triggerall = time < 18
trigger1 = command = "s"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 66

[State 200, j.2B]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "holddown"
trigger1 = command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 615

[State 300, End]
type = ChangeState
trigger1 = command = "c"
trigger1 = command = "holddown"
trigger1 = movecontact
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 460

[State 200, j.5C]
type = ChangeState
triggerall = movecontact
triggerall = numhelper(3500) = 0
triggerall = var(20) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 620

[State 200, End]
type = ChangeState
trigger1 = pos Y >= 0 && Vel Y > 0
value = 50
ctrl = 1

; Aege Wavedash C
;-------------------------------------------------------------------------------
 [Statedef 80020]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 80020
poweradd = -250
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 20
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State 0, Wallbounce prevent]
type = VarAdd
trigger1 = movehit = 1 && movecountered = 0 
v = 31
value = 1
ignorehitpause = 1

[State 0, Turn]
type = Turn
triggerall = var(43) != 1
trigger1 = p2dist x < 0 && time = 0

[State 0, VelSet if coming from wavedash]
type = VelSet
triggerall = vel x < const(velocity.run.fwd.x)
trigger1 = prevstateno = 30 && time = 0
x = const(velocity.run.fwd.x)

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 3
x = 8
[State 0, PosAdd]
type = PosAdd
trigger1 = Animelem = 3
x = 8 

[State 0, PlaySnd]
type = PlaySnd
trigger1 = Time = 1
value = S1,2
volumescale = 50


[State 0, VOICE - Cya!]
type = PlaySnd
triggerall = var(2)  >=50
triggerall = var(2)  <=80
trigger1 = AnimElem = 1
value = S4,1
volumescale = 150

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = var(43) != 1
triggerall = !movecontact
triggerall = enemy,map(hitOverride) = 0
triggerall = var(31) <= 0
trigger1 = 1
attr = S, NP
animtype  = Heavy 
damage    = ifelse(enemy,movetype = A,100,50)*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
pausetime = ifelse(enemy,movetype = A,30,4),ifelse(enemy,movetype = A,30,6)
guard.pausetime = 4,5
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-35
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 11
ground.hittime  = 13
ground.velocity = 18,5
guard.hittime  = 21
guard.slidetime = 25
guard.velocity = -10
air.velocity = 18,5
airguard.velocity = -18,-5
Fall = 1
Envshake.time = 30
p2stateno = 1025    ;Make p2 go to state 1025 on hit
p2getp1state = 0
p2facing = 1        ;Force to face p1

guard.cornerpush.veloff = -28
airguard.cornerpush.veloff = -28
;ground.cornerpush.veloff = -25
;air.cornerpush.veloff = -25

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
triggerall = !movecontact
trigger1 = var(31) >= 1
trigger2 = enemy,map(hitOverride) = 1
trigger3 = var(43) = 1
attr = S, NP
animtype  = Heavy 
damage    = 50*map(AbilityMultiplier)
Hitflag = MAF
guardflag = MAF
pausetime = 4,2
guard.pausetime = 4,8
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-35
hitsound   = 5,4
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 18,5
guard.hittime  = 21
guard.slidetime = 25
guard.velocity = -20
air.velocity = -18,-5
Fall = 1
Envshake.time = 30
guard.cornerpush.veloff = -32
airguard.cornerpush.veloff = -32

[State 200, Special 01 - Step back]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >=1000
trigger1 = command = "SPECIAL 1"
value = 23000
[State 200, Special 02 - COUNTER 01]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 2"
value = 22000
[State 200, Special 03 - OKI BALL]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 21000
[State 200, SPECIAL 4 - Sideswap kick]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 500
trigger1 = command = "SPECIAL 4"
value = 24000

[State 200, 2C]
type = ChangeState
Triggerall = Power >= 333
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger1 = command = "holddown"
value = 450

[State 200, Jump]
type = ChangeState
Triggerall = AnimTime = 0
trigger1 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && movecontact && var(3) = 0 
value = 40

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1




;===============================================================================
; Fly WD C - 1:
;-------------------------------------------------------------------------------
[Statedef 80030]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 80030
poweradd = -300
sprpriority = 1

[State 0, Shock]
type = PlaySnd
trigger1 = time = 0
value = S400,3
volumescale = 100
[State 0, Swing]
type = PlaySnd
trigger1 = animelem = 2
value = S400,0
volumescale = 999
[State 0, Swing2]
type = PlaySnd
trigger1 = animelem = 2
value = S400,1
volumescale = 100
[State 0, Shuriken]
type = PlaySnd
trigger1 = animelem = 3
value = S400,2
volumescale = 200


[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 4
x = 5.5
[State 0, Velset]
type = Velset
trigger1 = AnimElem = 4
x = 3

[State 0, AfterImage]
type = AfterImage
trigger1 = AnimElem = 1
time = 10
trans = add

[State 1020, Blink Yellow]
type = PalFX
trigger1 = Time = 0
time = 20
add = 32,16,0
sinadd = 0,71,158,3

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 550
pos = 0,-15
postype = p1  ;p2,front,back,left,right
bindtime = 1
pausemovetime = 0
scale = 1,1
sprpriority = 3

[State 0, C - Start]
type = Helper
trigger1 = animelem = 4
helpertype = normal
name = "C - Start"
ID = 485
stateno = 80031
pos = 25,-15
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 0, C - Start]
type = Helper
trigger1 = animelem = 6
trigger1 = var(15) = 1
helpertype = normal
name = "C - Start"
ID = 485
stateno = 80031
pos = 25,-15
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
inheritjuggle = 1

[State 200, End]
type = ChangeState
triggerall = helper(450),movehit
trigger1 = command = "holdup"
value = 0
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[State 0, LifeAdd]	; Fly hurts himself each time he uses shurikens in lore.
type = LifeAdd
triggerall = var(16) = 0
trigger1 = AnimElem = 3
value = -10
kill = 0

[State 0, LifeAdd]	; Fly hurts himself each time he uses shurikens in lore. But we did some tomfoolery post quizzing Redye. Thanks man
type = LifeAdd
triggerall = var(16) = 1
trigger1 = AnimElem = 3
value = -5
kill = 0
;-------------------------------------------------------------------------------
; Fly WD C - Start
[Statedef 80031]
type    = S
movetype= A
physics = N
juggle  = 1
ctrl = 0
anim = 80031
sprpriority = 3

[State 0, AttackDist]
type = AttackDist
trigger1 = 1
value = 60

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, Explod]
type = Explod
trigger1 = time = 0
anim = 488
ID = 488
pos = 0,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 40
pausemovetime = 0
scale = 0.3,0.3
sprpriority = 3
ontop = 0
shadow = 0,0,0
ownpal = 1
ignorehitpause = 0

[state 450]
type = velset
trigger1 = time = 0
x = 4
y = -10
[state 450]
type = veladd
trigger1 = time > 4
y = -0.2
x = -0.7

[State 0, AfterImage]
type = AfterImage
trigger1 = animelem = 1
time = 20
trans = add


[State 200, 1]
type = HitDef
getpower = 0
triggerall = root,map(juggle) < 100 || hitcount != 0
triggerall = !moveguarded
triggerall = hitcount < 4
triggerall = time < 40
trigger1 = 1
attr = S, NP
animtype  = Heavy 
damage    = 17*map(AbilityMultiplier), 5*map(AbilityMultiplier)
guard.kill = 0
Hitflag = MAF
guardflag = MAF
pausetime = 4,4
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S5,0
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 10 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-6
ground.hittime  = 20
air.hittime  = 25 + ifelse(enemy,movetype = A, 7,0)
air.velocity = -2,-5
Fall = 1
Fall.recovertime = 30
Envshake.time = 5
Getpower = 0,0

[State 200, End]
type = Changestate
trigger1 = pos y > 0
trigger2 = time = 200
value = 65045


; Max Wavedash C: tossing Grenade Up
;-------------------------------------------------------------------------------
[Statedef 80040]
type    = S
movetype= A
physics = S
ctrl = 0
anim = 495
poweradd = -200
sprpriority = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S4,0

[State 0, VelSet]
type = VelSet
trigger1 = Animelem = 2
x = 3

[State 0, VelSet if coming from wavedash]
type = VelSet
trigger1 = prevstateno = 30 && time = 0
x = const(velocity.run.fwd.x)

[State 0, Swing]
type = PlaySnd
trigger1 = time = 0
value = S1,4
volumescale = 100

[State 0, Helper Summon]
Type = Helper
triggerall = numhelper(496) = 0
trigger1 = AnimElem = 2
name = "Wavedash C Granade"
ID = 496
stateno = 80031
pos = 25,-10
postype = p1
facing = 1
keyctrl = 0
ownpal = 1
size.xscale = 1
size.yscale = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;Max Wavedash C: Grenade
;------------------------------------------------------------------------------
[Statedef 80041]
type = A
movetype= A
physics = N
anim = 496
sprpriority = 2

[State 635, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,HA,NP,SP,HP
p1stateno = 459

[State 490, VelSet]
type = VelSet
trigger1 = time = 0
x = 5
y = -5.5

[State 490, VelAdd]
type = VelAdd
trigger1 = pos y < 0
y = 0.44

[State 490, Land]
type = VelSet
trigger1 = pos y >= 0
y = 0

[State 490, LandPos]
type = PosSet
trigger1 = pos y >= 0
y = 0

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = pos y >= 0 && statetype = A
statetype = S
movetype = A
physics = S

[State 0, ScreenBound]	;Don't leave screen pls
type = ScreenBound
trigger1 = Time = [1,100]
value = 1
movecamera = 0,0

[State 632, HitDef Code Going up] 
type = HitDef
triggerall = vel y <= 0
trigger1 = !movecontact
attr = A, NP
damage = 5*map(AbilityMultiplier)
guardflag = MA
hitflag = MAFD 
pausetime = 1,5
guard.pausetime= 0,3
sparkxy = 10,-15
sparkno = s6051
hitsound   = 5,1
guardsound = 6,10
ground.slidetime = 2
ground.hittime  = 5
ground.velocity = -3
air.velocity = -2.5,2 
forcestand = 1

[State 632, HitDef Code Going Down] 
type = HitDef
triggerall = vel y > 0
trigger1 = !movecontact
attr = A, NP
damage = 5*map(AbilityMultiplier)
guardflag = HA
hitflag = MAFD 
pausetime = 1,5
guard.pausetime= 0,3
sparkxy = 10,-15
sparkno = s6051
hitsound   = 5,1
guardsound = 6,10
ground.slidetime = 2
ground.hittime  = 5
ground.velocity = -3
air.velocity = -2.5,2 
forcestand = 1

[State 632, VelSet]
type = VelSet
trigger1 = movecontact
x = 2.5
y = -4

[State 632, End]
type = ChangeState
trigger1 = movecontact
value = 80043

[State 632, End]
type = ChangeState
trigger1 = vel y > 0 && pos y >= -10
value = 80042


;Down + C Air: Grenade IDLE
;------------------------------------------------------------------------------
[Statedef 80042]
Type = S
movetype= I
physics = N
anim = 497
sprpriority = 2

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,HA,NP,SP,HP
p1stateno = 660



[State 634, StateTypeSet]
type = StateTypeSet
trigger1 =  pos y >= -10
statetype = S       ;S,A,C,L
movetype = I        ;I,A,H
physics = S         ;A,C,S,N
[State 634, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0
[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 27||animelem = 30
value = S4,9
volumescale = 80
[State 0, ScreenBound]	;Don't leave screen pls
type = ScreenBound
trigger1 = Time = [1,100]
value = 1
movecamera = 0,0

[State 634, End]	;EXPLODE
type = ChangeState
trigger1 = AnimTime = 0
value = 498

;Down + C Air: Grende Post Hit
;------------------------------------------------------------------------------ 
[Statedef 80043]
Type = S
movetype= A
physics = N
anim = 497
sprpriority = 2

[State 0, VelAdd]
type = VelAdd
trigger1 = 1
y = .4

[State 0, VelSet]
type = VelSet
trigger1 = pos y >= 0
x = 0
y = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 27||animelem = 30
value = S4,9
volumescale = 80

[State 635, PosSet]
type = PosSet
trigger1 =  pos y >= 0
y = 0

[State 0, ScreenBound]	;Don't leave screen pls
type = ScreenBound
trigger1 = Time = [1,100]
value = 1
movecamera = 0,0

[State 0, ReversalDef]
type = ReversalDef
trigger1 = 1
reversal.attr = SCA,NA,SA,HA,NP,SP,HP
p1stateno = 660



[State 635, End]	;EXPLODE
type = ChangeState
trigger1 = AnimTime = 0
value = 498

;Down + C: Grenade Hit
;--------------------------------------------------------------------------------



;-------------------------------------------------------------------------------
; Noll Wavedash C
[Statedef 80050]
type    = S
movetype= A
physics = S
juggle  = 0
anim = 80050
sprpriority = 2
ctrl = 0

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State 0, PowerAdd]
type = PowerAdd
triggerall = prevstateno != 23000
trigger1 = AnimElem = 3
value = -250

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 1
id = 23500

[State 0, PlaySnd]
type = PlaySnd
triggerall = numhelper(401) = 0
triggerall = numhelper(402) = 0
trigger1 = AnimElem = 1
value = S7,3
volumescale = 999
channel = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = numhelper(401) = 0
triggerall = numhelper(402) = 0
trigger1 = AnimElem = 1
value = S7,3
volumescale = 999
channel = 1

[State 0, AURA EFFECT]
type = Explod
trigger1 = Animelem = 1
anim = 1007
pos = 0,-8
postype = p1  ;p2,front,back,left,right
scale = 0.35,0.35
sprpriority = 2

[State 0, Remove AURA]
type = RemoveExplod
trigger1 = time = 100

[State 0, Spiral]
type = PlaySnd
trigger1 = animelem = 2
value = S450,0
volumescale = 200
[State 0, Helper]
type = Helper
trigger1 = Animelem = 3
helpertype = normal
name = "HELPER"
ID = 80051
stateno = 80051
pos = 35,-20
postype = p1
size.xscale = map(AbilityMultiplier)
size.yscale = map(AbilityMultiplier)
facing = -1
sprpriority = 5
inheritJuggle = 1

[State 200, SPECIAL 1 - Hammer]
type = ChangeState
Triggerall = helper(80051), movehit
triggerall = time >= 40
triggerall = numhelper(3500) = 0
Triggerall = power >= 1500
trigger1 = command = "SPECIAL 2"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 22000

[State 200, SPECIAL 3 - CRASH]
type = ChangeState
Triggerall = helper(80051), movehit
triggerall = time >= 40
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 4"
value = 27000

[State 200, SPECIAL 5 - Spit out]
type = ChangeState
Triggerall = helper(80051), movehit
triggerall = time >= 40
triggerall = numhelper(3500) = 0
Triggerall = power >= 500
trigger1 = var(19)  > 0
trigger1 = command = "SPECIAL 5"
value = 20000

[State 200, End]
type = ChangeState
trigger1 = animtime = 0
value = 0
ctrl = 1

;-------------------------------------------------------------------------------
; Noll Wavedash C Helper
[Statedef 80051]
type    = S
movetype= A
physics = N
juggle  = 0
anim = 80051
sprpriority = 3




[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State 0, Busterable]
type = ParentMapSet
trigger1 = 1
map = "busterable"
value = 1
ignorehitpause = 1

[State 0, Guard Count Reset]
type = MapSet
trigger1 = time = 0
map = "guardCount"
value = 0


[State 0, Guard Count Add]
type = MapAdd
trigger1 = moveguarded = 1
map = "guardCount"
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = !moveguarded
triggerall = hitcount < 8
trigger1 = movecontact
time = 1
id = -1
pos = 0,10

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -7
y = -0.25

[State 0, VelAdd]
type = VelSet
trigger1 = time > 0
x = vel x * 0.95
y = vel y * 0.95

[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 1 || AnimElem = 2 || AnimElem = 3 || AnimElem = 4
trigger1 = 1
attr = S, SP
animtype  = Medium
damage    = 5*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 5,6
sparkno = s1002
guard.sparkno = 13000
guard.kill = 0
sparkxy = -8,-25
hitsound   = S4,1
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0, -1
air.hittime = 60
air.velocity = 0,-1
fall = 1
fall.recovertime = 70
Envshake.time = 10

[State 0, ChangeState]
type = ChangeState
trigger1 = hitcount >= 5 || map(guardCount) >= 3
trigger2 = time >= 30
value = 503
ctrl = 0


;-------------------------------------------------------------------------------
; Noll J.2C
[Statedef 80055]
type    = A
movetype= A
physics = A
juggle  = 0
anim = 80050
sprpriority = 1
ctrl = 0

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State 0, PowerAdd]
type = PowerAdd
triggerall = prevstateno != 23000
trigger1 = AnimElem = 3
value = -250

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = vel x * 0.25
y = vel y * 0.25

[State 0, RemoveExplod]
type = RemoveExplod
trigger1 = AnimElem = 1
id = 23500

[State 0, PlaySnd]
type = PlaySnd
triggerall = numhelper(631) = 0
trigger1 = AnimElem = 1
value = S7,3
volumescale = 999
channel = 1

[State 0, PlaySnd]
type = PlaySnd
triggerall = numhelper(631) = 0
trigger1 = AnimElem = 1
value = S7,3
volumescale = 999
channel = 1

[State 0, AURA EFFECT]
type = Explod
trigger1 = Animelem = 1
anim = 1007
pos = 0,-8
postype = p1  ;p2,front,back,left,right
scale = 0.35,0.35
sprpriority = 2

[State 0, Remove AURA]
type = RemoveExplod
trigger1 = time = 100

[State 0, Spiral]
type = PlaySnd
trigger1 = animelem = 2
value = S450,0
volumescale = 200
[State 0, Helper]
type = Helper
trigger1 = Animelem = 3 && numhelper(80056) = 0
helpertype = normal
name = "HELPER"
ID = 80056
stateno = 80056
pos = 35,-15
postype = p1
size.xscale = map(AbilityMultiplier)
size.yscale = map(AbilityMultiplier)
facing = -1
sprpriority = 5
inheritJuggle = 1

[State 0, Spam Deny]
type = Helper
trigger1 = Animelem = 3 && numhelper(80057) = 0
helpertype = normal
name = "HELPER"
ID = 80057
stateno = 80057
facing = -1
sprpriority = 5
inheritJuggle = 0

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup" && movecontact && var(3) = 0 
value = 45
ctrl = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------------------------------------------------------------------
; Noll J.2C Helper
[Statedef 80056]
type    = A
movetype= A
physics = N
juggle  = 2
anim = 80051
sprpriority = 3

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8


[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded
;ignorehitpause = 
;persistent = 

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit
;ignorehitpause = 
;persistent = 

[State 0, Busterable]
type = ParentMapSet
trigger1 = 1
map = "busterable"
value = 1
ignorehitpause = 1

[State 0, Guard Count Reset]
type = MapSet
trigger1 = time = 0
map = "guardCount"
value = 0


[State 0, Guard Count Add]
type = MapAdd
trigger1 = moveguarded = 1
map = "guardCount"
value = 1

[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0

[State 1010, Helper Attack Scale]
type = AttackMulSet
trigger1 = 1
value = 1 * 0.99**root,var(11)
ignorehitpause = 1

[State 0, TargetBind]
type = TargetBind
triggerall = !moveguarded
triggerall = hitcount < 8
trigger1 = movecontact
time = 1
id = -1
pos = 0,10

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = -root,vel x - 4
y = root,vel y * 1

[State 0, VelAdd]
type = VelSet
trigger1 = time > 0
x = vel x * 0.95
y = vel y * 0.95

[State 0, VelSet]
type = VelSet
trigger1 = pos y > -5
y = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = AnimElem = 1 || AnimElem = 2 || AnimElem = 3 || AnimElem = 4
trigger1 = 1
attr = S, SP
animtype  = Medium
damage    = 4*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 5,6
sparkno = s1002
guard.sparkno = 13000
guard.kill = 0
sparkxy = -8,-25
hitsound   = S4,1
guardsound = 6,0
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
ground.velocity = 0, -1
air.hittime = 60
air.velocity = 0,-1
fall = 1
fall.recovertime = 70
Envshake.time = 10

[State 0, ChangeState]
type = ChangeState
trigger1 = hitcount = 5 || map(guardCount) >= 3
trigger2 = time >= 30
value = 503
ctrl = 0

;-------------------------------------------------------------------------------
; j.2C Spam Deny
[Statedef 80057]
type    = S
movetype= A
physics = S
anim = 9999
poweradd = 0
velset = 0,0
sprpriority = 1
ctrl = 0

[State 0, DestroySelf]
type = DestroySelf
trigger1 = Time = 150
trigger2 = parent,movetype = H


;-------------------------------------------------------------------------------
; Wavedash C
[Statedef 80060]
type    = C
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 80060
poweradd = -100
velset = 0,0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S1,3
volumescale = 100
[State 0, Gust]
type = PlaySnd
trigger1 = AnimElem = 2
value = S400,0
volumescale = 100

[State 0, PosAdd]
type = PosAdd
trigger1 = AnimElem = 2
x = 0
y = -2

[State 0, VelSet]
type = VelSet
trigger1 = time = (5, 11)
x = 9
y = -6

[State 0, VelSet]
type = VelSet
trigger1 = time = (12, 14)
x = 8
y = -5

[State 0, VelSet]
type = VelSet
trigger1 = time = (15, 17)
x = 6
y = -3.5

[State 0, VelSet]
type = VelSet
trigger1 = time = 18
x = 5
y = -3

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 2
statetype = A       ;S,A,C,L
movetype = A       ;I,A,H
physics = A         ;A,C,S,N

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = F61
ID = 19000
pos = 0,10
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.7,0.7
sprpriority = 2

[State 0, Explod]
type = Explod
trigger1 = time = 5
anim = 451
pos = 0,0
ontop = 1
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,-1
pausemovetime = 0
scale = 0.5,0.5
sprpriority = 2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Up
damage    = 20*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = 12,12
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
guard.hittime = 11
ground.velocity = -3, -5
air.velocity = -3,-2
Fall = 0
Envshake.time = 10

[State 200, Jump]
type = ChangeState
Triggerall = movehit || time >= 15
trigger1 = command = "up" && ailevel = 0
value = 45

[State 200, AirDash]
type = ChangeState
triggerall = movehit || time >= 15
trigger1 = command = "FF"
value = 65

[State 200, AirDash]
type = ChangeState
triggerall = movehit || time >= 15
trigger1 = command = "BB"
value = 70

[State 200, AirDash]
type = ChangeState
triggerall = movehit || time >= 15
trigger1 = command = "s"
value = 66

[State 200, SPECIAL 3 - CUTTER]
type = ChangeState
Triggerall = movecontact || time >= 15
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 26000

[State 200, wdC1a]
type = ChangeState
Triggerall = movecontact || time >= 15
trigger1 = command = "holdback" && command = "holddown"
trigger1 = command = "c"
value = 80064

[State 200, wdC2a]
type = ChangeState
Triggerall = movecontact || time >= 15
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 80062

[State 200, wdC6a]
type = ChangeState
Triggerall = movecontact || time >= 15
trigger1 = command = "holdfwd"
trigger1 = command = "c"
value = 80061

[State 200, wdC4a]
type = ChangeState
Triggerall = movecontact || time >= 15
trigger1 = command = "holdback"
trigger1 = command = "c"
value = 80065

[State 200, j.C]
type = ChangeState
Triggerall = movecontact || time >= 15
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
value = 620

[State 200, End]
type = ChangeState
Triggerall = movecontact || time >= 15
trigger1 = command = "a" ;Button to Press
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 600 ;State Number of the animation to use

[State 200, End]
type = ChangeState
Triggerall = movecontact || time >= 15
trigger1 = command = "holddown"
trigger1 = command = "b"
value = 611

[State 200, End]
type = ChangeState
Triggerall = movecontact || time >= 15
trigger1 = command = "b"
value = 610

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-----------------------------------------------------------------------------------
;WD C - Fwd Follow Up
[Statedef 80061]
type = A
movetype = A
physics = A
ctrl = 0
anim = 80061
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,3
volumescale = 100
[State 0, Gust]
type = PlaySnd
trigger1 = AnimElem = 3
value = S400,0
volumescale = 100

[State 0, VelSet]
type = VelSet
trigger1 = time = (8, 13) && !movecontact
x = 10
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = moveguarded
x = -2
y = -3

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = map(juggle) < 100 || hitcount != 0
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = ifelse(enemy,movetype = A,60,40)*map(AbilityMultiplier)
hitflag = MAFD
guardflag = HA
pausetime = ifelse(enemy,movetype = A,48,24),ifelse(enemy,movetype = A,48,24)
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,3)
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 999
air.hittime = 999
fall = 1
fall.recover = ifelse(enemy,movetype = A,0,1)
Fall.recovertime = 40
ground.velocity = -3,-7
air.velocity = -3,-7
p2facing = 1
Envshake.time = 20

[State 0, ChangeState]
type = ChangeState
triggerall = movecontact && var(3) = 0
trigger1 = command = "holdup" 
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 45
ctrl = 1

[State 200, SPECIAL 3 - CUTTER]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 26000

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 600

[State 200, End]
type = ChangeState
Triggerall = movecontact
trigger1 = command = "b"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 610

[State 200, End]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = numhelper(420) < 1
triggerall = command = "holddown"
triggerall = power >= 200
trigger1 = command = "c"
value = 460

[State 491, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------------
;WD C - Down Follow Up
[Statedef 80062]
type = A
movetype = A
physics = N
juggle = 2
ctrl = 0
anim = 80062
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Gust]
type = PlaySnd
trigger1 = AnimElem = 3
value = S400,0
volumescale = 100

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = vel x * 0.25
y = vel y * 0.25

[State 0, VelSet]
type = VelSet
trigger1 = time >= 10
x = 0
y = 12

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = map(juggle) < 100 || hitcount != 0
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = ifelse(enemy,movetype = A,60,40)*map(AbilityMultiplier)
hitflag = MAF
guardflag = HA
pausetime = ifelse(enemy,movetype = A,48,12),ifelse(enemy,movetype = A,48,12)
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,3)
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
air.hittime = 15
fall = 1
fall.recover = ifelse(enemy,movetype = A,0,1)
Fall.recovertime = 40
fall.yvelocity = ifelse(enemy,movetype = A, -7, -2)
ground.velocity = 0,10
air.velocity = 0,10
Envshake.time = 20

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup" && movecontact && var(3) = 0
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && movecontact && var(3) = 0 
value = 45
ctrl = 1

[State 200, SPECIAL 3 - CUTTER]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 26000

[State 492, End]
type = ChangeState
trigger1 = pos y > 0
value = ifelse(movehit,52,80063)
ctrl = 0


;-------------------------------------------------------------------------------
; Custom Land
[Statedef 80063]
type = S
movetype = I
physics = S
ctrl = 0
anim = 80063
sprpriority = 2

[State 0, PosSet]
type = PosSet
trigger1 = 1
y = 0

[State 0, VelSet]
type = VelSet
trigger1 = 1
y = 0

[State 493, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------------
;WD C - DownBack Follow Up
[Statedef 80064]
type = A
movetype = A
physics = N
juggle = 2
ctrl = 0
anim = 80064
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = parentvaradd 
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 8

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 3
value = S1,3
volumescale = 100
[State 0, Gust]
type = PlaySnd
trigger1 = AnimElem = 3
value = S400,0
volumescale = 100

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = vel x * 0.25
y = vel y * 0.25

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = -8
y = 8

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = map(juggle) < 100 || hitcount != 0
trigger1 = 1
attr = A, NA
animtype  = Up
damage    = ifelse(enemy,movetype = A,80,45)*map(AbilityMultiplier)
hitflag = MAF
guardflag = HA
pausetime = ifelse(enemy,movetype = A,48,12),ifelse(enemy,movetype = A,48,12)
guard.pausetime = 12, 10
sparkno = 2
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,3)
guardsound = 6,11
ground.type = High
ground.slidetime = 12
ground.hittime  = 15
air.hittime = 15
fall = 1
fall.recover = ifelse(enemy,movetype = A,0,1)
Fall.recovertime = 40
fall.yvelocity = ifelse(enemy,movetype = A, -7, -2)
ground.velocity = 2,5
air.velocity = 2,10
Envshake.time = 20

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup" && movecontact && var(3) = 0
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && movecontact && var(3) = 0 
value = 45
ctrl = 1

[State 200, SPECIAL 3 - CUTTER]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 26000

[State 494, End]
type = ChangeState
trigger1 = pos y > 0
value = ifelse(movehit,52,80063)
ctrl = 0

; WD C = Back Follow Up:
;-------------------------------------------------------------------------------
[Statedef 80065]
type    = A
movetype= A
physics = A
juggle  = 2
ctrl = 0
anim = 80065
sprpriority = 1

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 0, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 3

[State 0, VelSet]
type = VelSet
trigger1 = time = 0
x = vel x * 0.25
y = vel y * 0.25

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 3
x = -2

[State 0, PlaySnd]
type = PlaySnd
trigger1 = animelem = 2
value = S400,1
volumescale = 150
[State 0, Explod]
type = Explod
trigger1 = AnimElem = 3
anim = 80066
pos = 15,0
ontop = 1
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,-1
pausemovetime = 0
scale = 0.6,0.5
sprpriority = 2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = 45*map(AbilityMultiplier)
hitflag = MAF
guardflag = HA
pausetime = 10,10
sparkno = 9999
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = S0,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 999
air.hittime = 999
ground.velocity = 8,2
air.velocity = 8,2
Envshake.time = 5
fall = 1
p2stateno = 1025
fall.recovertime = 40

[State 200, SPECIAL 3 - CUTTER]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 26000

[State 0, ChangeState]
type = ChangeState
trigger1 = command = "holdup" && movecontact && var(3) = 0 && map(superJumped) = 0
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && movecontact && var(3) = 0
value = 45
ctrl = 1

[State 0, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1


;-------------------------------------------------------------------------------
; Jodie Wavedash C
[Statedef 80070]
type    = C
movetype= A
physics = C
juggle  = 1
ctrl = 0
anim = 80070
poweradd = -200
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Sound]
type = PlaySnd
trigger1 = AnimElem = 2
value = S400,0
volumescale = 500


[State 0, AfterImage]
type = AfterImage
triggerall = numhelper(51000) = 0
trigger1 = time = (4,21)
time = 1
length = 20
trans = add

[State 0, VelSet]
type = VelSet
trigger1 = Time = (4,6)
x = 10

[State 0, VelSet]
type = VelSet
trigger1 = Time = (7,10)
x = 8

[State 0, VelSet]
type = VelSet
trigger1 = Time = (11,14)
x = 6

[State 0, VelSet]
type = VelSet
trigger1 = time = 22
x = 2

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
trigger1 = AnimElem = 3 || AnimElem = 4 || AnimElem = 5 || AnimElem = 6
trigger2 = AnimElem = 7 || AnimElem = 8 || AnimElem = 9 || AnimElem = 10
attr = S, NA
animtype  = Medium
damage    = 4*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAF
pausetime = 2,2
guard.pausetime = 2,2
sparkno = 15000
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,3
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
ground.velocity = -2,-2
air.velocity = -2,-1
Fall = 0
Envshake.time = 5

[State 200, SPECIAL 1 - Sword]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 1"
value = 21000

[State 200, SPECIAL 1 - Hammer]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1500
trigger1 = command = "SPECIAL 2"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 22000

[State 200, SPECIAL 3 - CRASH]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 4"
value = 27000

[State 200, SPECIAL 5 - Spit out]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 500
trigger1 = var(19)  > 0
trigger1 = command = "SPECIAL 5"
value = 20000

[State 200, AA]
type = ChangeState
triggerall = movecontact
trigger1 = command = "a"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 523
ctrl = 0

[State 200, B]
type = ChangeState
triggerall = movecontact
trigger1 = command = "b"
value = 524
ctrl = 0

[State 200, C]
type = ChangeState
triggerall = movecontact || time >= 12
triggerall = power >= 200
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 525
ctrl = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 10
ctrl = 1


;===============================================================================
; Yoru Wavedash C:
;-------------------------------------------------------------------------------
[Statedef 80080]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 80080
poweradd = -250
velset = ifelse(prevstateno = 590, -2, 6),0
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 2
value = S400,0
volumescale = 200

[State 0, Voice - Grunt 5!]
type = PlaySnd
triggerall = var(2)  >=0
triggerall = var(2)  <=25
trigger1 = AnimElem = 1
value = S10,10
volumescale = 200
[State 0, Voice - Grunt 6!]
type = PlaySnd
triggerall = var(2)  >=26
triggerall = var(2)  <=50
trigger1 = AnimElem = 1
value = S10,11
volumescale = 200
[State 0, Voice - Grunt 7!]
type = PlaySnd
triggerall = var(2)  >=61
triggerall = var(2)  <=75
trigger1 = AnimElem = 1
value = S10,12
volumescale = 200
[State 0, Voice - Grunt 8!]
type = PlaySnd
triggerall = var(2)  >=76
triggerall = var(2)  <=100
trigger1 = AnimElem = 1
value = S10,13
volumescale = 200

[State 0, Helper]
type = Helper
triggerall = numhelper(300) = 1
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "C - Start"
ID = 528
stateno = 80081
pos = 0,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
[State 0, Helper]
type = Helper
triggerall = numhelper(300) = 0
trigger1 = AnimElem = 3
helpertype = normal ;player
name = "C - Start"
ID = 528
stateno = 80081
pos = 0,-20
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;-------------------------------------------------------
; Yoru Wavedash C - Boomerang Sword
[Statedef 80081]
type    = S
movetype= A
physics = N
juggle  = 2
ctrl = 0
anim = 80081
velset = 0,0
sprpriority = 3

[State 0, Juggle Map]
type = RootMapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, Helper Guarded]
type = RootMapSet
trigger1 = 1 
map = "helperGuarded"
value = moveguarded

[State 0, Helper Hit]
type = RootMapSet
trigger1 = 1 
map = "helperHit"
value = movehit

[State 0, Damage Proration]
type = parentvaradd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 10

[State -2, Counterhit TSP]
type = Helper
Triggerall = numhelper(4020) = 0
trigger1 = movecountered
helpertype = normal 
name = "Counterhit TSP"
supermovetime = 999999999999
pausemovetime = 999999999999
ignorehitpause = 1
persistent = 0
ID = 4020
stateno = 4020
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
ignorehitpause = 1
persistent = 0


[State 0, ScreenBound]
type = ScreenBound
trigger1 = 1
value = 1
movecamera = 0,0
[State 0, ScreenBound]
type = ScreenBound
trigger1 = hitcount >=1
trigger2 = vel x < 0
value = 0
[State 0, AssertSpecial]
type = AssertSpecial
trigger1 = 1
flag = noshadow

[State 0, VarSet]
type = VarSet
trigger1 = time = 0
v = 10
value = 0

[State 0, VarSet]
type = VarSet
trigger1 = backedgedist - (root,backedgedist) > 80 && var(10) = 0
v = 10
value = 1

[state 450]
type = velset
trigger1 = time = 0
x = -12
[state 450]
type = veladd
trigger1 = time >= 15 && vel x < 16 && var(10) = 0
x = 2

[state 450]
type = veladd
trigger1 = var(10) = 1
x = -2

[State 0, Guard Count Reset]
type = MapSet
trigger1 = time = 0
map = "guardCount"
value = 0


[State 0, Guard Count Add]
type = MapAdd
trigger1 = moveguarded = 1
map = "guardCount"
value = 1
;ignorehitpause = 
;persistent =

[State 310, 1]
type = HitDef
getpower = 0
triggerall = root,movetype != H
triggerall = root,map(juggle) < 100 || hitcount != 0
Triggerall = vel x > 0
Triggerall = anim = 80081 && (map(guardCount) + hitcount) <= 3
trigger1 = time > 5
attr = S, NP
animtype  = Heavy 
damage    = 5*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
guard.pausetime = 4,4
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S200,13
guardsound = 6,10
ground.type = High
ground.slidetime = 12
guard.hittime = 20
ground.hittime  = 15
ground.velocity = 2,-2
air.velocity = 2,-2
Fall = 0
Envshake.time = 5
Getpower = 0,0
Fall.recovertime = 40
[State 200, 1]
type = HitDef
triggerall = root,movetype != H
triggerall = root,map(juggle) < 100 || hitcount != 0
Triggerall = vel x > 0
Triggerall = anim = 80081 && (map(guardCount) + hitcount) <= 3
trigger1 = time > 5
attr = S, NP
animtype  = Heavy 
damage    = 5*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MAF
pausetime = 4,4
guard.pausetime = 4,4
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S200,13
guardsound = 6,10
ground.type = High
ground.slidetime = 12
guard.hittime = 20
ground.hittime  = 15
ground.velocity = -1.5,-1.5
air.velocity = -1.5,-1.5
Fall = 0
Envshake.time = 5
Getpower = 0,0
Fall.recovertime = 40

[State 200, 1]
type = HitDef
triggerall = root,movetype != H
triggerall = root,map(juggle) < 100 || hitcount != 0
Triggerall = vel x < -3
Triggerall = anim = 491 && (map(guardCount) + hitcount) <= 4
trigger1 = time > 5
attr = S, NP
animtype  = Heavy 
damage    = 5*map(AbilityMultiplier)
Hitflag = MAFD
guardflag = MA
pausetime = 4,4
guard.pausetime = 4,4
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,0
hitsound   = S0,11
guardsound = 6,10
ground.type = High
ground.slidetime = 12
guard.hittime = 0
ground.hittime  = 15
ground.velocity = 2,-1.5
air.velocity = 2,-1.5
down.velocity = 2,-3
Fall = 0
Envshake.time = 5
Getpower = 0,0
Fall.recovertime = 40

;[State 200, End]
;type = ChangeAnim2
;trigger2 = var(10) = 1 && Anim = 491
;value = 410
;elem = 1

[State 200, End]
type = ChangeState
trigger1 = frontedgebodydist < -200
trigger2 = time > 80
value = 5311


;===============================================================================
; Violet Wavedash C:
;-------------------------------------------------------------------------------
[Statedef 80090]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 80090
poweradd = -50
sprpriority = 1

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 5
persistent = 0

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 200, Damage Proration]
type = VarAdd
trigger1 = movehit
v = 11
ignorehitpause = 1
persistent = 0
value = 5

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S8,0
volumescale = 999

[State 0, PlaySnd]
type = PlaySnd
trigger1 = AnimElem = 4
value = S8,0
volumescale = 999

[State 0, VelSet if coming from wavedash]
type = VelSet
triggerall = vel x > const(velocity.run.fwd.x)
trigger1 = prevstateno = 30 && time = 0
x = const(velocity.run.fwd.x)

[State 0, EnvShake]
type = EnvShake
trigger1 = AnimElem = 4
time = 5

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 80091
ID = 80091
pos = 45,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 4
anim = 80091
ID = 80091
pos = -45,0
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 1,1
sprpriority = 0
ontop = 1
shadow = 0,0,0
ownpal = 0
removeongethit = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = map(juggle) < 100 || hitcount != 0
triggerall = !movecontact
trigger1 = 1
attr = S, NA
animtype  = Medium
damage    = ifelse(enemy,movetype = A,80,40)*map(AbilityMultiplier)
hitflag = MAFD
guardflag = MA
pausetime = ifelse(enemy,movetype = A,30,12),ifelse(enemy,movetype = A,30,12)
guard.pausetime = 12,12
sparkno = 1
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = ifelse(enemy,movetype = A,8,5),ifelse(enemy,movetype = A,0,4)
guardsound = 6,11
ground.type = High
ground.slidetime = 15
ground.hittime  = 15
ground.velocity = -1,ifelse(enemy,movetype = A, -9, -5)
air.velocity = -1,ifelse(enemy,movetype = A, -9, -5)
guard.velocity = -4
Fall = 1
Envshake.time = 20
fall.recover = ifelse(enemy,movetype = A, 0, 1)
fall.recovertime = 40 + ifelse(enemy,movetype = A, 7, 0)

[State 0, VarAdd]
type = VarAdd
trigger1 = AnimElem = 4
v = 47    ;fv = 
value = -2 ;two shots

[State 200, 2C]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
trigger1 = command = "holddown"
trigger1 = command = "c"
value = 541

[State 200, End]
type = ChangeState
Triggerall = movehit
trigger1 = command = "hyperhop"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 60

[State 200, End]
type = ChangeState
Triggerall = movehit
trigger1 = command = "up"
value = 40

[State 200, 6C]
type = ChangeState
Triggerall = movecontact
Triggerall = var(47) > 0
trigger1 = command = "holdfwd"
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 540

[State 200, Wavedash]
type = ChangeState
triggerall = movehit
trigger1 = command = "WD"
value = 30
ctrl = 0

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


;===============================================================================
; Bill Wavedash C
;-------------------------------------------------------------------------------
[Statedef 80100]
type    = S
movetype= A
physics = S
juggle  = 0
ctrl = 0
anim = 80100
poweradd = -200
sprpriority = 2



[State 0, Explode Under You]
type = Helper
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "Light Explosive"
ID = 630
stateno = 630
pos = -20, 0
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inheritjuggle = 1

[State 0, Helper]
type = Helper
triggerall = var(21) > 0
trigger1 = AnimElem = 4
helpertype = normal ;player
name = "Light Explosive"
ID = 630
stateno = 630
pos = p2bodydist x + 20, p2bodydist y
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
inheritjuggle = 1

[State 0, VarAdd]
type = Varadd
triggerall = var(21) > 0
trigger1 = AnimElem = 4
v = 21    
value = -1
persistent = 0

[State 490, Launch VelSet]
type = VelSet
trigger1 = AnimElem = 5
x = 5
y = -6

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A
movetype = A
physics = A

[State 0, CtrlSet]
type = CtrlSet
trigger1 = AnimElem = 7
value = 1

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;===============================================================================
; Wavedash C DP Mini
;-------------------------------------------------------------------------------
[Statedef 80110]
type    = S
movetype = A
physics = S
juggle  = 2
ctrl = 0
anim = 80110
poweradd = -250
sprpriority = 2

[State 0, Juggle Map]
type = MapAdd
trigger1 = movehit && enemy,gethitvar(fall)
map = "juggle"
value = 10
persistent = 0

[State 200, Damage Proration]
type = VarAdd
trigger1 = movehit ;If the Attack Hits...
v = 11 ;This variable will be the one the proration points will be added to.
ignorehitpause = 1 ;This block of code will ignore hitpause.
persistent = 0 ;This will only trigger once.
value = 8 ;...Add this number of proration points.

[State 200, Woosh] 
type = PlaySnd
trigger1 = AnimElem = 4
value = S1,10
volume = 120

[State 0, Burning MapAdd]
type = MapAdd
trigger1 = movecontact && !movecountered
map = "burn"
value = 1
persistent = 0
redirectid = enemynear,id

[State 0, BurnStack MapAdd]
type = MapAdd
trigger1 = movecontact && !movecountered
map = "burnStack"
value = 1
persistent = 0

[State 490, VelSet]
type = VelSet
trigger1 = AnimElem = 5 || AnimElem = 6
x = 2
y = -6

[State 0, StateTypeSet]
type = StateTypeSet
trigger1 = AnimElem = 5
statetype = A
movetype = A
physics = A

[State 450, NotHitBy]
type = notHitBy
trigger1 = time = (1, 8)
value = SA
time = 1

[State 220, Attack] ; MultiHits
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
trigger1 = AnimElem = 5 || AnimElem = 6
attr = C, NA
animtype  = Medium
damage    = 10*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAFD
pausetime = 10,10
guard.pausetime = 15, 15
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,1
guardsound = 6,10
ground.type = High
ground.slidetime = 12 + ifelse(enemy,movetype = A, 7, 0)
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7, 0)
ground.velocity = -1,-2
air.velocity = -1,-2
Fall = 0
fall.recover = 1
Envshake.time = 10
Fall.recovertime = 30 + ifelse(enemy,movetype = A, 7, 0)
guard.cornerpush.veloff = -2
airguard.cornerpush.veloff = -2

[State 220, Attack] ; Final Hit
type = HitDef
getpower = 0
triggerall = map(juggle) < 100
trigger1 = AnimElem = 7
attr = C, NA
animtype  = Medium
damage    = 30*map(AbilityMultiplier)
hitflag = MAF
guardflag = MAFD
pausetime = 15,15
guard.pausetime = 15, 15
sparkno = 0
guard.sparkno = 13000
sparkxy = -8,-25
hitsound   = 5,4
guardsound = 6,11
ground.type = High
ground.slidetime = 12 + ifelse(enemy,movetype = A, 7, 0)
ground.hittime  = 25 + ifelse(enemy,movetype = A, 7, 0)
ground.velocity = -2.5,-7
air.velocity = -2.5,-6
Fall = 1
fall.recover = 1
Envshake.time = 15
Fall.recovertime = 40 + ifelse(enemy,movetype = A, 7, 0)
guard.cornerpush.veloff = -2
airguard.cornerpush.veloff = -2

[State 200, SPECIAL 3 - CUTTER]
type = ChangeState
Triggerall = movecontact
triggerall = numhelper(3500) = 0
Triggerall = power >= 1000
trigger1 = command = "SPECIAL 3"
value = 26000

[State 200, 2C]
type = ChangeState
Triggerall = movehit
Triggerall = power >= 200
triggerall = numhelper(3500) = 0
trigger1 = command = "holddown"
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 670

[State 200, Jumping C Cancel]
type = ChangeState
Triggerall = movehit
triggerall = numhelper(3500) = 0
trigger1 = command = "c"
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100)
value = 677

[State 610, Air Jump Cancel]
type = ChangeState
triggerall = movehit
trigger1 = command = "holdup" && var(3) = 0 
trigger2 = roundstate = 2 && ailevel > 0 && random < (ailevel * 100) && movecontact && var(3) = 0 
value = 45
ctrl = 1

[State 610, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

; Clutch Wavedash C:
;-------------------------------------------------------------------------------
[Statedef 80120]
type    = S
movetype= A
physics = S
juggle  = 1
ctrl = 0
anim = 80120
poweradd = -100
velset = 0,0
sprpriority = 2

[State 0, FatalCounter]
type = MapSet
trigger1 = 1
map = "fatal"
value = 1
ignorehitpause = 1

[State 0, Level Up]
type = PlaySnd
trigger1 = time = 0
value = S450, 1
volumescale = 200

[State 0, VarSet]
type = VarAdd  
trigger1 = Time = 19
v = 17    ;fv = 10
value = 1

[State 0, VelSet]
type = VelSet
trigger1 = prevstateno = 30 && AnimElem = 1
x = const(velocity.run.fwd.x) * 1.5

[State 0, VelSet]
type = VelSet
trigger1 = AnimElem = 2
x = 0

[State 0, Explod]
type = Explod
trigger1 = AnimElem = 1
anim = 691
ID = 691
pos = 0,-30
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = 1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -2
pausemovetime = 0
scale = 0.3,0.3
sprpriority = 5
ontop = 1
shadow = 0,0,0
ownpal = 1
removeongethit = 1

[State 0, Helper]
type = Helper
trigger1 = AnimElem = 2
helpertype = normal ;player
name = "Spam Deny"
ID = 6823
stateno = 6823
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 1
supermovetime = 0
pausemovetime = 0

[State 200, 1]
type = HitDef
getpower = 0
triggerall = !movecontact
triggerall = map(juggle) < 100
trigger1 = 1
attr = S, NA
animtype  = Light
damage    = ifelse(enemy,movetype = A, 50, 10)*map(AbilityMultiplier)
hitflag = MAF
guardflag = MA
pausetime = ifelse(enemy,movetype = A, 25, 5),ifelse(enemy,movetype = A, 30, 8)
guard.pausetime = 5,5
sparkno = s623
guard.sparkno = 13000
sparkxy = -30,-25
hitsound = S0,5
guardsound = 6,10
ground.type = High
ground.slidetime = 12
ground.hittime  = 15 + ifelse(enemy,movetype = A, 7,0)
air.hittime = 15
ground.velocity = -4,ifelse(enemy,movetype = A, -8,-3)
air.velocity = -4,ifelse(enemy,movetype = A, -7,-2)
Fall = ifelse(enemy,movetype = A, 1, 0)
Envshake.time = ifelse(enemy,movetype = A, 30, 10)
Fall.recovertime = 40 + ifelse(enemy,movetype = A, 14,0)
guard.cornerpush.veloff = -5
airguard.cornerpush.veloff = -4

[State 200, End]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1


[Statedef -2]



;Gauge
;===============================

[State 0, Ability]
type = Explod
ownpal = 1
triggerall = gethitvar(damage) >=! 75
;triggerall = enemy,map(fatal) =! 1 && enemy,movecountered =! 1
triggerall = teamside = 1 ;p1 side
triggerall = teammode = single || (teammode = tag && roundstate = 2)
triggerall = numExplod(9500) = 0
trigger1 = 1
anim = 9400 + var(19) 
ID = 9400
pos = 147.3,147.8
postype = left  ;p2,front,back,left,right
sprpriority = -1
removetime = 1
scale = 0.75,0.75
space = screen
ignorehitpause = 1
supermovetime = 99999999999999999999999
pausemovetime = 99999999999999999999999

[State 0, Ability]
type = Explod
ownpal = 1
triggerall = gethitvar(damage) >=! 75
;triggerall = enemy,map(fatal) =! 1 && enemy,movecountered =! 1
triggerall = teamside = 2 ;p1 side
triggerall = teammode = single || (teammode = tag && roundstate = 2)
triggerall = numExplod(9500) = 0
trigger1 = 1
anim = 9400 + var(19) 
ID = 9400
pos = 171.5,147.8
postype = right  ;p2,front,back,left,right
sprpriority = -1
removetime = 1
scale = 0.75,0.75
space = screen
ignorehitpause = 1
supermovetime = 99999999999999999999999
pausemovetime = 99999999999999999999999

[State 9165, Bar]
type = Explod
triggerall = TeamSide = 1
trigger1 = NumExplod(9200) = 0 
anim = 9200
ID = 9200
scale = 0.25,0.25
postype = left
pos = 34,128
sprpriority = -2
bindtime = -1
pausemovetime = 0
supermovetime = 0
ignorehitpause = 1
ownpal = 1

[State 9165, for charge based abilities]
type = Explod
triggerall = TeamSide = 1
trigger1 = var(19) = 11 && map(heat) < 100
anim = 20020 
ID = 20020
scale = .45,.45
postype = left
pos = 80,150
sprpriority = -1
bindtime = -1
removetime = 1
pausemovetime = 99999999999999999999999
supermovetime = 99999999999999999999999
ignorehitpause = 1
ownpal = 1

[State 9165, for charge based abilities]
type = Explod
triggerall = TeamSide = 1
trigger1 = var(19) = 11 && map(heat) < 200 && map(heat) > 100
anim = 20021
ID = 20021
scale = .45,.45
postype = left
pos = 80,150
sprpriority = -1
bindtime = -1
removetime = 1
pausemovetime = 99999999999999999999999
supermovetime = 99999999999999999999999
ignorehitpause = 1
ownpal = 1

[State 9165, for charge based abilities]
type = Explod
triggerall = TeamSide = 1
trigger1 = var(19) = 11 && map(heat) < 300 && map(heat) > 200
anim = 20022
ID = 20022
scale = .45,.45
postype = left
pos = 80,150
sprpriority = -1
bindtime = -1
removetime = 1
pausemovetime = 99999999999999999999999
supermovetime = 99999999999999999999999
ignorehitpause = 1
ownpal = 1

[State 9165, for charge based abilities]
type = Explod
triggerall = TeamSide = 1
trigger1 = var(19) = 11 && map(heat) >= 300
anim = 20023
ID = 20023
scale = .45,.45
postype = left
pos = 80,150
sprpriority = -1
bindtime = -1
removetime = 1
pausemovetime = 99999999999999999999999
supermovetime = 99999999999999999999999
ignorehitpause = 1
ownpal = 1

[State 9165, for charge based abilities p2]
type = Explod
triggerall = TeamSide = 2
trigger1 = var(19) = 11 && map(heat) < 100
anim = 20021
ID = 20021
scale = .45,.45
postype = left
pos = -80,150
sprpriority = -1
bindtime = -1
removetime = 1
pausemovetime = 99999999999999999999999
supermovetime = 99999999999999999999999
ignorehitpause = 1
ownpal = 1

[State 9165, for charge based abilities]
type = Explod
triggerall = TeamSide = 2
trigger1 = var(19) = 11 && map(heat) < 300 && map(heat) > 200
anim = 20021
ID = 20021
scale = .45,.45
postype = left
pos = -80,150
sprpriority = -1
bindtime = -1
removetime = 1
pausemovetime = 99999999999999999999999
supermovetime = 99999999999999999999999
ignorehitpause = 1
ownpal = 1

[State 9165, for charge based abilities]
type = Explod
triggerall = TeamSide = 2
trigger1 = var(19) = 11 && map(heat) >= 300
anim = 20021
ID = 20021
scale = .45,.45
postype = left
pos = -80,150
sprpriority = -1
bindtime = -1
removetime = 1
pausemovetime = 99999999999999999999999
supermovetime = 99999999999999999999999
ignorehitpause = 1
ownpal = 1

[State 9165, Bar p2]
type = Explod
triggerall = TeamSide = 2
trigger1 = NumExplod(9201) = 0
anim = 9201
ID = 9201
scale = 0.25,0.25
postype = right
pos = -34,128
sprpriority = -3
bindtime = -1
pausemovetime = 0
supermovetime = 0
ignorehitpause = 1
ownpal = 1

[State 0, Violet bullet display]
type = Explod
triggerall = teammode = single || (teammode = tag && roundstate = 2)
triggerall = stateno != 5610 && stateno != 5611
triggerall = ailevel = 0
triggerall = teamside = 1 && var(19) = 9
trigger1 =  1
anim = 20020 + var(47)
ID = 20020
pos = 80,150
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 1
pausemovetime = 0
scale = .45,.45
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1 

[State 0, Violet bullet display]
type = Explod
triggerall = teammode = single || (teammode = tag && roundstate = 2)
triggerall = stateno != 5610 && stateno != 5611
triggerall = ailevel = 0
triggerall = teamside = 2 && var(19) = 9
trigger1 =  1
anim = 20020 + var(47)
ID = 20020
pos = -80,150
postype = right  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 1
pausemovetime = 0
scale = .45,.45
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1 


[State 0, bill display]
type = Explod
triggerall = teammode = single || (teammode = tag && roundstate = 2)
triggerall = stateno != 5610 && stateno != 5611
triggerall = ailevel = 0
triggerall = teamside = 1 && var(19) = 10
trigger1 =  1
anim = 20020 + var(21)
ID = 20020
pos = 80,150
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 1
pausemovetime = 0
scale = .45,.45
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1 

[State 0, bill display]
type = Explod
triggerall = teammode = single || (teammode = tag && roundstate = 2)
triggerall = stateno != 5610 && stateno != 5611
triggerall = ailevel = 0
triggerall = teamside = 2 && var(19) = 10
trigger1 =  1
anim = 20020 + var(21)
ID = 20020
pos = -80,150
postype = right  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 1
pausemovetime = 0
scale = .45,.45
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1 

[State 0, clutch charge display]
type = Explod
triggerall = teammode = single || (teammode = tag && roundstate = 2)
triggerall = stateno != 5610 && stateno != 5611
triggerall = ailevel = 0
triggerall = teamside = 1 && var(19) = 12
trigger1 =  1
anim = 20020 + var(17)
ID = 20020
pos = 80,150
postype = left  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 1
pausemovetime = 0
scale = .45,.45
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1 

[State 0, clutch charge display]
type = Explod
triggerall = teammode = single || (teammode = tag && roundstate = 2)
triggerall = stateno != 5610 && stateno != 5611
triggerall = ailevel = 0
triggerall = teamside = 2 && var(19) = 12
trigger1 =  1
anim = 20020 + var(17)
ID = 20020
pos = -80,150
postype = right  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = 1
pausemovetime = 0
scale = .45,.45
sprpriority = 0
ontop = 0
shadow = 0,0,0
ownpal = 0
removeongethit = 0
ignorehitpause = 1 

;---------------------------------------------------------------------
[Statedef -3]


[State 214, y]
type = removeexplod
trigger1 = stateno != 401 && stateno != 409 && stateno != 402
trigger2 = movetype = H
id = 143

; ------- Heat Mechanic ------------

[State 0, Helper]
type = Helper
triggerall = map(burnStack) > 0
trigger1 = numhelper(10500) = 0
helpertype = normal ;player
name = "Burning"
ID = 10500
stateno = 10500
pos = 9999,9999
postype = p1    ;p2,front,back,left,right
facing = 1
keyctrl = 0
ownpal = 0
supermovetime = 0
pausemovetime = 0
persistent = 0

[State 0, Reset Heat upon New Round]
type = MapSet
trigger1 = roundstate = 4
map = "heat"
value = 0

[State 0, Prevent Heat from going over 300]
type = MapSet
trigger1 = map(heat) > 300
map = "heat"
value = 300
;-------------------------------------------------------------------------------

[State 0, Explod] ; Shows Jay has at least 1 level of heat
type = Explod
triggerall = map(heat) >= 100
trigger1 = numexplod(10001) = 0
trigger1 = var(19) = 11
anim = 10500
ID = 10001
pos = 0,5
postype = p1  ;p2,front,back,left,right
facing = 1
vfacing = 1
bindtime = -1
vel = 0,0
accel = 0,0
random = 0,0
removetime = -1
pausemovetime = 0
scale = .5,.5
sprpriority = 5
ontop = 0
shadow = 0,0,0
ownpal = 1
removeongethit = 0
ignorehitpause = 1
